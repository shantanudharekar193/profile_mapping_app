var v1=Object.defineProperty;var E1=(i,e,t)=>e in i?v1(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var vp=(i,e,t)=>E1(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function Ym(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var eh={exports:{}},So={},th={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep;function x1(){if(Ep)return Re;Ep=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=_&&I[_]||I["@@iterator"],typeof I=="function"?I:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function S(I,N,se){this.props=I,this.context=N,this.refs=w,this.updater=se||E}S.prototype.isReactComponent={},S.prototype.setState=function(I,N){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,N,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function C(){}C.prototype=S.prototype;function R(I,N,se){this.props=I,this.context=N,this.refs=w,this.updater=se||E}var M=R.prototype=new C;M.constructor=R,v(M,S.prototype),M.isPureReactComponent=!0;var L=Array.isArray,A=Object.prototype.hasOwnProperty,W={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function b(I,N,se){var z,ce={},de=null,_e=null;if(N!=null)for(z in N.ref!==void 0&&(_e=N.ref),N.key!==void 0&&(de=""+N.key),N)A.call(N,z)&&!V.hasOwnProperty(z)&&(ce[z]=N[z]);var we=arguments.length-2;if(we===1)ce.children=se;else if(1<we){for(var Te=Array(we),Ge=0;Ge<we;Ge++)Te[Ge]=arguments[Ge+2];ce.children=Te}if(I&&I.defaultProps)for(z in we=I.defaultProps,we)ce[z]===void 0&&(ce[z]=we[z]);return{$$typeof:i,type:I,key:de,ref:_e,props:ce,_owner:W.current}}function U(I,N){return{$$typeof:i,type:I.type,key:N,ref:I.ref,props:I.props,_owner:I._owner}}function Y(I){return typeof I=="object"&&I!==null&&I.$$typeof===i}function ne(I){var N={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(se){return N[se]})}var q=/\/+/g;function ie(I,N){return typeof I=="object"&&I!==null&&I.key!=null?ne(""+I.key):N.toString(36)}function ee(I,N,se,z,ce){var de=typeof I;(de==="undefined"||de==="boolean")&&(I=null);var _e=!1;if(I===null)_e=!0;else switch(de){case"string":case"number":_e=!0;break;case"object":switch(I.$$typeof){case i:case e:_e=!0}}if(_e)return _e=I,ce=ce(_e),I=z===""?"."+ie(_e,0):z,L(ce)?(se="",I!=null&&(se=I.replace(q,"$&/")+"/"),ee(ce,N,se,"",function(Ge){return Ge})):ce!=null&&(Y(ce)&&(ce=U(ce,se+(!ce.key||_e&&_e.key===ce.key?"":(""+ce.key).replace(q,"$&/")+"/")+I)),N.push(ce)),1;if(_e=0,z=z===""?".":z+":",L(I))for(var we=0;we<I.length;we++){de=I[we];var Te=z+ie(de,we);_e+=ee(de,N,se,Te,ce)}else if(Te=y(I),typeof Te=="function")for(I=Te.call(I),we=0;!(de=I.next()).done;)de=de.value,Te=z+ie(de,we++),_e+=ee(de,N,se,Te,ce);else if(de==="object")throw N=String(I),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return _e}function te(I,N,se){if(I==null)return I;var z=[],ce=0;return ee(I,z,"","",function(de){return N.call(se,de,ce++)}),z}function re(I){if(I._status===-1){var N=I._result;N=N(),N.then(function(se){(I._status===0||I._status===-1)&&(I._status=1,I._result=se)},function(se){(I._status===0||I._status===-1)&&(I._status=2,I._result=se)}),I._status===-1&&(I._status=0,I._result=N)}if(I._status===1)return I._result.default;throw I._result}var Z={current:null},j={transition:null},Q={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:j,ReactCurrentOwner:W};function G(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:te,forEach:function(I,N,se){te(I,function(){N.apply(this,arguments)},se)},count:function(I){var N=0;return te(I,function(){N++}),N},toArray:function(I){return te(I,function(N){return N})||[]},only:function(I){if(!Y(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Re.Component=S,Re.Fragment=t,Re.Profiler=s,Re.PureComponent=R,Re.StrictMode=r,Re.Suspense=h,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Re.act=G,Re.cloneElement=function(I,N,se){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var z=v({},I.props),ce=I.key,de=I.ref,_e=I._owner;if(N!=null){if(N.ref!==void 0&&(de=N.ref,_e=W.current),N.key!==void 0&&(ce=""+N.key),I.type&&I.type.defaultProps)var we=I.type.defaultProps;for(Te in N)A.call(N,Te)&&!V.hasOwnProperty(Te)&&(z[Te]=N[Te]===void 0&&we!==void 0?we[Te]:N[Te])}var Te=arguments.length-2;if(Te===1)z.children=se;else if(1<Te){we=Array(Te);for(var Ge=0;Ge<Te;Ge++)we[Ge]=arguments[Ge+2];z.children=we}return{$$typeof:i,type:I.type,key:ce,ref:de,props:z,_owner:_e}},Re.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:l,_context:I},I.Consumer=I},Re.createElement=b,Re.createFactory=function(I){var N=b.bind(null,I);return N.type=I,N},Re.createRef=function(){return{current:null}},Re.forwardRef=function(I){return{$$typeof:c,render:I}},Re.isValidElement=Y,Re.lazy=function(I){return{$$typeof:p,_payload:{_status:-1,_result:I},_init:re}},Re.memo=function(I,N){return{$$typeof:f,type:I,compare:N===void 0?null:N}},Re.startTransition=function(I){var N=j.transition;j.transition={};try{I()}finally{j.transition=N}},Re.unstable_act=G,Re.useCallback=function(I,N){return Z.current.useCallback(I,N)},Re.useContext=function(I){return Z.current.useContext(I)},Re.useDebugValue=function(){},Re.useDeferredValue=function(I){return Z.current.useDeferredValue(I)},Re.useEffect=function(I,N){return Z.current.useEffect(I,N)},Re.useId=function(){return Z.current.useId()},Re.useImperativeHandle=function(I,N,se){return Z.current.useImperativeHandle(I,N,se)},Re.useInsertionEffect=function(I,N){return Z.current.useInsertionEffect(I,N)},Re.useLayoutEffect=function(I,N){return Z.current.useLayoutEffect(I,N)},Re.useMemo=function(I,N){return Z.current.useMemo(I,N)},Re.useReducer=function(I,N,se){return Z.current.useReducer(I,N,se)},Re.useRef=function(I){return Z.current.useRef(I)},Re.useState=function(I){return Z.current.useState(I)},Re.useSyncExternalStore=function(I,N,se){return Z.current.useSyncExternalStore(I,N,se)},Re.useTransition=function(){return Z.current.useTransition()},Re.version="18.3.1",Re}var xp;function Kh(){return xp||(xp=1,th.exports=x1()),th.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function w1(){if(wp)return So;wp=1;var i=Kh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(c,h,f){var p,_={},y=null,E=null;f!==void 0&&(y=""+f),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(E=h.ref);for(p in h)r.call(h,p)&&!l.hasOwnProperty(p)&&(_[p]=h[p]);if(c&&c.defaultProps)for(p in h=c.defaultProps,h)_[p]===void 0&&(_[p]=h[p]);return{$$typeof:e,type:c,key:y,ref:E,props:_,_owner:s.current}}return So.Fragment=t,So.jsx=u,So.jsxs=u,So}var Sp;function S1(){return Sp||(Sp=1,eh.exports=w1()),eh.exports}var Ee=S1(),X=Kh();const C1=Ym(X);var _a={},nh={exports:{}},Gt={},ih={exports:{}},rh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp;function R1(){return Cp||(Cp=1,function(i){function e(j,Q){var G=j.length;j.push(Q);e:for(;0<G;){var I=G-1>>>1,N=j[I];if(0<s(N,Q))j[I]=Q,j[G]=N,G=I;else break e}}function t(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var Q=j[0],G=j.pop();if(G!==Q){j[0]=G;e:for(var I=0,N=j.length,se=N>>>1;I<se;){var z=2*(I+1)-1,ce=j[z],de=z+1,_e=j[de];if(0>s(ce,G))de<N&&0>s(_e,ce)?(j[I]=_e,j[de]=G,I=de):(j[I]=ce,j[z]=G,I=z);else if(de<N&&0>s(_e,G))j[I]=_e,j[de]=G,I=de;else break e}}return Q}function s(j,Q){var G=j.sortIndex-Q.sortIndex;return G!==0?G:j.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();i.unstable_now=function(){return u.now()-c}}var h=[],f=[],p=1,_=null,y=3,E=!1,v=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(j){for(var Q=t(f);Q!==null;){if(Q.callback===null)r(f);else if(Q.startTime<=j)r(f),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=t(f)}}function L(j){if(w=!1,M(j),!v)if(t(h)!==null)v=!0,re(A);else{var Q=t(f);Q!==null&&Z(L,Q.startTime-j)}}function A(j,Q){v=!1,w&&(w=!1,C(b),b=-1),E=!0;var G=y;try{for(M(Q),_=t(h);_!==null&&(!(_.expirationTime>Q)||j&&!ne());){var I=_.callback;if(typeof I=="function"){_.callback=null,y=_.priorityLevel;var N=I(_.expirationTime<=Q);Q=i.unstable_now(),typeof N=="function"?_.callback=N:_===t(h)&&r(h),M(Q)}else r(h);_=t(h)}if(_!==null)var se=!0;else{var z=t(f);z!==null&&Z(L,z.startTime-Q),se=!1}return se}finally{_=null,y=G,E=!1}}var W=!1,V=null,b=-1,U=5,Y=-1;function ne(){return!(i.unstable_now()-Y<U)}function q(){if(V!==null){var j=i.unstable_now();Y=j;var Q=!0;try{Q=V(!0,j)}finally{Q?ie():(W=!1,V=null)}}else W=!1}var ie;if(typeof R=="function")ie=function(){R(q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=q,ie=function(){te.postMessage(null)}}else ie=function(){S(q,0)};function re(j){V=j,W||(W=!0,ie())}function Z(j,Q){b=S(function(){j(i.unstable_now())},Q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){v||E||(v=!0,re(A))},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(h)},i.unstable_next=function(j){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var G=y;y=Q;try{return j()}finally{y=G}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var G=y;y=j;try{return Q()}finally{y=G}},i.unstable_scheduleCallback=function(j,Q,G){var I=i.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?I+G:I):G=I,j){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=G+N,j={id:p++,callback:Q,priorityLevel:j,startTime:G,expirationTime:N,sortIndex:-1},G>I?(j.sortIndex=G,e(f,j),t(h)===null&&j===t(f)&&(w?(C(b),b=-1):w=!0,Z(L,G-I))):(j.sortIndex=N,e(h,j),v||E||(v=!0,re(A))),j},i.unstable_shouldYield=ne,i.unstable_wrapCallback=function(j){var Q=y;return function(){var G=y;y=Q;try{return j.apply(this,arguments)}finally{y=G}}}}(rh)),rh}var Rp;function T1(){return Rp||(Rp=1,ih.exports=R1()),ih.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function I1(){if(Tp)return Gt;Tp=1;var i=Kh(),e=T1();function t(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(n,o){u(n,o),u(n+"Capture",o)}function u(n,o){for(s[n]=o,n=0;n<o.length;n++)r.add(o[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},_={};function y(n){return h.call(_,n)?!0:h.call(p,n)?!1:f.test(n)?_[n]=!0:(p[n]=!0,!1)}function E(n,o,a,d){if(a!==null&&a.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function v(n,o,a,d){if(o===null||typeof o>"u"||E(n,o,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function w(n,o,a,d,g,m,x){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=a,this.propertyName=n,this.type=o,this.sanitizeURL=m,this.removeEmptyString=x}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){S[n]=new w(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];S[o]=new w(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){S[n]=new w(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){S[n]=new w(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){S[n]=new w(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){S[n]=new w(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){S[n]=new w(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){S[n]=new w(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){S[n]=new w(n,5,!1,n.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function R(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(C,R);S[o]=new w(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(C,R);S[o]=new w(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(C,R);S[o]=new w(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){S[n]=new w(n,1,!1,n.toLowerCase(),null,!1,!1)}),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){S[n]=new w(n,1,!1,n.toLowerCase(),null,!0,!0)});function M(n,o,a,d){var g=S.hasOwnProperty(o)?S[o]:null;(g!==null?g.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(v(o,a,g,d)&&(a=null),d||g===null?y(o)&&(a===null?n.removeAttribute(o):n.setAttribute(o,""+a)):g.mustUseProperty?n[g.propertyName]=a===null?g.type===3?!1:"":a:(o=g.attributeName,d=g.attributeNamespace,a===null?n.removeAttribute(o):(g=g.type,a=g===3||g===4&&a===!0?"":""+a,d?n.setAttributeNS(d,o,a):n.setAttribute(o,a))))}var L=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),W=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),ne=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),j=Symbol.iterator;function Q(n){return n===null||typeof n!="object"?null:(n=j&&n[j]||n["@@iterator"],typeof n=="function"?n:null)}var G=Object.assign,I;function N(n){if(I===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);I=o&&o[1]||""}return`
`+I+n}var se=!1;function z(n,o){if(!n||se)return"";se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(O){var d=O}Reflect.construct(n,[],o)}else{try{o.call()}catch(O){d=O}n.call(o.prototype)}else{try{throw Error()}catch(O){d=O}n()}}catch(O){if(O&&d&&typeof O.stack=="string"){for(var g=O.stack.split(`
`),m=d.stack.split(`
`),x=g.length-1,T=m.length-1;1<=x&&0<=T&&g[x]!==m[T];)T--;for(;1<=x&&0<=T;x--,T--)if(g[x]!==m[T]){if(x!==1||T!==1)do if(x--,T--,0>T||g[x]!==m[T]){var P=`
`+g[x].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=x&&0<=T);break}}}finally{se=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?N(n):""}function ce(n){switch(n.tag){case 5:return N(n.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return n=z(n.type,!1),n;case 11:return n=z(n.type.render,!1),n;case 1:return n=z(n.type,!0),n;default:return""}}function de(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case W:return"Portal";case U:return"Profiler";case b:return"StrictMode";case ie:return"Suspense";case ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ne:return(n.displayName||"Context")+".Consumer";case Y:return(n._context.displayName||"Context")+".Provider";case q:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case te:return o=n.displayName||null,o!==null?o:de(n.type)||"Memo";case re:o=n._payload,n=n._init;try{return de(n(o))}catch{}}return null}function _e(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(o);case 8:return o===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function we(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Te(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ge(n){var o=Te(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),d=""+n[o];if(!n.hasOwnProperty(o)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var g=a.get,m=a.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(x){d=""+x,m.call(this,x)}}),Object.defineProperty(n,o,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Rt(n){n._valueTracker||(n._valueTracker=Ge(n))}function Mn(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var a=o.getValue(),d="";return n&&(d=Te(n)?n.checked?"true":"false":n.value),n=d,n!==a?(o.setValue(n),!0):!1}function pn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Hn(n,o){var a=o.checked;return G({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Dn(n,o){var a=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;a=we(o.value!=null?o.value:a),n._wrapperState={initialChecked:d,initialValue:a,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Qt(n,o){o=o.checked,o!=null&&M(n,"checked",o,!1)}function mt(n,o){Qt(n,o);var a=we(o.value),d=o.type;if(a!=null)d==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?Fn(n,o.type,a):o.hasOwnProperty("defaultValue")&&Fn(n,o.type,we(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function Vt(n,o,a){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,a||o===n.value||(n.value=o),n.defaultValue=o}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Fn(n,o,a){(o!=="number"||pn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Jt=Array.isArray;function en(n,o,a,d){if(n=n.options,o){o={};for(var g=0;g<a.length;g++)o["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=o.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&d&&(n[a].defaultSelected=!0)}else{for(a=""+we(a),o=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,d&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function mn(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Zn(n,o){var a=o.value;if(a==null){if(a=o.children,o=o.defaultValue,a!=null){if(o!=null)throw Error(t(92));if(Jt(a)){if(1<a.length)throw Error(t(93));a=a[0]}o=a}o==null&&(o=""),a=o}n._wrapperState={initialValue:we(a)}}function $n(n,o){var a=we(o.value),d=we(o.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),o.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),d!=null&&(n.defaultValue=""+d)}function qe(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function Dr(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sr(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?Dr(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qn,or=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,a,d,g){MSApp.execUnsafeLocalFunction(function(){return n(o,a,d,g)})}:n}(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(qn=qn||document.createElement("div"),qn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=qn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function lr(n,o){if(o){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=o;return}}n.textContent=o}var vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cl=["Webkit","ms","Moz","O"];Object.keys(vi).forEach(function(n){cl.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),vi[o]=vi[n]})});function Fr(n,o,a){return o==null||typeof o=="boolean"||o===""?"":a||typeof o!="number"||o===0||vi.hasOwnProperty(n)&&vi[n]?(""+o).trim():o+"px"}function hl(n,o){n=n.style;for(var a in o)if(o.hasOwnProperty(a)){var d=a.indexOf("--")===0,g=Fr(a,o[a],d);a==="float"&&(a="cssFloat"),d?n.setProperty(a,g):n[a]=g}}var vu=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Or(n,o){if(o){if(vu[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Nr(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=null;function zr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var bs=null,On=null,tn=null;function Ei(n){if(n=lo(n)){if(typeof bs!="function")throw Error(t(280));var o=n.stateNode;o&&(o=Ml(o),bs(n.stateNode,n.type,o))}}function xi(n){On?tn?tn.push(n):tn=[n]:On=n}function Us(){if(On){var n=On,o=tn;if(tn=On=null,Ei(n),o)for(n=0;n<o.length;n++)Ei(o[n])}}function Ws(n,o){return n(o)}function Tt(){}var _n=!1;function It(n,o,a){if(_n)return n(o,a);_n=!0;try{return Ws(n,o,a)}finally{_n=!1,(On!==null||tn!==null)&&(Tt(),Us())}}function _t(n,o){var a=n.stateNode;if(a===null)return null;var d=Ml(a);if(d===null)return null;a=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,o,typeof a));return a}var yt=!1;if(c)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){yt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{yt=!1}function yn(n,o,a,d,g,m,x,T,P){var O=Array.prototype.slice.call(arguments,3);try{o.apply(a,O)}catch(H){this.onError(H)}}var be=!1,et=null,Mt=!1,Xs=null,I0={onError:function(n){be=!0,et=n}};function L0(n,o,a,d,g,m,x,T,P){be=!1,et=null,yn.apply(I0,arguments)}function P0(n,o,a,d,g,m,x,T,P){if(L0.apply(this,arguments),be){if(be){var O=et;be=!1,et=null}else throw Error(t(198));Mt||(Mt=!0,Xs=O)}}function ur(n){var o=n,a=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,o.flags&4098&&(a=o.return),n=o.return;while(n)}return o.tag===3?a:null}function Wd(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function Xd(n){if(ur(n)!==n)throw Error(t(188))}function k0(n){var o=n.alternate;if(!o){if(o=ur(n),o===null)throw Error(t(188));return o!==n?null:n}for(var a=n,d=o;;){var g=a.return;if(g===null)break;var m=g.alternate;if(m===null){if(d=g.return,d!==null){a=d;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===a)return Xd(g),n;if(m===d)return Xd(g),o;m=m.sibling}throw Error(t(188))}if(a.return!==d.return)a=g,d=m;else{for(var x=!1,T=g.child;T;){if(T===a){x=!0,a=g,d=m;break}if(T===d){x=!0,d=g,a=m;break}T=T.sibling}if(!x){for(T=m.child;T;){if(T===a){x=!0,a=m,d=g;break}if(T===d){x=!0,d=m,a=g;break}T=T.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:o}function jd(n){return n=k0(n),n!==null?Bd(n):null}function Bd(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=Bd(n);if(o!==null)return o;n=n.sibling}return null}var Yd=e.unstable_scheduleCallback,Vd=e.unstable_cancelCallback,A0=e.unstable_shouldYield,M0=e.unstable_requestPaint,Qe=e.unstable_now,D0=e.unstable_getCurrentPriorityLevel,Eu=e.unstable_ImmediatePriority,Kd=e.unstable_UserBlockingPriority,dl=e.unstable_NormalPriority,F0=e.unstable_LowPriority,Hd=e.unstable_IdlePriority,fl=null,Nn=null;function O0(n){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(fl,n,void 0,(n.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:G0,N0=Math.log,z0=Math.LN2;function G0(n){return n>>>=0,n===0?32:31-(N0(n)/z0|0)|0}var gl=64,pl=4194304;function js(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ml(n,o){var a=n.pendingLanes;if(a===0)return 0;var d=0,g=n.suspendedLanes,m=n.pingedLanes,x=a&268435455;if(x!==0){var T=x&~g;T!==0?d=js(T):(m&=x,m!==0&&(d=js(m)))}else x=a&~g,x!==0?d=js(x):m!==0&&(d=js(m));if(d===0)return 0;if(o!==0&&o!==d&&!(o&g)&&(g=d&-d,m=o&-o,g>=m||g===16&&(m&4194240)!==0))return o;if(d&4&&(d|=a&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=d;0<o;)a=31-vn(o),g=1<<a,d|=n[a],o&=~g;return d}function b0(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U0(n,o){for(var a=n.suspendedLanes,d=n.pingedLanes,g=n.expirationTimes,m=n.pendingLanes;0<m;){var x=31-vn(m),T=1<<x,P=g[x];P===-1?(!(T&a)||T&d)&&(g[x]=b0(T,o)):P<=o&&(n.expiredLanes|=T),m&=~T}}function xu(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Zd(){var n=gl;return gl<<=1,!(gl&4194240)&&(gl=64),n}function wu(n){for(var o=[],a=0;31>a;a++)o.push(n);return o}function Bs(n,o,a){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-vn(o),n[o]=a}function W0(n,o){var a=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<a;){var g=31-vn(a),m=1<<g;o[g]=0,d[g]=-1,n[g]=-1,a&=~m}}function Su(n,o){var a=n.entangledLanes|=o;for(n=n.entanglements;a;){var d=31-vn(a),g=1<<d;g&o|n[d]&o&&(n[d]|=o),a&=~g}}var Ne=0;function $d(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var qd,Cu,Qd,Jd,ef,Ru=!1,_l=[],wi=null,Si=null,Ci=null,Ys=new Map,Vs=new Map,Ri=[],X0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tf(n,o){switch(n){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":Ys.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vs.delete(o.pointerId)}}function Ks(n,o,a,d,g,m){return n===null||n.nativeEvent!==m?(n={blockedOn:o,domEventName:a,eventSystemFlags:d,nativeEvent:m,targetContainers:[g]},o!==null&&(o=lo(o),o!==null&&Cu(o)),n):(n.eventSystemFlags|=d,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function j0(n,o,a,d,g){switch(o){case"focusin":return wi=Ks(wi,n,o,a,d,g),!0;case"dragenter":return Si=Ks(Si,n,o,a,d,g),!0;case"mouseover":return Ci=Ks(Ci,n,o,a,d,g),!0;case"pointerover":var m=g.pointerId;return Ys.set(m,Ks(Ys.get(m)||null,n,o,a,d,g)),!0;case"gotpointercapture":return m=g.pointerId,Vs.set(m,Ks(Vs.get(m)||null,n,o,a,d,g)),!0}return!1}function nf(n){var o=cr(n.target);if(o!==null){var a=ur(o);if(a!==null){if(o=a.tag,o===13){if(o=Wd(a),o!==null){n.blockedOn=o,ef(n.priority,function(){Qd(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yl(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var a=Iu(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var d=new a.constructor(a.type,a);ar=d,a.target.dispatchEvent(d),ar=null}else return o=lo(a),o!==null&&Cu(o),n.blockedOn=a,!1;o.shift()}return!0}function rf(n,o,a){yl(n)&&a.delete(o)}function B0(){Ru=!1,wi!==null&&yl(wi)&&(wi=null),Si!==null&&yl(Si)&&(Si=null),Ci!==null&&yl(Ci)&&(Ci=null),Ys.forEach(rf),Vs.forEach(rf)}function Hs(n,o){n.blockedOn===o&&(n.blockedOn=null,Ru||(Ru=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,B0)))}function Zs(n){function o(g){return Hs(g,n)}if(0<_l.length){Hs(_l[0],n);for(var a=1;a<_l.length;a++){var d=_l[a];d.blockedOn===n&&(d.blockedOn=null)}}for(wi!==null&&Hs(wi,n),Si!==null&&Hs(Si,n),Ci!==null&&Hs(Ci,n),Ys.forEach(o),Vs.forEach(o),a=0;a<Ri.length;a++)d=Ri[a],d.blockedOn===n&&(d.blockedOn=null);for(;0<Ri.length&&(a=Ri[0],a.blockedOn===null);)nf(a),a.blockedOn===null&&Ri.shift()}var Gr=L.ReactCurrentBatchConfig,vl=!0;function Y0(n,o,a,d){var g=Ne,m=Gr.transition;Gr.transition=null;try{Ne=1,Tu(n,o,a,d)}finally{Ne=g,Gr.transition=m}}function V0(n,o,a,d){var g=Ne,m=Gr.transition;Gr.transition=null;try{Ne=4,Tu(n,o,a,d)}finally{Ne=g,Gr.transition=m}}function Tu(n,o,a,d){if(vl){var g=Iu(n,o,a,d);if(g===null)Bu(n,o,d,El,a),tf(n,d);else if(j0(g,n,o,a,d))d.stopPropagation();else if(tf(n,d),o&4&&-1<X0.indexOf(n)){for(;g!==null;){var m=lo(g);if(m!==null&&qd(m),m=Iu(n,o,a,d),m===null&&Bu(n,o,d,El,a),m===g)break;g=m}g!==null&&d.stopPropagation()}else Bu(n,o,d,null,a)}}var El=null;function Iu(n,o,a,d){if(El=null,n=zr(d),n=cr(n),n!==null)if(o=ur(n),o===null)n=null;else if(a=o.tag,a===13){if(n=Wd(o),n!==null)return n;n=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return El=n,null}function sf(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D0()){case Eu:return 1;case Kd:return 4;case dl:case F0:return 16;case Hd:return 536870912;default:return 16}default:return 16}}var Ti=null,Lu=null,xl=null;function of(){if(xl)return xl;var n,o=Lu,a=o.length,d,g="value"in Ti?Ti.value:Ti.textContent,m=g.length;for(n=0;n<a&&o[n]===g[n];n++);var x=a-n;for(d=1;d<=x&&o[a-d]===g[m-d];d++);return xl=g.slice(n,1<d?1-d:void 0)}function wl(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Sl(){return!0}function lf(){return!1}function Kt(n){function o(a,d,g,m,x){this._reactName=a,this._targetInst=g,this.type=d,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Sl:lf,this.isPropagationStopped=lf,this}return G(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),o}var br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pu=Kt(br),$s=G({},br,{view:0,detail:0}),K0=Kt($s),ku,Au,qs,Cl=G({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Du,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qs&&(qs&&n.type==="mousemove"?(ku=n.screenX-qs.screenX,Au=n.screenY-qs.screenY):Au=ku=0,qs=n),ku)},movementY:function(n){return"movementY"in n?n.movementY:Au}}),af=Kt(Cl),H0=G({},Cl,{dataTransfer:0}),Z0=Kt(H0),$0=G({},$s,{relatedTarget:0}),Mu=Kt($0),q0=G({},br,{animationName:0,elapsedTime:0,pseudoElement:0}),Q0=Kt(q0),J0=G({},br,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ey=Kt(J0),ty=G({},br,{data:0}),uf=Kt(ty),ny={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ry={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sy(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=ry[n])?!!o[n]:!1}function Du(){return sy}var oy=G({},$s,{key:function(n){if(n.key){var o=ny[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=wl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?iy[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Du,charCode:function(n){return n.type==="keypress"?wl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?wl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ly=Kt(oy),ay=G({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cf=Kt(ay),uy=G({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Du}),cy=Kt(uy),hy=G({},br,{propertyName:0,elapsedTime:0,pseudoElement:0}),dy=Kt(hy),fy=G({},Cl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),gy=Kt(fy),py=[9,13,27,32],Fu=c&&"CompositionEvent"in window,Qs=null;c&&"documentMode"in document&&(Qs=document.documentMode);var my=c&&"TextEvent"in window&&!Qs,hf=c&&(!Fu||Qs&&8<Qs&&11>=Qs),df=" ",ff=!1;function gf(n,o){switch(n){case"keyup":return py.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ur=!1;function _y(n,o){switch(n){case"compositionend":return pf(o);case"keypress":return o.which!==32?null:(ff=!0,df);case"textInput":return n=o.data,n===df&&ff?null:n;default:return null}}function yy(n,o){if(Ur)return n==="compositionend"||!Fu&&gf(n,o)?(n=of(),xl=Lu=Ti=null,Ur=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return hf&&o.locale!=="ko"?null:o.data;default:return null}}var vy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mf(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!vy[n.type]:o==="textarea"}function _f(n,o,a,d){xi(d),o=Pl(o,"onChange"),0<o.length&&(a=new Pu("onChange","change",null,a,d),n.push({event:a,listeners:o}))}var Js=null,eo=null;function Ey(n){Of(n,0)}function Rl(n){var o=Yr(n);if(Mn(o))return n}function xy(n,o){if(n==="change")return o}var yf=!1;if(c){var Ou;if(c){var Nu="oninput"in document;if(!Nu){var vf=document.createElement("div");vf.setAttribute("oninput","return;"),Nu=typeof vf.oninput=="function"}Ou=Nu}else Ou=!1;yf=Ou&&(!document.documentMode||9<document.documentMode)}function Ef(){Js&&(Js.detachEvent("onpropertychange",xf),eo=Js=null)}function xf(n){if(n.propertyName==="value"&&Rl(eo)){var o=[];_f(o,eo,n,zr(n)),It(Ey,o)}}function wy(n,o,a){n==="focusin"?(Ef(),Js=o,eo=a,Js.attachEvent("onpropertychange",xf)):n==="focusout"&&Ef()}function Sy(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Rl(eo)}function Cy(n,o){if(n==="click")return Rl(o)}function Ry(n,o){if(n==="input"||n==="change")return Rl(o)}function Ty(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var En=typeof Object.is=="function"?Object.is:Ty;function to(n,o){if(En(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var a=Object.keys(n),d=Object.keys(o);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var g=a[d];if(!h.call(o,g)||!En(n[g],o[g]))return!1}return!0}function wf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sf(n,o){var a=wf(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=o&&d>=o)return{node:a,offset:o-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wf(a)}}function Cf(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Cf(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Rf(){for(var n=window,o=pn();o instanceof n.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)n=o.contentWindow;else break;o=pn(n.document)}return o}function zu(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function Iy(n){var o=Rf(),a=n.focusedElem,d=n.selectionRange;if(o!==a&&a&&a.ownerDocument&&Cf(a.ownerDocument.documentElement,a)){if(d!==null&&zu(a)){if(o=d.start,n=d.end,n===void 0&&(n=o),"selectionStart"in a)a.selectionStart=o,a.selectionEnd=Math.min(n,a.value.length);else if(n=(o=a.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var g=a.textContent.length,m=Math.min(d.start,g);d=d.end===void 0?m:Math.min(d.end,g),!n.extend&&m>d&&(g=d,d=m,m=g),g=Sf(a,m);var x=Sf(a,d);g&&x&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),n.removeAllRanges(),m>d?(n.addRange(o),n.extend(x.node,x.offset)):(o.setEnd(x.node,x.offset),n.addRange(o)))}}for(o=[],n=a;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<o.length;a++)n=o[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ly=c&&"documentMode"in document&&11>=document.documentMode,Wr=null,Gu=null,no=null,bu=!1;function Tf(n,o,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bu||Wr==null||Wr!==pn(d)||(d=Wr,"selectionStart"in d&&zu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),no&&to(no,d)||(no=d,d=Pl(Gu,"onSelect"),0<d.length&&(o=new Pu("onSelect","select",null,o,a),n.push({event:o,listeners:d}),o.target=Wr)))}function Tl(n,o){var a={};return a[n.toLowerCase()]=o.toLowerCase(),a["Webkit"+n]="webkit"+o,a["Moz"+n]="moz"+o,a}var Xr={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},Uu={},If={};c&&(If=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function Il(n){if(Uu[n])return Uu[n];if(!Xr[n])return n;var o=Xr[n],a;for(a in o)if(o.hasOwnProperty(a)&&a in If)return Uu[n]=o[a];return n}var Lf=Il("animationend"),Pf=Il("animationiteration"),kf=Il("animationstart"),Af=Il("transitionend"),Mf=new Map,Df="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(n,o){Mf.set(n,o),l(o,[n])}for(var Wu=0;Wu<Df.length;Wu++){var Xu=Df[Wu],Py=Xu.toLowerCase(),ky=Xu[0].toUpperCase()+Xu.slice(1);Ii(Py,"on"+ky)}Ii(Lf,"onAnimationEnd"),Ii(Pf,"onAnimationIteration"),Ii(kf,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Af,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ay=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function Ff(n,o,a){var d=n.type||"unknown-event";n.currentTarget=a,P0(d,o,void 0,n),n.currentTarget=null}function Of(n,o){o=(o&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],g=d.event;d=d.listeners;e:{var m=void 0;if(o)for(var x=d.length-1;0<=x;x--){var T=d[x],P=T.instance,O=T.currentTarget;if(T=T.listener,P!==m&&g.isPropagationStopped())break e;Ff(g,T,O),m=P}else for(x=0;x<d.length;x++){if(T=d[x],P=T.instance,O=T.currentTarget,T=T.listener,P!==m&&g.isPropagationStopped())break e;Ff(g,T,O),m=P}}}if(Mt)throw n=Xs,Mt=!1,Xs=null,n}function Xe(n,o){var a=o[$u];a===void 0&&(a=o[$u]=new Set);var d=n+"__bubble";a.has(d)||(Nf(o,n,2,!1),a.add(d))}function ju(n,o,a){var d=0;o&&(d|=4),Nf(a,n,d,o)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function ro(n){if(!n[Ll]){n[Ll]=!0,r.forEach(function(a){a!=="selectionchange"&&(Ay.has(a)||ju(a,!1,n),ju(a,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[Ll]||(o[Ll]=!0,ju("selectionchange",!1,o))}}function Nf(n,o,a,d){switch(sf(o)){case 1:var g=Y0;break;case 4:g=V0;break;default:g=Tu}a=g.bind(null,o,a,n),g=void 0,!yt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?n.addEventListener(o,a,{capture:!0,passive:g}):n.addEventListener(o,a,!0):g!==void 0?n.addEventListener(o,a,{passive:g}):n.addEventListener(o,a,!1)}function Bu(n,o,a,d,g){var m=d;if(!(o&1)&&!(o&2)&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var T=d.stateNode.containerInfo;if(T===g||T.nodeType===8&&T.parentNode===g)break;if(x===4)for(x=d.return;x!==null;){var P=x.tag;if((P===3||P===4)&&(P=x.stateNode.containerInfo,P===g||P.nodeType===8&&P.parentNode===g))return;x=x.return}for(;T!==null;){if(x=cr(T),x===null)return;if(P=x.tag,P===5||P===6){d=m=x;continue e}T=T.parentNode}}d=d.return}It(function(){var O=m,H=zr(a),$=[];e:{var K=Mf.get(n);if(K!==void 0){var oe=Pu,ue=n;switch(n){case"keypress":if(wl(a)===0)break e;case"keydown":case"keyup":oe=ly;break;case"focusin":ue="focus",oe=Mu;break;case"focusout":ue="blur",oe=Mu;break;case"beforeblur":case"afterblur":oe=Mu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=af;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=cy;break;case Lf:case Pf:case kf:oe=Q0;break;case Af:oe=dy;break;case"scroll":oe=K0;break;case"wheel":oe=gy;break;case"copy":case"cut":case"paste":oe=ey;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=cf}var he=(o&4)!==0,Je=!he&&n==="scroll",D=he?K!==null?K+"Capture":null:K;he=[];for(var k=O,F;k!==null;){F=k;var J=F.stateNode;if(F.tag===5&&J!==null&&(F=J,D!==null&&(J=_t(k,D),J!=null&&he.push(so(k,J,F)))),Je)break;k=k.return}0<he.length&&(K=new oe(K,ue,null,a,H),$.push({event:K,listeners:he}))}}if(!(o&7)){e:{if(K=n==="mouseover"||n==="pointerover",oe=n==="mouseout"||n==="pointerout",K&&a!==ar&&(ue=a.relatedTarget||a.fromElement)&&(cr(ue)||ue[Qn]))break e;if((oe||K)&&(K=H.window===H?H:(K=H.ownerDocument)?K.defaultView||K.parentWindow:window,oe?(ue=a.relatedTarget||a.toElement,oe=O,ue=ue?cr(ue):null,ue!==null&&(Je=ur(ue),ue!==Je||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(oe=null,ue=O),oe!==ue)){if(he=af,J="onMouseLeave",D="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(he=cf,J="onPointerLeave",D="onPointerEnter",k="pointer"),Je=oe==null?K:Yr(oe),F=ue==null?K:Yr(ue),K=new he(J,k+"leave",oe,a,H),K.target=Je,K.relatedTarget=F,J=null,cr(H)===O&&(he=new he(D,k+"enter",ue,a,H),he.target=F,he.relatedTarget=Je,J=he),Je=J,oe&&ue)t:{for(he=oe,D=ue,k=0,F=he;F;F=jr(F))k++;for(F=0,J=D;J;J=jr(J))F++;for(;0<k-F;)he=jr(he),k--;for(;0<F-k;)D=jr(D),F--;for(;k--;){if(he===D||D!==null&&he===D.alternate)break t;he=jr(he),D=jr(D)}he=null}else he=null;oe!==null&&zf($,K,oe,he,!1),ue!==null&&Je!==null&&zf($,Je,ue,he,!0)}}e:{if(K=O?Yr(O):window,oe=K.nodeName&&K.nodeName.toLowerCase(),oe==="select"||oe==="input"&&K.type==="file")var fe=xy;else if(mf(K))if(yf)fe=Ry;else{fe=Sy;var pe=wy}else(oe=K.nodeName)&&oe.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(fe=Cy);if(fe&&(fe=fe(n,O))){_f($,fe,a,H);break e}pe&&pe(n,K,O),n==="focusout"&&(pe=K._wrapperState)&&pe.controlled&&K.type==="number"&&Fn(K,"number",K.value)}switch(pe=O?Yr(O):window,n){case"focusin":(mf(pe)||pe.contentEditable==="true")&&(Wr=pe,Gu=O,no=null);break;case"focusout":no=Gu=Wr=null;break;case"mousedown":bu=!0;break;case"contextmenu":case"mouseup":case"dragend":bu=!1,Tf($,a,H);break;case"selectionchange":if(Ly)break;case"keydown":case"keyup":Tf($,a,H)}var me;if(Fu)e:{switch(n){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Ur?gf(n,a)&&(ye="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ye="onCompositionStart");ye&&(hf&&a.locale!=="ko"&&(Ur||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Ur&&(me=of()):(Ti=H,Lu="value"in Ti?Ti.value:Ti.textContent,Ur=!0)),pe=Pl(O,ye),0<pe.length&&(ye=new uf(ye,n,null,a,H),$.push({event:ye,listeners:pe}),me?ye.data=me:(me=pf(a),me!==null&&(ye.data=me)))),(me=my?_y(n,a):yy(n,a))&&(O=Pl(O,"onBeforeInput"),0<O.length&&(H=new uf("onBeforeInput","beforeinput",null,a,H),$.push({event:H,listeners:O}),H.data=me))}Of($,o)})}function so(n,o,a){return{instance:n,listener:o,currentTarget:a}}function Pl(n,o){for(var a=o+"Capture",d=[];n!==null;){var g=n,m=g.stateNode;g.tag===5&&m!==null&&(g=m,m=_t(n,a),m!=null&&d.unshift(so(n,m,g)),m=_t(n,o),m!=null&&d.push(so(n,m,g))),n=n.return}return d}function jr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function zf(n,o,a,d,g){for(var m=o._reactName,x=[];a!==null&&a!==d;){var T=a,P=T.alternate,O=T.stateNode;if(P!==null&&P===d)break;T.tag===5&&O!==null&&(T=O,g?(P=_t(a,m),P!=null&&x.unshift(so(a,P,T))):g||(P=_t(a,m),P!=null&&x.push(so(a,P,T)))),a=a.return}x.length!==0&&n.push({event:o,listeners:x})}var My=/\r\n?/g,Dy=/\u0000|\uFFFD/g;function Gf(n){return(typeof n=="string"?n:""+n).replace(My,`
`).replace(Dy,"")}function kl(n,o,a){if(o=Gf(o),Gf(n)!==o&&a)throw Error(t(425))}function Al(){}var Yu=null,Vu=null;function Ku(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Hu=typeof setTimeout=="function"?setTimeout:void 0,Fy=typeof clearTimeout=="function"?clearTimeout:void 0,bf=typeof Promise=="function"?Promise:void 0,Oy=typeof queueMicrotask=="function"?queueMicrotask:typeof bf<"u"?function(n){return bf.resolve(null).then(n).catch(Ny)}:Hu;function Ny(n){setTimeout(function(){throw n})}function Zu(n,o){var a=o,d=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(d===0){n.removeChild(g),Zs(o);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=g}while(a);Zs(o)}function Li(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function Uf(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(o===0)return n;o--}else a==="/$"&&o++}n=n.previousSibling}return null}var Br=Math.random().toString(36).slice(2),zn="__reactFiber$"+Br,oo="__reactProps$"+Br,Qn="__reactContainer$"+Br,$u="__reactEvents$"+Br,zy="__reactListeners$"+Br,Gy="__reactHandles$"+Br;function cr(n){var o=n[zn];if(o)return o;for(var a=n.parentNode;a;){if(o=a[Qn]||a[zn]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(n=Uf(n);n!==null;){if(a=n[zn])return a;n=Uf(n)}return o}n=a,a=n.parentNode}return null}function lo(n){return n=n[zn]||n[Qn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Yr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ml(n){return n[oo]||null}var qu=[],Vr=-1;function Pi(n){return{current:n}}function je(n){0>Vr||(n.current=qu[Vr],qu[Vr]=null,Vr--)}function Ue(n,o){Vr++,qu[Vr]=n.current,n.current=o}var ki={},vt=Pi(ki),Dt=Pi(!1),hr=ki;function Kr(n,o){var a=n.type.contextTypes;if(!a)return ki;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var g={},m;for(m in a)g[m]=o[m];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=g),g}function Ft(n){return n=n.childContextTypes,n!=null}function Dl(){je(Dt),je(vt)}function Wf(n,o,a){if(vt.current!==ki)throw Error(t(168));Ue(vt,o),Ue(Dt,a)}function Xf(n,o,a){var d=n.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var g in d)if(!(g in o))throw Error(t(108,_e(n)||"Unknown",g));return G({},a,d)}function Fl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ki,hr=vt.current,Ue(vt,n),Ue(Dt,Dt.current),!0}function jf(n,o,a){var d=n.stateNode;if(!d)throw Error(t(169));a?(n=Xf(n,o,hr),d.__reactInternalMemoizedMergedChildContext=n,je(Dt),je(vt),Ue(vt,n)):je(Dt),Ue(Dt,a)}var Jn=null,Ol=!1,Qu=!1;function Bf(n){Jn===null?Jn=[n]:Jn.push(n)}function by(n){Ol=!0,Bf(n)}function Ai(){if(!Qu&&Jn!==null){Qu=!0;var n=0,o=Ne;try{var a=Jn;for(Ne=1;n<a.length;n++){var d=a[n];do d=d(!0);while(d!==null)}Jn=null,Ol=!1}catch(g){throw Jn!==null&&(Jn=Jn.slice(n+1)),Yd(Eu,Ai),g}finally{Ne=o,Qu=!1}}return null}var Hr=[],Zr=0,Nl=null,zl=0,nn=[],rn=0,dr=null,ei=1,ti="";function fr(n,o){Hr[Zr++]=zl,Hr[Zr++]=Nl,Nl=n,zl=o}function Yf(n,o,a){nn[rn++]=ei,nn[rn++]=ti,nn[rn++]=dr,dr=n;var d=ei;n=ti;var g=32-vn(d)-1;d&=~(1<<g),a+=1;var m=32-vn(o)+g;if(30<m){var x=g-g%5;m=(d&(1<<x)-1).toString(32),d>>=x,g-=x,ei=1<<32-vn(o)+g|a<<g|d,ti=m+n}else ei=1<<m|a<<g|d,ti=n}function Ju(n){n.return!==null&&(fr(n,1),Yf(n,1,0))}function ec(n){for(;n===Nl;)Nl=Hr[--Zr],Hr[Zr]=null,zl=Hr[--Zr],Hr[Zr]=null;for(;n===dr;)dr=nn[--rn],nn[rn]=null,ti=nn[--rn],nn[rn]=null,ei=nn[--rn],nn[rn]=null}var Ht=null,Zt=null,Be=!1,xn=null;function Vf(n,o){var a=an(5,null,null,0);a.elementType="DELETED",a.stateNode=o,a.return=n,o=n.deletions,o===null?(n.deletions=[a],n.flags|=16):o.push(a)}function Kf(n,o){switch(n.tag){case 5:var a=n.type;return o=o.nodeType!==1||a.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,Ht=n,Zt=Li(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,Ht=n,Zt=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(a=dr!==null?{id:ei,overflow:ti}:null,n.memoizedState={dehydrated:o,treeContext:a,retryLane:1073741824},a=an(18,null,null,0),a.stateNode=o,a.return=n,n.child=a,Ht=n,Zt=null,!0):!1;default:return!1}}function tc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function nc(n){if(Be){var o=Zt;if(o){var a=o;if(!Kf(n,o)){if(tc(n))throw Error(t(418));o=Li(a.nextSibling);var d=Ht;o&&Kf(n,o)?Vf(d,a):(n.flags=n.flags&-4097|2,Be=!1,Ht=n)}}else{if(tc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Be=!1,Ht=n}}}function Hf(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ht=n}function Gl(n){if(n!==Ht)return!1;if(!Be)return Hf(n),Be=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!Ku(n.type,n.memoizedProps)),o&&(o=Zt)){if(tc(n))throw Zf(),Error(t(418));for(;o;)Vf(n,o),o=Li(o.nextSibling)}if(Hf(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(o===0){Zt=Li(n.nextSibling);break e}o--}else a!=="$"&&a!=="$!"&&a!=="$?"||o++}n=n.nextSibling}Zt=null}}else Zt=Ht?Li(n.stateNode.nextSibling):null;return!0}function Zf(){for(var n=Zt;n;)n=Li(n.nextSibling)}function $r(){Zt=Ht=null,Be=!1}function ic(n){xn===null?xn=[n]:xn.push(n)}var Uy=L.ReactCurrentBatchConfig;function ao(n,o,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,n));var g=d,m=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===m?o.ref:(o=function(x){var T=g.refs;x===null?delete T[m]:T[m]=x},o._stringRef=m,o)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function bl(n,o){throw n=Object.prototype.toString.call(o),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function $f(n){var o=n._init;return o(n._payload)}function qf(n){function o(D,k){if(n){var F=D.deletions;F===null?(D.deletions=[k],D.flags|=16):F.push(k)}}function a(D,k){if(!n)return null;for(;k!==null;)o(D,k),k=k.sibling;return null}function d(D,k){for(D=new Map;k!==null;)k.key!==null?D.set(k.key,k):D.set(k.index,k),k=k.sibling;return D}function g(D,k){return D=bi(D,k),D.index=0,D.sibling=null,D}function m(D,k,F){return D.index=F,n?(F=D.alternate,F!==null?(F=F.index,F<k?(D.flags|=2,k):F):(D.flags|=2,k)):(D.flags|=1048576,k)}function x(D){return n&&D.alternate===null&&(D.flags|=2),D}function T(D,k,F,J){return k===null||k.tag!==6?(k=Hc(F,D.mode,J),k.return=D,k):(k=g(k,F),k.return=D,k)}function P(D,k,F,J){var fe=F.type;return fe===V?H(D,k,F.props.children,J,F.key):k!==null&&(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===re&&$f(fe)===k.type)?(J=g(k,F.props),J.ref=ao(D,k,F),J.return=D,J):(J=ua(F.type,F.key,F.props,null,D.mode,J),J.ref=ao(D,k,F),J.return=D,J)}function O(D,k,F,J){return k===null||k.tag!==4||k.stateNode.containerInfo!==F.containerInfo||k.stateNode.implementation!==F.implementation?(k=Zc(F,D.mode,J),k.return=D,k):(k=g(k,F.children||[]),k.return=D,k)}function H(D,k,F,J,fe){return k===null||k.tag!==7?(k=xr(F,D.mode,J,fe),k.return=D,k):(k=g(k,F),k.return=D,k)}function $(D,k,F){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Hc(""+k,D.mode,F),k.return=D,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case A:return F=ua(k.type,k.key,k.props,null,D.mode,F),F.ref=ao(D,null,k),F.return=D,F;case W:return k=Zc(k,D.mode,F),k.return=D,k;case re:var J=k._init;return $(D,J(k._payload),F)}if(Jt(k)||Q(k))return k=xr(k,D.mode,F,null),k.return=D,k;bl(D,k)}return null}function K(D,k,F,J){var fe=k!==null?k.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return fe!==null?null:T(D,k,""+F,J);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===fe?P(D,k,F,J):null;case W:return F.key===fe?O(D,k,F,J):null;case re:return fe=F._init,K(D,k,fe(F._payload),J)}if(Jt(F)||Q(F))return fe!==null?null:H(D,k,F,J,null);bl(D,F)}return null}function oe(D,k,F,J,fe){if(typeof J=="string"&&J!==""||typeof J=="number")return D=D.get(F)||null,T(k,D,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case A:return D=D.get(J.key===null?F:J.key)||null,P(k,D,J,fe);case W:return D=D.get(J.key===null?F:J.key)||null,O(k,D,J,fe);case re:var pe=J._init;return oe(D,k,F,pe(J._payload),fe)}if(Jt(J)||Q(J))return D=D.get(F)||null,H(k,D,J,fe,null);bl(k,J)}return null}function ue(D,k,F,J){for(var fe=null,pe=null,me=k,ye=k=0,at=null;me!==null&&ye<F.length;ye++){me.index>ye?(at=me,me=null):at=me.sibling;var Ae=K(D,me,F[ye],J);if(Ae===null){me===null&&(me=at);break}n&&me&&Ae.alternate===null&&o(D,me),k=m(Ae,k,ye),pe===null?fe=Ae:pe.sibling=Ae,pe=Ae,me=at}if(ye===F.length)return a(D,me),Be&&fr(D,ye),fe;if(me===null){for(;ye<F.length;ye++)me=$(D,F[ye],J),me!==null&&(k=m(me,k,ye),pe===null?fe=me:pe.sibling=me,pe=me);return Be&&fr(D,ye),fe}for(me=d(D,me);ye<F.length;ye++)at=oe(me,D,ye,F[ye],J),at!==null&&(n&&at.alternate!==null&&me.delete(at.key===null?ye:at.key),k=m(at,k,ye),pe===null?fe=at:pe.sibling=at,pe=at);return n&&me.forEach(function(Ui){return o(D,Ui)}),Be&&fr(D,ye),fe}function he(D,k,F,J){var fe=Q(F);if(typeof fe!="function")throw Error(t(150));if(F=fe.call(F),F==null)throw Error(t(151));for(var pe=fe=null,me=k,ye=k=0,at=null,Ae=F.next();me!==null&&!Ae.done;ye++,Ae=F.next()){me.index>ye?(at=me,me=null):at=me.sibling;var Ui=K(D,me,Ae.value,J);if(Ui===null){me===null&&(me=at);break}n&&me&&Ui.alternate===null&&o(D,me),k=m(Ui,k,ye),pe===null?fe=Ui:pe.sibling=Ui,pe=Ui,me=at}if(Ae.done)return a(D,me),Be&&fr(D,ye),fe;if(me===null){for(;!Ae.done;ye++,Ae=F.next())Ae=$(D,Ae.value,J),Ae!==null&&(k=m(Ae,k,ye),pe===null?fe=Ae:pe.sibling=Ae,pe=Ae);return Be&&fr(D,ye),fe}for(me=d(D,me);!Ae.done;ye++,Ae=F.next())Ae=oe(me,D,ye,Ae.value,J),Ae!==null&&(n&&Ae.alternate!==null&&me.delete(Ae.key===null?ye:Ae.key),k=m(Ae,k,ye),pe===null?fe=Ae:pe.sibling=Ae,pe=Ae);return n&&me.forEach(function(y1){return o(D,y1)}),Be&&fr(D,ye),fe}function Je(D,k,F,J){if(typeof F=="object"&&F!==null&&F.type===V&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:e:{for(var fe=F.key,pe=k;pe!==null;){if(pe.key===fe){if(fe=F.type,fe===V){if(pe.tag===7){a(D,pe.sibling),k=g(pe,F.props.children),k.return=D,D=k;break e}}else if(pe.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===re&&$f(fe)===pe.type){a(D,pe.sibling),k=g(pe,F.props),k.ref=ao(D,pe,F),k.return=D,D=k;break e}a(D,pe);break}else o(D,pe);pe=pe.sibling}F.type===V?(k=xr(F.props.children,D.mode,J,F.key),k.return=D,D=k):(J=ua(F.type,F.key,F.props,null,D.mode,J),J.ref=ao(D,k,F),J.return=D,D=J)}return x(D);case W:e:{for(pe=F.key;k!==null;){if(k.key===pe)if(k.tag===4&&k.stateNode.containerInfo===F.containerInfo&&k.stateNode.implementation===F.implementation){a(D,k.sibling),k=g(k,F.children||[]),k.return=D,D=k;break e}else{a(D,k);break}else o(D,k);k=k.sibling}k=Zc(F,D.mode,J),k.return=D,D=k}return x(D);case re:return pe=F._init,Je(D,k,pe(F._payload),J)}if(Jt(F))return ue(D,k,F,J);if(Q(F))return he(D,k,F,J);bl(D,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,k!==null&&k.tag===6?(a(D,k.sibling),k=g(k,F),k.return=D,D=k):(a(D,k),k=Hc(F,D.mode,J),k.return=D,D=k),x(D)):a(D,k)}return Je}var qr=qf(!0),Qf=qf(!1),Ul=Pi(null),Wl=null,Qr=null,rc=null;function sc(){rc=Qr=Wl=null}function oc(n){var o=Ul.current;je(Ul),n._currentValue=o}function lc(n,o,a){for(;n!==null;){var d=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),n===a)break;n=n.return}}function Jr(n,o){Wl=n,rc=Qr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&o&&(Ot=!0),n.firstContext=null)}function sn(n){var o=n._currentValue;if(rc!==n)if(n={context:n,memoizedValue:o,next:null},Qr===null){if(Wl===null)throw Error(t(308));Qr=n,Wl.dependencies={lanes:0,firstContext:n}}else Qr=Qr.next=n;return o}var gr=null;function ac(n){gr===null?gr=[n]:gr.push(n)}function Jf(n,o,a,d){var g=o.interleaved;return g===null?(a.next=a,ac(o)):(a.next=g.next,g.next=a),o.interleaved=a,ni(n,d)}function ni(n,o){n.lanes|=o;var a=n.alternate;for(a!==null&&(a.lanes|=o),a=n,n=n.return;n!==null;)n.childLanes|=o,a=n.alternate,a!==null&&(a.childLanes|=o),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Mi=!1;function uc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eg(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ii(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function Di(n,o,a){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,Le&2){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,ni(n,a)}return g=d.interleaved,g===null?(o.next=o,ac(d)):(o.next=g.next,g.next=o),d.interleaved=o,ni(n,a)}function Xl(n,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194240)!==0)){var d=o.lanes;d&=n.pendingLanes,a|=d,o.lanes=a,Su(n,a)}}function tg(n,o){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var g=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?g=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?g=m=o:m=m.next=o}else g=m=o;a={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:d.shared,effects:d.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=o:n.next=o,a.lastBaseUpdate=o}function jl(n,o,a,d){var g=n.updateQueue;Mi=!1;var m=g.firstBaseUpdate,x=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var P=T,O=P.next;P.next=null,x===null?m=O:x.next=O,x=P;var H=n.alternate;H!==null&&(H=H.updateQueue,T=H.lastBaseUpdate,T!==x&&(T===null?H.firstBaseUpdate=O:T.next=O,H.lastBaseUpdate=P))}if(m!==null){var $=g.baseState;x=0,H=O=P=null,T=m;do{var K=T.lane,oe=T.eventTime;if((d&K)===K){H!==null&&(H=H.next={eventTime:oe,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ue=n,he=T;switch(K=o,oe=a,he.tag){case 1:if(ue=he.payload,typeof ue=="function"){$=ue.call(oe,$,K);break e}$=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=he.payload,K=typeof ue=="function"?ue.call(oe,$,K):ue,K==null)break e;$=G({},$,K);break e;case 2:Mi=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,K=g.effects,K===null?g.effects=[T]:K.push(T))}else oe={eventTime:oe,lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},H===null?(O=H=oe,P=$):H=H.next=oe,x|=K;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;K=T,T=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);if(H===null&&(P=$),g.baseState=P,g.firstBaseUpdate=O,g.lastBaseUpdate=H,o=g.shared.interleaved,o!==null){g=o;do x|=g.lane,g=g.next;while(g!==o)}else m===null&&(g.shared.lanes=0);_r|=x,n.lanes=x,n.memoizedState=$}}function ng(n,o,a){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var d=n[o],g=d.callback;if(g!==null){if(d.callback=null,d=a,typeof g!="function")throw Error(t(191,g));g.call(d)}}}var uo={},Gn=Pi(uo),co=Pi(uo),ho=Pi(uo);function pr(n){if(n===uo)throw Error(t(174));return n}function cc(n,o){switch(Ue(ho,o),Ue(co,n),Ue(Gn,uo),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:sr(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=sr(o,n)}je(Gn),Ue(Gn,o)}function es(){je(Gn),je(co),je(ho)}function ig(n){pr(ho.current);var o=pr(Gn.current),a=sr(o,n.type);o!==a&&(Ue(co,n),Ue(Gn,a))}function hc(n){co.current===n&&(je(Gn),je(co))}var Ye=Pi(0);function Bl(n){for(var o=n;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var dc=[];function fc(){for(var n=0;n<dc.length;n++)dc[n]._workInProgressVersionPrimary=null;dc.length=0}var Yl=L.ReactCurrentDispatcher,gc=L.ReactCurrentBatchConfig,mr=0,Ve=null,it=null,ot=null,Vl=!1,fo=!1,go=0,Wy=0;function Et(){throw Error(t(321))}function pc(n,o){if(o===null)return!1;for(var a=0;a<o.length&&a<n.length;a++)if(!En(n[a],o[a]))return!1;return!0}function mc(n,o,a,d,g,m){if(mr=m,Ve=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Yl.current=n===null||n.memoizedState===null?Yy:Vy,n=a(d,g),fo){m=0;do{if(fo=!1,go=0,25<=m)throw Error(t(301));m+=1,ot=it=null,o.updateQueue=null,Yl.current=Ky,n=a(d,g)}while(fo)}if(Yl.current=Zl,o=it!==null&&it.next!==null,mr=0,ot=it=Ve=null,Vl=!1,o)throw Error(t(300));return n}function _c(){var n=go!==0;return go=0,n}function bn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ve.memoizedState=ot=n:ot=ot.next=n,ot}function on(){if(it===null){var n=Ve.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var o=ot===null?Ve.memoizedState:ot.next;if(o!==null)ot=o,it=n;else{if(n===null)throw Error(t(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ot===null?Ve.memoizedState=ot=n:ot=ot.next=n}return ot}function po(n,o){return typeof o=="function"?o(n):o}function yc(n){var o=on(),a=o.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=it,g=d.baseQueue,m=a.pending;if(m!==null){if(g!==null){var x=g.next;g.next=m.next,m.next=x}d.baseQueue=g=m,a.pending=null}if(g!==null){m=g.next,d=d.baseState;var T=x=null,P=null,O=m;do{var H=O.lane;if((mr&H)===H)P!==null&&(P=P.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),d=O.hasEagerState?O.eagerState:n(d,O.action);else{var $={lane:H,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};P===null?(T=P=$,x=d):P=P.next=$,Ve.lanes|=H,_r|=H}O=O.next}while(O!==null&&O!==m);P===null?x=d:P.next=T,En(d,o.memoizedState)||(Ot=!0),o.memoizedState=d,o.baseState=x,o.baseQueue=P,a.lastRenderedState=d}if(n=a.interleaved,n!==null){g=n;do m=g.lane,Ve.lanes|=m,_r|=m,g=g.next;while(g!==n)}else g===null&&(a.lanes=0);return[o.memoizedState,a.dispatch]}function vc(n){var o=on(),a=o.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=a.dispatch,g=a.pending,m=o.memoizedState;if(g!==null){a.pending=null;var x=g=g.next;do m=n(m,x.action),x=x.next;while(x!==g);En(m,o.memoizedState)||(Ot=!0),o.memoizedState=m,o.baseQueue===null&&(o.baseState=m),a.lastRenderedState=m}return[m,d]}function rg(){}function sg(n,o){var a=Ve,d=on(),g=o(),m=!En(d.memoizedState,g);if(m&&(d.memoizedState=g,Ot=!0),d=d.queue,Ec(ag.bind(null,a,d,n),[n]),d.getSnapshot!==o||m||ot!==null&&ot.memoizedState.tag&1){if(a.flags|=2048,mo(9,lg.bind(null,a,d,g,o),void 0,null),lt===null)throw Error(t(349));mr&30||og(a,o,g)}return g}function og(n,o,a){n.flags|=16384,n={getSnapshot:o,value:a},o=Ve.updateQueue,o===null?(o={lastEffect:null,stores:null},Ve.updateQueue=o,o.stores=[n]):(a=o.stores,a===null?o.stores=[n]:a.push(n))}function lg(n,o,a,d){o.value=a,o.getSnapshot=d,ug(o)&&cg(n)}function ag(n,o,a){return a(function(){ug(o)&&cg(n)})}function ug(n){var o=n.getSnapshot;n=n.value;try{var a=o();return!En(n,a)}catch{return!0}}function cg(n){var o=ni(n,1);o!==null&&Rn(o,n,1,-1)}function hg(n){var o=bn();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:n},o.queue=n,n=n.dispatch=By.bind(null,Ve,n),[o.memoizedState,n]}function mo(n,o,a,d){return n={tag:n,create:o,destroy:a,deps:d,next:null},o=Ve.updateQueue,o===null?(o={lastEffect:null,stores:null},Ve.updateQueue=o,o.lastEffect=n.next=n):(a=o.lastEffect,a===null?o.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,o.lastEffect=n)),n}function dg(){return on().memoizedState}function Kl(n,o,a,d){var g=bn();Ve.flags|=n,g.memoizedState=mo(1|o,a,void 0,d===void 0?null:d)}function Hl(n,o,a,d){var g=on();d=d===void 0?null:d;var m=void 0;if(it!==null){var x=it.memoizedState;if(m=x.destroy,d!==null&&pc(d,x.deps)){g.memoizedState=mo(o,a,m,d);return}}Ve.flags|=n,g.memoizedState=mo(1|o,a,m,d)}function fg(n,o){return Kl(8390656,8,n,o)}function Ec(n,o){return Hl(2048,8,n,o)}function gg(n,o){return Hl(4,2,n,o)}function pg(n,o){return Hl(4,4,n,o)}function mg(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function _g(n,o,a){return a=a!=null?a.concat([n]):null,Hl(4,4,mg.bind(null,o,n),a)}function xc(){}function yg(n,o){var a=on();o=o===void 0?null:o;var d=a.memoizedState;return d!==null&&o!==null&&pc(o,d[1])?d[0]:(a.memoizedState=[n,o],n)}function vg(n,o){var a=on();o=o===void 0?null:o;var d=a.memoizedState;return d!==null&&o!==null&&pc(o,d[1])?d[0]:(n=n(),a.memoizedState=[n,o],n)}function Eg(n,o,a){return mr&21?(En(a,o)||(a=Zd(),Ve.lanes|=a,_r|=a,n.baseState=!0),o):(n.baseState&&(n.baseState=!1,Ot=!0),n.memoizedState=a)}function Xy(n,o){var a=Ne;Ne=a!==0&&4>a?a:4,n(!0);var d=gc.transition;gc.transition={};try{n(!1),o()}finally{Ne=a,gc.transition=d}}function xg(){return on().memoizedState}function jy(n,o,a){var d=zi(n);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},wg(n))Sg(o,a);else if(a=Jf(n,o,a,d),a!==null){var g=kt();Rn(a,n,d,g),Cg(a,o,d)}}function By(n,o,a){var d=zi(n),g={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(wg(n))Sg(o,g);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=o.lastRenderedReducer,m!==null))try{var x=o.lastRenderedState,T=m(x,a);if(g.hasEagerState=!0,g.eagerState=T,En(T,x)){var P=o.interleaved;P===null?(g.next=g,ac(o)):(g.next=P.next,P.next=g),o.interleaved=g;return}}catch{}finally{}a=Jf(n,o,g,d),a!==null&&(g=kt(),Rn(a,n,d,g),Cg(a,o,d))}}function wg(n){var o=n.alternate;return n===Ve||o!==null&&o===Ve}function Sg(n,o){fo=Vl=!0;var a=n.pending;a===null?o.next=o:(o.next=a.next,a.next=o),n.pending=o}function Cg(n,o,a){if(a&4194240){var d=o.lanes;d&=n.pendingLanes,a|=d,o.lanes=a,Su(n,a)}}var Zl={readContext:sn,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},Yy={readContext:sn,useCallback:function(n,o){return bn().memoizedState=[n,o===void 0?null:o],n},useContext:sn,useEffect:fg,useImperativeHandle:function(n,o,a){return a=a!=null?a.concat([n]):null,Kl(4194308,4,mg.bind(null,o,n),a)},useLayoutEffect:function(n,o){return Kl(4194308,4,n,o)},useInsertionEffect:function(n,o){return Kl(4,2,n,o)},useMemo:function(n,o){var a=bn();return o=o===void 0?null:o,n=n(),a.memoizedState=[n,o],n},useReducer:function(n,o,a){var d=bn();return o=a!==void 0?a(o):o,d.memoizedState=d.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},d.queue=n,n=n.dispatch=jy.bind(null,Ve,n),[d.memoizedState,n]},useRef:function(n){var o=bn();return n={current:n},o.memoizedState=n},useState:hg,useDebugValue:xc,useDeferredValue:function(n){return bn().memoizedState=n},useTransition:function(){var n=hg(!1),o=n[0];return n=Xy.bind(null,n[1]),bn().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,a){var d=Ve,g=bn();if(Be){if(a===void 0)throw Error(t(407));a=a()}else{if(a=o(),lt===null)throw Error(t(349));mr&30||og(d,o,a)}g.memoizedState=a;var m={value:a,getSnapshot:o};return g.queue=m,fg(ag.bind(null,d,m,n),[n]),d.flags|=2048,mo(9,lg.bind(null,d,m,a,o),void 0,null),a},useId:function(){var n=bn(),o=lt.identifierPrefix;if(Be){var a=ti,d=ei;a=(d&~(1<<32-vn(d)-1)).toString(32)+a,o=":"+o+"R"+a,a=go++,0<a&&(o+="H"+a.toString(32)),o+=":"}else a=Wy++,o=":"+o+"r"+a.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},Vy={readContext:sn,useCallback:yg,useContext:sn,useEffect:Ec,useImperativeHandle:_g,useInsertionEffect:gg,useLayoutEffect:pg,useMemo:vg,useReducer:yc,useRef:dg,useState:function(){return yc(po)},useDebugValue:xc,useDeferredValue:function(n){var o=on();return Eg(o,it.memoizedState,n)},useTransition:function(){var n=yc(po)[0],o=on().memoizedState;return[n,o]},useMutableSource:rg,useSyncExternalStore:sg,useId:xg,unstable_isNewReconciler:!1},Ky={readContext:sn,useCallback:yg,useContext:sn,useEffect:Ec,useImperativeHandle:_g,useInsertionEffect:gg,useLayoutEffect:pg,useMemo:vg,useReducer:vc,useRef:dg,useState:function(){return vc(po)},useDebugValue:xc,useDeferredValue:function(n){var o=on();return it===null?o.memoizedState=n:Eg(o,it.memoizedState,n)},useTransition:function(){var n=vc(po)[0],o=on().memoizedState;return[n,o]},useMutableSource:rg,useSyncExternalStore:sg,useId:xg,unstable_isNewReconciler:!1};function wn(n,o){if(n&&n.defaultProps){o=G({},o),n=n.defaultProps;for(var a in n)o[a]===void 0&&(o[a]=n[a]);return o}return o}function wc(n,o,a,d){o=n.memoizedState,a=a(d,o),a=a==null?o:G({},o,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var $l={isMounted:function(n){return(n=n._reactInternals)?ur(n)===n:!1},enqueueSetState:function(n,o,a){n=n._reactInternals;var d=kt(),g=zi(n),m=ii(d,g);m.payload=o,a!=null&&(m.callback=a),o=Di(n,m,g),o!==null&&(Rn(o,n,g,d),Xl(o,n,g))},enqueueReplaceState:function(n,o,a){n=n._reactInternals;var d=kt(),g=zi(n),m=ii(d,g);m.tag=1,m.payload=o,a!=null&&(m.callback=a),o=Di(n,m,g),o!==null&&(Rn(o,n,g,d),Xl(o,n,g))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var a=kt(),d=zi(n),g=ii(a,d);g.tag=2,o!=null&&(g.callback=o),o=Di(n,g,d),o!==null&&(Rn(o,n,d,a),Xl(o,n,d))}};function Rg(n,o,a,d,g,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,m,x):o.prototype&&o.prototype.isPureReactComponent?!to(a,d)||!to(g,m):!0}function Tg(n,o,a){var d=!1,g=ki,m=o.contextType;return typeof m=="object"&&m!==null?m=sn(m):(g=Ft(o)?hr:vt.current,d=o.contextTypes,m=(d=d!=null)?Kr(n,g):ki),o=new o(a,m),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=$l,n.stateNode=o,o._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=m),o}function Ig(n,o,a,d){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,d),o.state!==n&&$l.enqueueReplaceState(o,o.state,null)}function Sc(n,o,a,d){var g=n.stateNode;g.props=a,g.state=n.memoizedState,g.refs={},uc(n);var m=o.contextType;typeof m=="object"&&m!==null?g.context=sn(m):(m=Ft(o)?hr:vt.current,g.context=Kr(n,m)),g.state=n.memoizedState,m=o.getDerivedStateFromProps,typeof m=="function"&&(wc(n,o,m,a),g.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&$l.enqueueReplaceState(g,g.state,null),jl(n,a,g,d),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function ts(n,o){try{var a="",d=o;do a+=ce(d),d=d.return;while(d);var g=a}catch(m){g=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:o,stack:g,digest:null}}function Cc(n,o,a){return{value:n,source:null,stack:a??null,digest:o??null}}function Rc(n,o){try{console.error(o.value)}catch(a){setTimeout(function(){throw a})}}var Hy=typeof WeakMap=="function"?WeakMap:Map;function Lg(n,o,a){a=ii(-1,a),a.tag=3,a.payload={element:null};var d=o.value;return a.callback=function(){ia||(ia=!0,Uc=d),Rc(n,o)},a}function Pg(n,o,a){a=ii(-1,a),a.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;a.payload=function(){return d(g)},a.callback=function(){Rc(n,o)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Rc(n,o),typeof d!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var x=o.stack;this.componentDidCatch(o.value,{componentStack:x!==null?x:""})}),a}function kg(n,o,a){var d=n.pingCache;if(d===null){d=n.pingCache=new Hy;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(a)||(g.add(a),n=a1.bind(null,n,o,a),o.then(n,n))}function Ag(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function Mg(n,o,a,d,g){return n.mode&1?(n.flags|=65536,n.lanes=g,n):(n===o?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(o=ii(-1,1),o.tag=2,Di(a,o,1))),a.lanes|=1),n)}var Zy=L.ReactCurrentOwner,Ot=!1;function Pt(n,o,a,d){o.child=n===null?Qf(o,null,a,d):qr(o,n.child,a,d)}function Dg(n,o,a,d,g){a=a.render;var m=o.ref;return Jr(o,g),d=mc(n,o,a,d,m,g),a=_c(),n!==null&&!Ot?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,ri(n,o,g)):(Be&&a&&Ju(o),o.flags|=1,Pt(n,o,d,g),o.child)}function Fg(n,o,a,d,g){if(n===null){var m=a.type;return typeof m=="function"&&!Kc(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(o.tag=15,o.type=m,Og(n,o,m,d,g)):(n=ua(a.type,null,d,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(m=n.child,!(n.lanes&g)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:to,a(x,d)&&n.ref===o.ref)return ri(n,o,g)}return o.flags|=1,n=bi(m,d),n.ref=o.ref,n.return=o,o.child=n}function Og(n,o,a,d,g){if(n!==null){var m=n.memoizedProps;if(to(m,d)&&n.ref===o.ref)if(Ot=!1,o.pendingProps=d=m,(n.lanes&g)!==0)n.flags&131072&&(Ot=!0);else return o.lanes=n.lanes,ri(n,o,g)}return Tc(n,o,a,d,g)}function Ng(n,o,a){var d=o.pendingProps,g=d.children,m=n!==null?n.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(is,$t),$t|=a;else{if(!(a&1073741824))return n=m!==null?m.baseLanes|a:a,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,Ue(is,$t),$t|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=m!==null?m.baseLanes:a,Ue(is,$t),$t|=d}else m!==null?(d=m.baseLanes|a,o.memoizedState=null):d=a,Ue(is,$t),$t|=d;return Pt(n,o,g,a),o.child}function zg(n,o){var a=o.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(o.flags|=512,o.flags|=2097152)}function Tc(n,o,a,d,g){var m=Ft(a)?hr:vt.current;return m=Kr(o,m),Jr(o,g),a=mc(n,o,a,d,m,g),d=_c(),n!==null&&!Ot?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,ri(n,o,g)):(Be&&d&&Ju(o),o.flags|=1,Pt(n,o,a,g),o.child)}function Gg(n,o,a,d,g){if(Ft(a)){var m=!0;Fl(o)}else m=!1;if(Jr(o,g),o.stateNode===null)Ql(n,o),Tg(o,a,d),Sc(o,a,d,g),d=!0;else if(n===null){var x=o.stateNode,T=o.memoizedProps;x.props=T;var P=x.context,O=a.contextType;typeof O=="object"&&O!==null?O=sn(O):(O=Ft(a)?hr:vt.current,O=Kr(o,O));var H=a.getDerivedStateFromProps,$=typeof H=="function"||typeof x.getSnapshotBeforeUpdate=="function";$||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==d||P!==O)&&Ig(o,x,d,O),Mi=!1;var K=o.memoizedState;x.state=K,jl(o,d,x,g),P=o.memoizedState,T!==d||K!==P||Dt.current||Mi?(typeof H=="function"&&(wc(o,a,H,d),P=o.memoizedState),(T=Mi||Rg(o,a,T,d,K,P,O))?($||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=P),x.props=d,x.state=P,x.context=O,d=T):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{x=o.stateNode,eg(n,o),T=o.memoizedProps,O=o.type===o.elementType?T:wn(o.type,T),x.props=O,$=o.pendingProps,K=x.context,P=a.contextType,typeof P=="object"&&P!==null?P=sn(P):(P=Ft(a)?hr:vt.current,P=Kr(o,P));var oe=a.getDerivedStateFromProps;(H=typeof oe=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==$||K!==P)&&Ig(o,x,d,P),Mi=!1,K=o.memoizedState,x.state=K,jl(o,d,x,g);var ue=o.memoizedState;T!==$||K!==ue||Dt.current||Mi?(typeof oe=="function"&&(wc(o,a,oe,d),ue=o.memoizedState),(O=Mi||Rg(o,a,O,d,K,ue,P)||!1)?(H||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,ue,P),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,ue,P)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===n.memoizedProps&&K===n.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&K===n.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ue),x.props=d,x.state=ue,x.context=P,d=O):(typeof x.componentDidUpdate!="function"||T===n.memoizedProps&&K===n.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&K===n.memoizedState||(o.flags|=1024),d=!1)}return Ic(n,o,a,d,m,g)}function Ic(n,o,a,d,g,m){zg(n,o);var x=(o.flags&128)!==0;if(!d&&!x)return g&&jf(o,a,!1),ri(n,o,m);d=o.stateNode,Zy.current=o;var T=x&&typeof a.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,n!==null&&x?(o.child=qr(o,n.child,null,m),o.child=qr(o,null,T,m)):Pt(n,o,T,m),o.memoizedState=d.state,g&&jf(o,a,!0),o.child}function bg(n){var o=n.stateNode;o.pendingContext?Wf(n,o.pendingContext,o.pendingContext!==o.context):o.context&&Wf(n,o.context,!1),cc(n,o.containerInfo)}function Ug(n,o,a,d,g){return $r(),ic(g),o.flags|=256,Pt(n,o,a,d),o.child}var Lc={dehydrated:null,treeContext:null,retryLane:0};function Pc(n){return{baseLanes:n,cachePool:null,transitions:null}}function Wg(n,o,a){var d=o.pendingProps,g=Ye.current,m=!1,x=(o.flags&128)!==0,T;if((T=x)||(T=n!==null&&n.memoizedState===null?!1:(g&2)!==0),T?(m=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Ue(Ye,g&1),n===null)return nc(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(o.mode&1?n.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(x=d.children,n=d.fallback,m?(d=o.mode,m=o.child,x={mode:"hidden",children:x},!(d&1)&&m!==null?(m.childLanes=0,m.pendingProps=x):m=ca(x,d,0,null),n=xr(n,d,a,null),m.return=o,n.return=o,m.sibling=n,o.child=m,o.child.memoizedState=Pc(a),o.memoizedState=Lc,n):kc(o,x));if(g=n.memoizedState,g!==null&&(T=g.dehydrated,T!==null))return $y(n,o,x,d,T,g,a);if(m){m=d.fallback,x=o.mode,g=n.child,T=g.sibling;var P={mode:"hidden",children:d.children};return!(x&1)&&o.child!==g?(d=o.child,d.childLanes=0,d.pendingProps=P,o.deletions=null):(d=bi(g,P),d.subtreeFlags=g.subtreeFlags&14680064),T!==null?m=bi(T,m):(m=xr(m,x,a,null),m.flags|=2),m.return=o,d.return=o,d.sibling=m,o.child=d,d=m,m=o.child,x=n.child.memoizedState,x=x===null?Pc(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},m.memoizedState=x,m.childLanes=n.childLanes&~a,o.memoizedState=Lc,d}return m=n.child,n=m.sibling,d=bi(m,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=a),d.return=o,d.sibling=null,n!==null&&(a=o.deletions,a===null?(o.deletions=[n],o.flags|=16):a.push(n)),o.child=d,o.memoizedState=null,d}function kc(n,o){return o=ca({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function ql(n,o,a,d){return d!==null&&ic(d),qr(o,n.child,null,a),n=kc(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function $y(n,o,a,d,g,m,x){if(a)return o.flags&256?(o.flags&=-257,d=Cc(Error(t(422))),ql(n,o,x,d)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(m=d.fallback,g=o.mode,d=ca({mode:"visible",children:d.children},g,0,null),m=xr(m,g,x,null),m.flags|=2,d.return=o,m.return=o,d.sibling=m,o.child=d,o.mode&1&&qr(o,n.child,null,x),o.child.memoizedState=Pc(x),o.memoizedState=Lc,m);if(!(o.mode&1))return ql(n,o,x,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var T=d.dgst;return d=T,m=Error(t(419)),d=Cc(m,d,void 0),ql(n,o,x,d)}if(T=(x&n.childLanes)!==0,Ot||T){if(d=lt,d!==null){switch(x&-x){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(d.suspendedLanes|x)?0:g,g!==0&&g!==m.retryLane&&(m.retryLane=g,ni(n,g),Rn(d,n,g,-1))}return Vc(),d=Cc(Error(t(421))),ql(n,o,x,d)}return g.data==="$?"?(o.flags|=128,o.child=n.child,o=u1.bind(null,n),g._reactRetry=o,null):(n=m.treeContext,Zt=Li(g.nextSibling),Ht=o,Be=!0,xn=null,n!==null&&(nn[rn++]=ei,nn[rn++]=ti,nn[rn++]=dr,ei=n.id,ti=n.overflow,dr=o),o=kc(o,d.children),o.flags|=4096,o)}function Xg(n,o,a){n.lanes|=o;var d=n.alternate;d!==null&&(d.lanes|=o),lc(n.return,o,a)}function Ac(n,o,a,d,g){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:g}:(m.isBackwards=o,m.rendering=null,m.renderingStartTime=0,m.last=d,m.tail=a,m.tailMode=g)}function jg(n,o,a){var d=o.pendingProps,g=d.revealOrder,m=d.tail;if(Pt(n,o,d.children,a),d=Ye.current,d&2)d=d&1|2,o.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xg(n,a,o);else if(n.tag===19)Xg(n,a,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Ue(Ye,d),!(o.mode&1))o.memoizedState=null;else switch(g){case"forwards":for(a=o.child,g=null;a!==null;)n=a.alternate,n!==null&&Bl(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=o.child,o.child=null):(g=a.sibling,a.sibling=null),Ac(o,!1,g,a,m);break;case"backwards":for(a=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&Bl(n)===null){o.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}Ac(o,!0,a,null,m);break;case"together":Ac(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ql(n,o){!(o.mode&1)&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function ri(n,o,a){if(n!==null&&(o.dependencies=n.dependencies),_r|=o.lanes,!(a&o.childLanes))return null;if(n!==null&&o.child!==n.child)throw Error(t(153));if(o.child!==null){for(n=o.child,a=bi(n,n.pendingProps),o.child=a,a.return=o;n.sibling!==null;)n=n.sibling,a=a.sibling=bi(n,n.pendingProps),a.return=o;a.sibling=null}return o.child}function qy(n,o,a){switch(o.tag){case 3:bg(o),$r();break;case 5:ig(o);break;case 1:Ft(o.type)&&Fl(o);break;case 4:cc(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,g=o.memoizedProps.value;Ue(Ul,d._currentValue),d._currentValue=g;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Ue(Ye,Ye.current&1),o.flags|=128,null):a&o.child.childLanes?Wg(n,o,a):(Ue(Ye,Ye.current&1),n=ri(n,o,a),n!==null?n.sibling:null);Ue(Ye,Ye.current&1);break;case 19:if(d=(a&o.childLanes)!==0,n.flags&128){if(d)return jg(n,o,a);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ue(Ye,Ye.current),d)break;return null;case 22:case 23:return o.lanes=0,Ng(n,o,a)}return ri(n,o,a)}var Bg,Mc,Yg,Vg;Bg=function(n,o){for(var a=o.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Mc=function(){},Yg=function(n,o,a,d){var g=n.memoizedProps;if(g!==d){n=o.stateNode,pr(Gn.current);var m=null;switch(a){case"input":g=Hn(n,g),d=Hn(n,d),m=[];break;case"select":g=G({},g,{value:void 0}),d=G({},d,{value:void 0}),m=[];break;case"textarea":g=mn(n,g),d=mn(n,d),m=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=Al)}Or(a,d);var x;a=null;for(O in g)if(!d.hasOwnProperty(O)&&g.hasOwnProperty(O)&&g[O]!=null)if(O==="style"){var T=g[O];for(x in T)T.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(s.hasOwnProperty(O)?m||(m=[]):(m=m||[]).push(O,null));for(O in d){var P=d[O];if(T=g!=null?g[O]:void 0,d.hasOwnProperty(O)&&P!==T&&(P!=null||T!=null))if(O==="style")if(T){for(x in T)!T.hasOwnProperty(x)||P&&P.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in P)P.hasOwnProperty(x)&&T[x]!==P[x]&&(a||(a={}),a[x]=P[x])}else a||(m||(m=[]),m.push(O,a)),a=P;else O==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,T=T?T.__html:void 0,P!=null&&T!==P&&(m=m||[]).push(O,P)):O==="children"?typeof P!="string"&&typeof P!="number"||(m=m||[]).push(O,""+P):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(s.hasOwnProperty(O)?(P!=null&&O==="onScroll"&&Xe("scroll",n),m||T===P||(m=[])):(m=m||[]).push(O,P))}a&&(m=m||[]).push("style",a);var O=m;(o.updateQueue=O)&&(o.flags|=4)}},Vg=function(n,o,a,d){a!==d&&(o.flags|=4)};function _o(n,o){if(!Be)switch(n.tailMode){case"hidden":o=n.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function xt(n){var o=n.alternate!==null&&n.alternate.child===n.child,a=0,d=0;if(o)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=d,n.childLanes=a,o}function Qy(n,o,a){var d=o.pendingProps;switch(ec(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(o),null;case 1:return Ft(o.type)&&Dl(),xt(o),null;case 3:return d=o.stateNode,es(),je(Dt),je(vt),fc(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(Gl(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,xn!==null&&(jc(xn),xn=null))),Mc(n,o),xt(o),null;case 5:hc(o);var g=pr(ho.current);if(a=o.type,n!==null&&o.stateNode!=null)Yg(n,o,a,d,g),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return xt(o),null}if(n=pr(Gn.current),Gl(o)){d=o.stateNode,a=o.type;var m=o.memoizedProps;switch(d[zn]=o,d[oo]=m,n=(o.mode&1)!==0,a){case"dialog":Xe("cancel",d),Xe("close",d);break;case"iframe":case"object":case"embed":Xe("load",d);break;case"video":case"audio":for(g=0;g<io.length;g++)Xe(io[g],d);break;case"source":Xe("error",d);break;case"img":case"image":case"link":Xe("error",d),Xe("load",d);break;case"details":Xe("toggle",d);break;case"input":Dn(d,m),Xe("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!m.multiple},Xe("invalid",d);break;case"textarea":Zn(d,m),Xe("invalid",d)}Or(a,m),g=null;for(var x in m)if(m.hasOwnProperty(x)){var T=m[x];x==="children"?typeof T=="string"?d.textContent!==T&&(m.suppressHydrationWarning!==!0&&kl(d.textContent,T,n),g=["children",T]):typeof T=="number"&&d.textContent!==""+T&&(m.suppressHydrationWarning!==!0&&kl(d.textContent,T,n),g=["children",""+T]):s.hasOwnProperty(x)&&T!=null&&x==="onScroll"&&Xe("scroll",d)}switch(a){case"input":Rt(d),Vt(d,m,!0);break;case"textarea":Rt(d),qe(d);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(d.onclick=Al)}d=g,o.updateQueue=d,d!==null&&(o.flags|=4)}else{x=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Dr(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=x.createElement(a,{is:d.is}):(n=x.createElement(a),a==="select"&&(x=n,d.multiple?x.multiple=!0:d.size&&(x.size=d.size))):n=x.createElementNS(n,a),n[zn]=o,n[oo]=d,Bg(n,o,!1,!1),o.stateNode=n;e:{switch(x=Nr(a,d),a){case"dialog":Xe("cancel",n),Xe("close",n),g=d;break;case"iframe":case"object":case"embed":Xe("load",n),g=d;break;case"video":case"audio":for(g=0;g<io.length;g++)Xe(io[g],n);g=d;break;case"source":Xe("error",n),g=d;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),g=d;break;case"details":Xe("toggle",n),g=d;break;case"input":Dn(n,d),g=Hn(n,d),Xe("invalid",n);break;case"option":g=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},g=G({},d,{value:void 0}),Xe("invalid",n);break;case"textarea":Zn(n,d),g=mn(n,d),Xe("invalid",n);break;default:g=d}Or(a,g),T=g;for(m in T)if(T.hasOwnProperty(m)){var P=T[m];m==="style"?hl(n,P):m==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&or(n,P)):m==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&lr(n,P):typeof P=="number"&&lr(n,""+P):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(s.hasOwnProperty(m)?P!=null&&m==="onScroll"&&Xe("scroll",n):P!=null&&M(n,m,P,x))}switch(a){case"input":Rt(n),Vt(n,d,!1);break;case"textarea":Rt(n),qe(n);break;case"option":d.value!=null&&n.setAttribute("value",""+we(d.value));break;case"select":n.multiple=!!d.multiple,m=d.value,m!=null?en(n,!!d.multiple,m,!1):d.defaultValue!=null&&en(n,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=Al)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return xt(o),null;case 6:if(n&&o.stateNode!=null)Vg(n,o,n.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(a=pr(ho.current),pr(Gn.current),Gl(o)){if(d=o.stateNode,a=o.memoizedProps,d[zn]=o,(m=d.nodeValue!==a)&&(n=Ht,n!==null))switch(n.tag){case 3:kl(d.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&kl(d.nodeValue,a,(n.mode&1)!==0)}m&&(o.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[zn]=o,o.stateNode=d}return xt(o),null;case 13:if(je(Ye),d=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Be&&Zt!==null&&o.mode&1&&!(o.flags&128))Zf(),$r(),o.flags|=98560,m=!1;else if(m=Gl(o),d!==null&&d.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[zn]=o}else $r(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;xt(o),m=!1}else xn!==null&&(jc(xn),xn=null),m=!0;if(!m)return o.flags&65536?o:null}return o.flags&128?(o.lanes=a,o):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(n===null||Ye.current&1?rt===0&&(rt=3):Vc())),o.updateQueue!==null&&(o.flags|=4),xt(o),null);case 4:return es(),Mc(n,o),n===null&&ro(o.stateNode.containerInfo),xt(o),null;case 10:return oc(o.type._context),xt(o),null;case 17:return Ft(o.type)&&Dl(),xt(o),null;case 19:if(je(Ye),m=o.memoizedState,m===null)return xt(o),null;if(d=(o.flags&128)!==0,x=m.rendering,x===null)if(d)_o(m,!1);else{if(rt!==0||n!==null&&n.flags&128)for(n=o.child;n!==null;){if(x=Bl(n),x!==null){for(o.flags|=128,_o(m,!1),d=x.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=a,a=o.child;a!==null;)m=a,n=d,m.flags&=14680066,x=m.alternate,x===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=x.childLanes,m.lanes=x.lanes,m.child=x.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=x.memoizedProps,m.memoizedState=x.memoizedState,m.updateQueue=x.updateQueue,m.type=x.type,n=x.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ue(Ye,Ye.current&1|2),o.child}n=n.sibling}m.tail!==null&&Qe()>rs&&(o.flags|=128,d=!0,_o(m,!1),o.lanes=4194304)}else{if(!d)if(n=Bl(x),n!==null){if(o.flags|=128,d=!0,a=n.updateQueue,a!==null&&(o.updateQueue=a,o.flags|=4),_o(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!Be)return xt(o),null}else 2*Qe()-m.renderingStartTime>rs&&a!==1073741824&&(o.flags|=128,d=!0,_o(m,!1),o.lanes=4194304);m.isBackwards?(x.sibling=o.child,o.child=x):(a=m.last,a!==null?a.sibling=x:o.child=x,m.last=x)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=Qe(),o.sibling=null,a=Ye.current,Ue(Ye,d?a&1|2:a&1),o):(xt(o),null);case 22:case 23:return Yc(),d=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?$t&1073741824&&(xt(o),o.subtreeFlags&6&&(o.flags|=8192)):xt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Jy(n,o){switch(ec(o),o.tag){case 1:return Ft(o.type)&&Dl(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return es(),je(Dt),je(vt),fc(),n=o.flags,n&65536&&!(n&128)?(o.flags=n&-65537|128,o):null;case 5:return hc(o),null;case 13:if(je(Ye),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(t(340));$r()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return je(Ye),null;case 4:return es(),null;case 10:return oc(o.type._context),null;case 22:case 23:return Yc(),null;case 24:return null;default:return null}}var Jl=!1,wt=!1,e1=typeof WeakSet=="function"?WeakSet:Set,ae=null;function ns(n,o){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){He(n,o,d)}else a.current=null}function Dc(n,o,a){try{a()}catch(d){He(n,o,d)}}var Kg=!1;function t1(n,o){if(Yu=vl,n=Rf(),zu(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var g=d.anchorOffset,m=d.focusNode;d=d.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,T=-1,P=-1,O=0,H=0,$=n,K=null;t:for(;;){for(var oe;$!==a||g!==0&&$.nodeType!==3||(T=x+g),$!==m||d!==0&&$.nodeType!==3||(P=x+d),$.nodeType===3&&(x+=$.nodeValue.length),(oe=$.firstChild)!==null;)K=$,$=oe;for(;;){if($===n)break t;if(K===a&&++O===g&&(T=x),K===m&&++H===d&&(P=x),(oe=$.nextSibling)!==null)break;$=K,K=$.parentNode}$=oe}a=T===-1||P===-1?null:{start:T,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vu={focusedElem:n,selectionRange:a},vl=!1,ae=o;ae!==null;)if(o=ae,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,ae=n;else for(;ae!==null;){o=ae;try{var ue=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var he=ue.memoizedProps,Je=ue.memoizedState,D=o.stateNode,k=D.getSnapshotBeforeUpdate(o.elementType===o.type?he:wn(o.type,he),Je);D.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var F=o.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){He(o,o.return,J)}if(n=o.sibling,n!==null){n.return=o.return,ae=n;break}ae=o.return}return ue=Kg,Kg=!1,ue}function yo(n,o,a){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&n)===n){var m=g.destroy;g.destroy=void 0,m!==void 0&&Dc(o,a,m)}g=g.next}while(g!==d)}}function ea(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&n)===n){var d=a.create;a.destroy=d()}a=a.next}while(a!==o)}}function Fc(n){var o=n.ref;if(o!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof o=="function"?o(n):o.current=n}}function Hg(n){var o=n.alternate;o!==null&&(n.alternate=null,Hg(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[zn],delete o[oo],delete o[$u],delete o[zy],delete o[Gy])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Zg(n){return n.tag===5||n.tag===3||n.tag===4}function $g(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Zg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Oc(n,o,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,o?a.nodeType===8?a.parentNode.insertBefore(n,o):a.insertBefore(n,o):(a.nodeType===8?(o=a.parentNode,o.insertBefore(n,a)):(o=a,o.appendChild(n)),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Al));else if(d!==4&&(n=n.child,n!==null))for(Oc(n,o,a),n=n.sibling;n!==null;)Oc(n,o,a),n=n.sibling}function Nc(n,o,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,o?a.insertBefore(n,o):a.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(Nc(n,o,a),n=n.sibling;n!==null;)Nc(n,o,a),n=n.sibling}var dt=null,Sn=!1;function Fi(n,o,a){for(a=a.child;a!==null;)qg(n,o,a),a=a.sibling}function qg(n,o,a){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(fl,a)}catch{}switch(a.tag){case 5:wt||ns(a,o);case 6:var d=dt,g=Sn;dt=null,Fi(n,o,a),dt=d,Sn=g,dt!==null&&(Sn?(n=dt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):dt.removeChild(a.stateNode));break;case 18:dt!==null&&(Sn?(n=dt,a=a.stateNode,n.nodeType===8?Zu(n.parentNode,a):n.nodeType===1&&Zu(n,a),Zs(n)):Zu(dt,a.stateNode));break;case 4:d=dt,g=Sn,dt=a.stateNode.containerInfo,Sn=!0,Fi(n,o,a),dt=d,Sn=g;break;case 0:case 11:case 14:case 15:if(!wt&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var m=g,x=m.destroy;m=m.tag,x!==void 0&&(m&2||m&4)&&Dc(a,o,x),g=g.next}while(g!==d)}Fi(n,o,a);break;case 1:if(!wt&&(ns(a,o),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(T){He(a,o,T)}Fi(n,o,a);break;case 21:Fi(n,o,a);break;case 22:a.mode&1?(wt=(d=wt)||a.memoizedState!==null,Fi(n,o,a),wt=d):Fi(n,o,a);break;default:Fi(n,o,a)}}function Qg(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new e1),o.forEach(function(d){var g=c1.bind(null,n,d);a.has(d)||(a.add(d),d.then(g,g))})}}function Cn(n,o){var a=o.deletions;if(a!==null)for(var d=0;d<a.length;d++){var g=a[d];try{var m=n,x=o,T=x;e:for(;T!==null;){switch(T.tag){case 5:dt=T.stateNode,Sn=!1;break e;case 3:dt=T.stateNode.containerInfo,Sn=!0;break e;case 4:dt=T.stateNode.containerInfo,Sn=!0;break e}T=T.return}if(dt===null)throw Error(t(160));qg(m,x,g),dt=null,Sn=!1;var P=g.alternate;P!==null&&(P.return=null),g.return=null}catch(O){He(g,o,O)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Jg(o,n),o=o.sibling}function Jg(n,o){var a=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cn(o,n),Un(n),d&4){try{yo(3,n,n.return),ea(3,n)}catch(he){He(n,n.return,he)}try{yo(5,n,n.return)}catch(he){He(n,n.return,he)}}break;case 1:Cn(o,n),Un(n),d&512&&a!==null&&ns(a,a.return);break;case 5:if(Cn(o,n),Un(n),d&512&&a!==null&&ns(a,a.return),n.flags&32){var g=n.stateNode;try{lr(g,"")}catch(he){He(n,n.return,he)}}if(d&4&&(g=n.stateNode,g!=null)){var m=n.memoizedProps,x=a!==null?a.memoizedProps:m,T=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{T==="input"&&m.type==="radio"&&m.name!=null&&Qt(g,m),Nr(T,x);var O=Nr(T,m);for(x=0;x<P.length;x+=2){var H=P[x],$=P[x+1];H==="style"?hl(g,$):H==="dangerouslySetInnerHTML"?or(g,$):H==="children"?lr(g,$):M(g,H,$,O)}switch(T){case"input":mt(g,m);break;case"textarea":$n(g,m);break;case"select":var K=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!m.multiple;var oe=m.value;oe!=null?en(g,!!m.multiple,oe,!1):K!==!!m.multiple&&(m.defaultValue!=null?en(g,!!m.multiple,m.defaultValue,!0):en(g,!!m.multiple,m.multiple?[]:"",!1))}g[oo]=m}catch(he){He(n,n.return,he)}}break;case 6:if(Cn(o,n),Un(n),d&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,m=n.memoizedProps;try{g.nodeValue=m}catch(he){He(n,n.return,he)}}break;case 3:if(Cn(o,n),Un(n),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Zs(o.containerInfo)}catch(he){He(n,n.return,he)}break;case 4:Cn(o,n),Un(n);break;case 13:Cn(o,n),Un(n),g=n.child,g.flags&8192&&(m=g.memoizedState!==null,g.stateNode.isHidden=m,!m||g.alternate!==null&&g.alternate.memoizedState!==null||(bc=Qe())),d&4&&Qg(n);break;case 22:if(H=a!==null&&a.memoizedState!==null,n.mode&1?(wt=(O=wt)||H,Cn(o,n),wt=O):Cn(o,n),Un(n),d&8192){if(O=n.memoizedState!==null,(n.stateNode.isHidden=O)&&!H&&n.mode&1)for(ae=n,H=n.child;H!==null;){for($=ae=H;ae!==null;){switch(K=ae,oe=K.child,K.tag){case 0:case 11:case 14:case 15:yo(4,K,K.return);break;case 1:ns(K,K.return);var ue=K.stateNode;if(typeof ue.componentWillUnmount=="function"){d=K,a=K.return;try{o=d,ue.props=o.memoizedProps,ue.state=o.memoizedState,ue.componentWillUnmount()}catch(he){He(d,a,he)}}break;case 5:ns(K,K.return);break;case 22:if(K.memoizedState!==null){np($);continue}}oe!==null?(oe.return=K,ae=oe):np($)}H=H.sibling}e:for(H=null,$=n;;){if($.tag===5){if(H===null){H=$;try{g=$.stateNode,O?(m=g.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(T=$.stateNode,P=$.memoizedProps.style,x=P!=null&&P.hasOwnProperty("display")?P.display:null,T.style.display=Fr("display",x))}catch(he){He(n,n.return,he)}}}else if($.tag===6){if(H===null)try{$.stateNode.nodeValue=O?"":$.memoizedProps}catch(he){He(n,n.return,he)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===n)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===n)break e;for(;$.sibling===null;){if($.return===null||$.return===n)break e;H===$&&(H=null),$=$.return}H===$&&(H=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:Cn(o,n),Un(n),d&4&&Qg(n);break;case 21:break;default:Cn(o,n),Un(n)}}function Un(n){var o=n.flags;if(o&2){try{e:{for(var a=n.return;a!==null;){if(Zg(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(lr(g,""),d.flags&=-33);var m=$g(n);Nc(n,m,g);break;case 3:case 4:var x=d.stateNode.containerInfo,T=$g(n);Oc(n,T,x);break;default:throw Error(t(161))}}catch(P){He(n,n.return,P)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function n1(n,o,a){ae=n,ep(n)}function ep(n,o,a){for(var d=(n.mode&1)!==0;ae!==null;){var g=ae,m=g.child;if(g.tag===22&&d){var x=g.memoizedState!==null||Jl;if(!x){var T=g.alternate,P=T!==null&&T.memoizedState!==null||wt;T=Jl;var O=wt;if(Jl=x,(wt=P)&&!O)for(ae=g;ae!==null;)x=ae,P=x.child,x.tag===22&&x.memoizedState!==null?ip(g):P!==null?(P.return=x,ae=P):ip(g);for(;m!==null;)ae=m,ep(m),m=m.sibling;ae=g,Jl=T,wt=O}tp(n)}else g.subtreeFlags&8772&&m!==null?(m.return=g,ae=m):tp(n)}}function tp(n){for(;ae!==null;){var o=ae;if(o.flags&8772){var a=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:wt||ea(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!wt)if(a===null)d.componentDidMount();else{var g=o.elementType===o.type?a.memoizedProps:wn(o.type,a.memoizedProps);d.componentDidUpdate(g,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var m=o.updateQueue;m!==null&&ng(o,m,d);break;case 3:var x=o.updateQueue;if(x!==null){if(a=null,o.child!==null)switch(o.child.tag){case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}ng(o,x,a)}break;case 5:var T=o.stateNode;if(a===null&&o.flags&4){a=T;var P=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var O=o.alternate;if(O!==null){var H=O.memoizedState;if(H!==null){var $=H.dehydrated;$!==null&&Zs($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}wt||o.flags&512&&Fc(o)}catch(K){He(o,o.return,K)}}if(o===n){ae=null;break}if(a=o.sibling,a!==null){a.return=o.return,ae=a;break}ae=o.return}}function np(n){for(;ae!==null;){var o=ae;if(o===n){ae=null;break}var a=o.sibling;if(a!==null){a.return=o.return,ae=a;break}ae=o.return}}function ip(n){for(;ae!==null;){var o=ae;try{switch(o.tag){case 0:case 11:case 15:var a=o.return;try{ea(4,o)}catch(P){He(o,a,P)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var g=o.return;try{d.componentDidMount()}catch(P){He(o,g,P)}}var m=o.return;try{Fc(o)}catch(P){He(o,m,P)}break;case 5:var x=o.return;try{Fc(o)}catch(P){He(o,x,P)}}}catch(P){He(o,o.return,P)}if(o===n){ae=null;break}var T=o.sibling;if(T!==null){T.return=o.return,ae=T;break}ae=o.return}}var i1=Math.ceil,ta=L.ReactCurrentDispatcher,zc=L.ReactCurrentOwner,ln=L.ReactCurrentBatchConfig,Le=0,lt=null,tt=null,ft=0,$t=0,is=Pi(0),rt=0,vo=null,_r=0,na=0,Gc=0,Eo=null,Nt=null,bc=0,rs=1/0,si=null,ia=!1,Uc=null,Oi=null,ra=!1,Ni=null,sa=0,xo=0,Wc=null,oa=-1,la=0;function kt(){return Le&6?Qe():oa!==-1?oa:oa=Qe()}function zi(n){return n.mode&1?Le&2&&ft!==0?ft&-ft:Uy.transition!==null?(la===0&&(la=Zd()),la):(n=Ne,n!==0||(n=window.event,n=n===void 0?16:sf(n.type)),n):1}function Rn(n,o,a,d){if(50<xo)throw xo=0,Wc=null,Error(t(185));Bs(n,a,d),(!(Le&2)||n!==lt)&&(n===lt&&(!(Le&2)&&(na|=a),rt===4&&Gi(n,ft)),zt(n,d),a===1&&Le===0&&!(o.mode&1)&&(rs=Qe()+500,Ol&&Ai()))}function zt(n,o){var a=n.callbackNode;U0(n,o);var d=ml(n,n===lt?ft:0);if(d===0)a!==null&&Vd(a),n.callbackNode=null,n.callbackPriority=0;else if(o=d&-d,n.callbackPriority!==o){if(a!=null&&Vd(a),o===1)n.tag===0?by(sp.bind(null,n)):Bf(sp.bind(null,n)),Oy(function(){!(Le&6)&&Ai()}),a=null;else{switch($d(d)){case 1:a=Eu;break;case 4:a=Kd;break;case 16:a=dl;break;case 536870912:a=Hd;break;default:a=dl}a=fp(a,rp.bind(null,n))}n.callbackPriority=o,n.callbackNode=a}}function rp(n,o){if(oa=-1,la=0,Le&6)throw Error(t(327));var a=n.callbackNode;if(ss()&&n.callbackNode!==a)return null;var d=ml(n,n===lt?ft:0);if(d===0)return null;if(d&30||d&n.expiredLanes||o)o=aa(n,d);else{o=d;var g=Le;Le|=2;var m=lp();(lt!==n||ft!==o)&&(si=null,rs=Qe()+500,vr(n,o));do try{o1();break}catch(T){op(n,T)}while(!0);sc(),ta.current=m,Le=g,tt!==null?o=0:(lt=null,ft=0,o=rt)}if(o!==0){if(o===2&&(g=xu(n),g!==0&&(d=g,o=Xc(n,g))),o===1)throw a=vo,vr(n,0),Gi(n,d),zt(n,Qe()),a;if(o===6)Gi(n,d);else{if(g=n.current.alternate,!(d&30)&&!r1(g)&&(o=aa(n,d),o===2&&(m=xu(n),m!==0&&(d=m,o=Xc(n,m))),o===1))throw a=vo,vr(n,0),Gi(n,d),zt(n,Qe()),a;switch(n.finishedWork=g,n.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:Er(n,Nt,si);break;case 3:if(Gi(n,d),(d&130023424)===d&&(o=bc+500-Qe(),10<o)){if(ml(n,0)!==0)break;if(g=n.suspendedLanes,(g&d)!==d){kt(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Hu(Er.bind(null,n,Nt,si),o);break}Er(n,Nt,si);break;case 4:if(Gi(n,d),(d&4194240)===d)break;for(o=n.eventTimes,g=-1;0<d;){var x=31-vn(d);m=1<<x,x=o[x],x>g&&(g=x),d&=~m}if(d=g,d=Qe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*i1(d/1960))-d,10<d){n.timeoutHandle=Hu(Er.bind(null,n,Nt,si),d);break}Er(n,Nt,si);break;case 5:Er(n,Nt,si);break;default:throw Error(t(329))}}}return zt(n,Qe()),n.callbackNode===a?rp.bind(null,n):null}function Xc(n,o){var a=Eo;return n.current.memoizedState.isDehydrated&&(vr(n,o).flags|=256),n=aa(n,o),n!==2&&(o=Nt,Nt=a,o!==null&&jc(o)),n}function jc(n){Nt===null?Nt=n:Nt.push.apply(Nt,n)}function r1(n){for(var o=n;;){if(o.flags&16384){var a=o.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var g=a[d],m=g.getSnapshot;g=g.value;try{if(!En(m(),g))return!1}catch{return!1}}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Gi(n,o){for(o&=~Gc,o&=~na,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var a=31-vn(o),d=1<<a;n[a]=-1,o&=~d}}function sp(n){if(Le&6)throw Error(t(327));ss();var o=ml(n,0);if(!(o&1))return zt(n,Qe()),null;var a=aa(n,o);if(n.tag!==0&&a===2){var d=xu(n);d!==0&&(o=d,a=Xc(n,d))}if(a===1)throw a=vo,vr(n,0),Gi(n,o),zt(n,Qe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Er(n,Nt,si),zt(n,Qe()),null}function Bc(n,o){var a=Le;Le|=1;try{return n(o)}finally{Le=a,Le===0&&(rs=Qe()+500,Ol&&Ai())}}function yr(n){Ni!==null&&Ni.tag===0&&!(Le&6)&&ss();var o=Le;Le|=1;var a=ln.transition,d=Ne;try{if(ln.transition=null,Ne=1,n)return n()}finally{Ne=d,ln.transition=a,Le=o,!(Le&6)&&Ai()}}function Yc(){$t=is.current,je(is)}function vr(n,o){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Fy(a)),tt!==null)for(a=tt.return;a!==null;){var d=a;switch(ec(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Dl();break;case 3:es(),je(Dt),je(vt),fc();break;case 5:hc(d);break;case 4:es();break;case 13:je(Ye);break;case 19:je(Ye);break;case 10:oc(d.type._context);break;case 22:case 23:Yc()}a=a.return}if(lt=n,tt=n=bi(n.current,null),ft=$t=o,rt=0,vo=null,Gc=na=_r=0,Nt=Eo=null,gr!==null){for(o=0;o<gr.length;o++)if(a=gr[o],d=a.interleaved,d!==null){a.interleaved=null;var g=d.next,m=a.pending;if(m!==null){var x=m.next;m.next=g,d.next=x}a.pending=d}gr=null}return n}function op(n,o){do{var a=tt;try{if(sc(),Yl.current=Zl,Vl){for(var d=Ve.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}Vl=!1}if(mr=0,ot=it=Ve=null,fo=!1,go=0,zc.current=null,a===null||a.return===null){rt=1,vo=o,tt=null;break}e:{var m=n,x=a.return,T=a,P=o;if(o=ft,T.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var O=P,H=T,$=H.tag;if(!(H.mode&1)&&($===0||$===11||$===15)){var K=H.alternate;K?(H.updateQueue=K.updateQueue,H.memoizedState=K.memoizedState,H.lanes=K.lanes):(H.updateQueue=null,H.memoizedState=null)}var oe=Ag(x);if(oe!==null){oe.flags&=-257,Mg(oe,x,T,m,o),oe.mode&1&&kg(m,O,o),o=oe,P=O;var ue=o.updateQueue;if(ue===null){var he=new Set;he.add(P),o.updateQueue=he}else ue.add(P);break e}else{if(!(o&1)){kg(m,O,o),Vc();break e}P=Error(t(426))}}else if(Be&&T.mode&1){var Je=Ag(x);if(Je!==null){!(Je.flags&65536)&&(Je.flags|=256),Mg(Je,x,T,m,o),ic(ts(P,T));break e}}m=P=ts(P,T),rt!==4&&(rt=2),Eo===null?Eo=[m]:Eo.push(m),m=x;do{switch(m.tag){case 3:m.flags|=65536,o&=-o,m.lanes|=o;var D=Lg(m,P,o);tg(m,D);break e;case 1:T=P;var k=m.type,F=m.stateNode;if(!(m.flags&128)&&(typeof k.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Oi===null||!Oi.has(F)))){m.flags|=65536,o&=-o,m.lanes|=o;var J=Pg(m,T,o);tg(m,J);break e}}m=m.return}while(m!==null)}up(a)}catch(fe){o=fe,tt===a&&a!==null&&(tt=a=a.return);continue}break}while(!0)}function lp(){var n=ta.current;return ta.current=Zl,n===null?Zl:n}function Vc(){(rt===0||rt===3||rt===2)&&(rt=4),lt===null||!(_r&268435455)&&!(na&268435455)||Gi(lt,ft)}function aa(n,o){var a=Le;Le|=2;var d=lp();(lt!==n||ft!==o)&&(si=null,vr(n,o));do try{s1();break}catch(g){op(n,g)}while(!0);if(sc(),Le=a,ta.current=d,tt!==null)throw Error(t(261));return lt=null,ft=0,rt}function s1(){for(;tt!==null;)ap(tt)}function o1(){for(;tt!==null&&!A0();)ap(tt)}function ap(n){var o=dp(n.alternate,n,$t);n.memoizedProps=n.pendingProps,o===null?up(n):tt=o,zc.current=null}function up(n){var o=n;do{var a=o.alternate;if(n=o.return,o.flags&32768){if(a=Jy(a,o),a!==null){a.flags&=32767,tt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{rt=6,tt=null;return}}else if(a=Qy(a,o,$t),a!==null){tt=a;return}if(o=o.sibling,o!==null){tt=o;return}tt=o=n}while(o!==null);rt===0&&(rt=5)}function Er(n,o,a){var d=Ne,g=ln.transition;try{ln.transition=null,Ne=1,l1(n,o,a,d)}finally{ln.transition=g,Ne=d}return null}function l1(n,o,a,d){do ss();while(Ni!==null);if(Le&6)throw Error(t(327));a=n.finishedWork;var g=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(W0(n,m),n===lt&&(tt=lt=null,ft=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||ra||(ra=!0,fp(dl,function(){return ss(),null})),m=(a.flags&15990)!==0,a.subtreeFlags&15990||m){m=ln.transition,ln.transition=null;var x=Ne;Ne=1;var T=Le;Le|=4,zc.current=null,t1(n,a),Jg(a,n),Iy(Vu),vl=!!Yu,Vu=Yu=null,n.current=a,n1(a),M0(),Le=T,Ne=x,ln.transition=m}else n.current=a;if(ra&&(ra=!1,Ni=n,sa=g),m=n.pendingLanes,m===0&&(Oi=null),O0(a.stateNode),zt(n,Qe()),o!==null)for(d=n.onRecoverableError,a=0;a<o.length;a++)g=o[a],d(g.value,{componentStack:g.stack,digest:g.digest});if(ia)throw ia=!1,n=Uc,Uc=null,n;return sa&1&&n.tag!==0&&ss(),m=n.pendingLanes,m&1?n===Wc?xo++:(xo=0,Wc=n):xo=0,Ai(),null}function ss(){if(Ni!==null){var n=$d(sa),o=ln.transition,a=Ne;try{if(ln.transition=null,Ne=16>n?16:n,Ni===null)var d=!1;else{if(n=Ni,Ni=null,sa=0,Le&6)throw Error(t(331));var g=Le;for(Le|=4,ae=n.current;ae!==null;){var m=ae,x=m.child;if(ae.flags&16){var T=m.deletions;if(T!==null){for(var P=0;P<T.length;P++){var O=T[P];for(ae=O;ae!==null;){var H=ae;switch(H.tag){case 0:case 11:case 15:yo(8,H,m)}var $=H.child;if($!==null)$.return=H,ae=$;else for(;ae!==null;){H=ae;var K=H.sibling,oe=H.return;if(Hg(H),H===O){ae=null;break}if(K!==null){K.return=oe,ae=K;break}ae=oe}}}var ue=m.alternate;if(ue!==null){var he=ue.child;if(he!==null){ue.child=null;do{var Je=he.sibling;he.sibling=null,he=Je}while(he!==null)}}ae=m}}if(m.subtreeFlags&2064&&x!==null)x.return=m,ae=x;else e:for(;ae!==null;){if(m=ae,m.flags&2048)switch(m.tag){case 0:case 11:case 15:yo(9,m,m.return)}var D=m.sibling;if(D!==null){D.return=m.return,ae=D;break e}ae=m.return}}var k=n.current;for(ae=k;ae!==null;){x=ae;var F=x.child;if(x.subtreeFlags&2064&&F!==null)F.return=x,ae=F;else e:for(x=k;ae!==null;){if(T=ae,T.flags&2048)try{switch(T.tag){case 0:case 11:case 15:ea(9,T)}}catch(fe){He(T,T.return,fe)}if(T===x){ae=null;break e}var J=T.sibling;if(J!==null){J.return=T.return,ae=J;break e}ae=T.return}}if(Le=g,Ai(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(fl,n)}catch{}d=!0}return d}finally{Ne=a,ln.transition=o}}return!1}function cp(n,o,a){o=ts(a,o),o=Lg(n,o,1),n=Di(n,o,1),o=kt(),n!==null&&(Bs(n,1,o),zt(n,o))}function He(n,o,a){if(n.tag===3)cp(n,n,a);else for(;o!==null;){if(o.tag===3){cp(o,n,a);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Oi===null||!Oi.has(d))){n=ts(a,n),n=Pg(o,n,1),o=Di(o,n,1),n=kt(),o!==null&&(Bs(o,1,n),zt(o,n));break}}o=o.return}}function a1(n,o,a){var d=n.pingCache;d!==null&&d.delete(o),o=kt(),n.pingedLanes|=n.suspendedLanes&a,lt===n&&(ft&a)===a&&(rt===4||rt===3&&(ft&130023424)===ft&&500>Qe()-bc?vr(n,0):Gc|=a),zt(n,o)}function hp(n,o){o===0&&(n.mode&1?(o=pl,pl<<=1,!(pl&130023424)&&(pl=4194304)):o=1);var a=kt();n=ni(n,o),n!==null&&(Bs(n,o,a),zt(n,a))}function u1(n){var o=n.memoizedState,a=0;o!==null&&(a=o.retryLane),hp(n,a)}function c1(n,o){var a=0;switch(n.tag){case 13:var d=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),hp(n,a)}var dp;dp=function(n,o,a){if(n!==null)if(n.memoizedProps!==o.pendingProps||Dt.current)Ot=!0;else{if(!(n.lanes&a)&&!(o.flags&128))return Ot=!1,qy(n,o,a);Ot=!!(n.flags&131072)}else Ot=!1,Be&&o.flags&1048576&&Yf(o,zl,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Ql(n,o),n=o.pendingProps;var g=Kr(o,vt.current);Jr(o,a),g=mc(null,o,d,n,g,a);var m=_c();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Ft(d)?(m=!0,Fl(o)):m=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,uc(o),g.updater=$l,o.stateNode=g,g._reactInternals=o,Sc(o,d,n,a),o=Ic(null,o,d,!0,m,a)):(o.tag=0,Be&&m&&Ju(o),Pt(null,o,g,a),o=o.child),o;case 16:d=o.elementType;e:{switch(Ql(n,o),n=o.pendingProps,g=d._init,d=g(d._payload),o.type=d,g=o.tag=d1(d),n=wn(d,n),g){case 0:o=Tc(null,o,d,n,a);break e;case 1:o=Gg(null,o,d,n,a);break e;case 11:o=Dg(null,o,d,n,a);break e;case 14:o=Fg(null,o,d,wn(d.type,n),a);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:wn(d,g),Tc(n,o,d,g,a);case 1:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:wn(d,g),Gg(n,o,d,g,a);case 3:e:{if(bg(o),n===null)throw Error(t(387));d=o.pendingProps,m=o.memoizedState,g=m.element,eg(n,o),jl(o,d,null,a);var x=o.memoizedState;if(d=x.element,m.isDehydrated)if(m={element:d,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},o.updateQueue.baseState=m,o.memoizedState=m,o.flags&256){g=ts(Error(t(423)),o),o=Ug(n,o,d,a,g);break e}else if(d!==g){g=ts(Error(t(424)),o),o=Ug(n,o,d,a,g);break e}else for(Zt=Li(o.stateNode.containerInfo.firstChild),Ht=o,Be=!0,xn=null,a=Qf(o,null,d,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if($r(),d===g){o=ri(n,o,a);break e}Pt(n,o,d,a)}o=o.child}return o;case 5:return ig(o),n===null&&nc(o),d=o.type,g=o.pendingProps,m=n!==null?n.memoizedProps:null,x=g.children,Ku(d,g)?x=null:m!==null&&Ku(d,m)&&(o.flags|=32),zg(n,o),Pt(n,o,x,a),o.child;case 6:return n===null&&nc(o),null;case 13:return Wg(n,o,a);case 4:return cc(o,o.stateNode.containerInfo),d=o.pendingProps,n===null?o.child=qr(o,null,d,a):Pt(n,o,d,a),o.child;case 11:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:wn(d,g),Dg(n,o,d,g,a);case 7:return Pt(n,o,o.pendingProps,a),o.child;case 8:return Pt(n,o,o.pendingProps.children,a),o.child;case 12:return Pt(n,o,o.pendingProps.children,a),o.child;case 10:e:{if(d=o.type._context,g=o.pendingProps,m=o.memoizedProps,x=g.value,Ue(Ul,d._currentValue),d._currentValue=x,m!==null)if(En(m.value,x)){if(m.children===g.children&&!Dt.current){o=ri(n,o,a);break e}}else for(m=o.child,m!==null&&(m.return=o);m!==null;){var T=m.dependencies;if(T!==null){x=m.child;for(var P=T.firstContext;P!==null;){if(P.context===d){if(m.tag===1){P=ii(-1,a&-a),P.tag=2;var O=m.updateQueue;if(O!==null){O=O.shared;var H=O.pending;H===null?P.next=P:(P.next=H.next,H.next=P),O.pending=P}}m.lanes|=a,P=m.alternate,P!==null&&(P.lanes|=a),lc(m.return,a,o),T.lanes|=a;break}P=P.next}}else if(m.tag===10)x=m.type===o.type?null:m.child;else if(m.tag===18){if(x=m.return,x===null)throw Error(t(341));x.lanes|=a,T=x.alternate,T!==null&&(T.lanes|=a),lc(x,a,o),x=m.sibling}else x=m.child;if(x!==null)x.return=m;else for(x=m;x!==null;){if(x===o){x=null;break}if(m=x.sibling,m!==null){m.return=x.return,x=m;break}x=x.return}m=x}Pt(n,o,g.children,a),o=o.child}return o;case 9:return g=o.type,d=o.pendingProps.children,Jr(o,a),g=sn(g),d=d(g),o.flags|=1,Pt(n,o,d,a),o.child;case 14:return d=o.type,g=wn(d,o.pendingProps),g=wn(d.type,g),Fg(n,o,d,g,a);case 15:return Og(n,o,o.type,o.pendingProps,a);case 17:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:wn(d,g),Ql(n,o),o.tag=1,Ft(d)?(n=!0,Fl(o)):n=!1,Jr(o,a),Tg(o,d,g),Sc(o,d,g,a),Ic(null,o,d,!0,n,a);case 19:return jg(n,o,a);case 22:return Ng(n,o,a)}throw Error(t(156,o.tag))};function fp(n,o){return Yd(n,o)}function h1(n,o,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(n,o,a,d){return new h1(n,o,a,d)}function Kc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function d1(n){if(typeof n=="function")return Kc(n)?1:0;if(n!=null){if(n=n.$$typeof,n===q)return 11;if(n===te)return 14}return 2}function bi(n,o){var a=n.alternate;return a===null?(a=an(n.tag,o,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=o,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,o=n.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ua(n,o,a,d,g,m){var x=2;if(d=n,typeof n=="function")Kc(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case V:return xr(a.children,g,m,o);case b:x=8,g|=8;break;case U:return n=an(12,a,o,g|2),n.elementType=U,n.lanes=m,n;case ie:return n=an(13,a,o,g),n.elementType=ie,n.lanes=m,n;case ee:return n=an(19,a,o,g),n.elementType=ee,n.lanes=m,n;case Z:return ca(a,g,m,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:x=10;break e;case ne:x=9;break e;case q:x=11;break e;case te:x=14;break e;case re:x=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return o=an(x,a,o,g),o.elementType=n,o.type=d,o.lanes=m,o}function xr(n,o,a,d){return n=an(7,n,d,o),n.lanes=a,n}function ca(n,o,a,d){return n=an(22,n,d,o),n.elementType=Z,n.lanes=a,n.stateNode={isHidden:!1},n}function Hc(n,o,a){return n=an(6,n,null,o),n.lanes=a,n}function Zc(n,o,a){return o=an(4,n.children!==null?n.children:[],n.key,o),o.lanes=a,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function f1(n,o,a,d,g){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wu(0),this.expirationTimes=wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function $c(n,o,a,d,g,m,x,T,P){return n=new f1(n,o,a,T,P),o===1?(o=1,m===!0&&(o|=8)):o=0,m=an(3,null,null,o),n.current=m,m.stateNode=n,m.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},uc(m),n}function g1(n,o,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:d==null?null:""+d,children:n,containerInfo:o,implementation:a}}function gp(n){if(!n)return ki;n=n._reactInternals;e:{if(ur(n)!==n||n.tag!==1)throw Error(t(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Ft(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Ft(a))return Xf(n,a,o)}return o}function pp(n,o,a,d,g,m,x,T,P){return n=$c(a,d,!0,n,g,m,x,T,P),n.context=gp(null),a=n.current,d=kt(),g=zi(a),m=ii(d,g),m.callback=o??null,Di(a,m,g),n.current.lanes=g,Bs(n,g,d),zt(n,d),n}function ha(n,o,a,d){var g=o.current,m=kt(),x=zi(g);return a=gp(a),o.context===null?o.context=a:o.pendingContext=a,o=ii(m,x),o.payload={element:n},d=d===void 0?null:d,d!==null&&(o.callback=d),n=Di(g,o,x),n!==null&&(Rn(n,g,x,m),Xl(n,g,x)),x}function da(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function mp(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<o?a:o}}function qc(n,o){mp(n,o),(n=n.alternate)&&mp(n,o)}var _p=typeof reportError=="function"?reportError:function(n){console.error(n)};function Qc(n){this._internalRoot=n}fa.prototype.render=Qc.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(t(409));ha(n,o,null,null)},fa.prototype.unmount=Qc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;yr(function(){ha(null,n,null,null)}),o[Qn]=null}};function fa(n){this._internalRoot=n}fa.prototype.unstable_scheduleHydration=function(n){if(n){var o=Jd();n={blockedOn:null,target:n,priority:o};for(var a=0;a<Ri.length&&o!==0&&o<Ri[a].priority;a++);Ri.splice(a,0,n),a===0&&nf(n)}};function Jc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ga(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function yp(){}function p1(n,o,a,d,g){if(g){if(typeof d=="function"){var m=d;d=function(){var O=da(x);m.call(O)}}var x=pp(o,d,n,0,null,!1,!1,"",yp);return n._reactRootContainer=x,n[Qn]=x.current,ro(n.nodeType===8?n.parentNode:n),yr(),x}for(;g=n.lastChild;)n.removeChild(g);if(typeof d=="function"){var T=d;d=function(){var O=da(P);T.call(O)}}var P=$c(n,0,!1,null,null,!1,!1,"",yp);return n._reactRootContainer=P,n[Qn]=P.current,ro(n.nodeType===8?n.parentNode:n),yr(function(){ha(o,P,a,d)}),P}function pa(n,o,a,d,g){var m=a._reactRootContainer;if(m){var x=m;if(typeof g=="function"){var T=g;g=function(){var P=da(x);T.call(P)}}ha(o,x,n,g)}else x=p1(a,o,n,g,d);return da(x)}qd=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var a=js(o.pendingLanes);a!==0&&(Su(o,a|1),zt(o,Qe()),!(Le&6)&&(rs=Qe()+500,Ai()))}break;case 13:yr(function(){var d=ni(n,1);if(d!==null){var g=kt();Rn(d,n,1,g)}}),qc(n,1)}},Cu=function(n){if(n.tag===13){var o=ni(n,134217728);if(o!==null){var a=kt();Rn(o,n,134217728,a)}qc(n,134217728)}},Qd=function(n){if(n.tag===13){var o=zi(n),a=ni(n,o);if(a!==null){var d=kt();Rn(a,n,o,d)}qc(n,o)}},Jd=function(){return Ne},ef=function(n,o){var a=Ne;try{return Ne=n,o()}finally{Ne=a}},bs=function(n,o,a){switch(o){case"input":if(mt(n,a),o=a.name,a.type==="radio"&&o!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<a.length;o++){var d=a[o];if(d!==n&&d.form===n.form){var g=Ml(d);if(!g)throw Error(t(90));Mn(d),mt(d,g)}}}break;case"textarea":$n(n,a);break;case"select":o=a.value,o!=null&&en(n,!!a.multiple,o,!1)}},Ws=Bc,Tt=yr;var m1={usingClientEntryPoint:!1,Events:[lo,Yr,Ml,xi,Us,Bc]},wo={findFiberByHostInstance:cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_1={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=jd(n),n===null?null:n.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ma.isDisabled&&ma.supportsFiber)try{fl=ma.inject(_1),Nn=ma}catch{}}return Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m1,Gt.createPortal=function(n,o){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jc(o))throw Error(t(200));return g1(n,o,null,a)},Gt.createRoot=function(n,o){if(!Jc(n))throw Error(t(299));var a=!1,d="",g=_p;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=$c(n,1,!1,null,null,a,!1,d,g),n[Qn]=o.current,ro(n.nodeType===8?n.parentNode:n),new Qc(o)},Gt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=jd(o),n=n===null?null:n.stateNode,n},Gt.flushSync=function(n){return yr(n)},Gt.hydrate=function(n,o,a){if(!ga(o))throw Error(t(200));return pa(null,n,o,!0,a)},Gt.hydrateRoot=function(n,o,a){if(!Jc(n))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,g=!1,m="",x=_p;if(a!=null&&(a.unstable_strictMode===!0&&(g=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),o=pp(o,null,n,1,a??null,g,!1,m,x),n[Qn]=o.current,ro(n),d)for(n=0;n<d.length;n++)a=d[n],g=a._getVersion,g=g(a._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[a,g]:o.mutableSourceEagerHydrationData.push(a,g);return new fa(o)},Gt.render=function(n,o,a){if(!ga(o))throw Error(t(200));return pa(null,n,o,!1,a)},Gt.unmountComponentAtNode=function(n){if(!ga(n))throw Error(t(40));return n._reactRootContainer?(yr(function(){pa(null,null,n,!1,function(){n._reactRootContainer=null,n[Qn]=null})}),!0):!1},Gt.unstable_batchedUpdates=Bc,Gt.unstable_renderSubtreeIntoContainer=function(n,o,a,d){if(!ga(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return pa(n,o,a,!1,d)},Gt.version="18.3.1-next-f1338f8080-20240426",Gt}var Ip;function L1(){if(Ip)return nh.exports;Ip=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),nh.exports=I1(),nh.exports}var Lp;function P1(){if(Lp)return _a;Lp=1;var i=L1();return _a.createRoot=i.createRoot,_a.hydrateRoot=i.hydrateRoot,_a}var k1=P1();const A1=Ym(k1);var Co={},Pp;function M1(){if(Pp)return Co;Pp=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.parse=u,Co.serialize=f;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function u(y,E){const v=new l,w=y.length;if(w<2)return v;const S=(E==null?void 0:E.decode)||p;let C=0;do{const R=y.indexOf("=",C);if(R===-1)break;const M=y.indexOf(";",C),L=M===-1?w:M;if(R>L){C=y.lastIndexOf(";",R-1)+1;continue}const A=c(y,C,R),W=h(y,R,A),V=y.slice(A,W);if(v[V]===void 0){let b=c(y,R+1,L),U=h(y,L,b);const Y=S(y.slice(b,U));v[V]=Y}C=L+1}while(C<w);return v}function c(y,E,v){do{const w=y.charCodeAt(E);if(w!==32&&w!==9)return E}while(++E<v);return v}function h(y,E,v){for(;E>v;){const w=y.charCodeAt(--E);if(w!==32&&w!==9)return E+1}return v}function f(y,E,v){const w=(v==null?void 0:v.encode)||encodeURIComponent;if(!i.test(y))throw new TypeError(`argument name is invalid: ${y}`);const S=w(E);if(!e.test(S))throw new TypeError(`argument val is invalid: ${E}`);let C=y+"="+S;if(!v)return C;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);C+="; Max-Age="+v.maxAge}if(v.domain){if(!t.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);C+="; Domain="+v.domain}if(v.path){if(!r.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);C+="; Path="+v.path}if(v.expires){if(!_(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);C+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(C+="; HttpOnly"),v.secure&&(C+="; Secure"),v.partitioned&&(C+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return C}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function _(y){return s.call(y)==="[object Date]"}return Co}M1();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var kp="popstate";function D1(i={}){function e(r,s){let{pathname:l,search:u,hash:c}=r.location;return Lh("",{pathname:l,search:u,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:zo(s)}return O1(e,t,null,i)}function Ke(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Yn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F1(){return Math.random().toString(36).substring(2,10)}function Ap(i,e){return{usr:i.state,key:i.key,idx:e}}function Lh(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Os(e):e,state:t,key:e&&e.key||r||F1()}}function zo({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Os(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function O1(i,e,t,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,u=s.history,c="POP",h=null,f=p();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function p(){return(u.state||{idx:null}).idx}function _(){c="POP";let S=p(),C=S==null?null:S-f;f=S,h&&h({action:c,location:w.location,delta:C})}function y(S,C){c="PUSH";let R=Lh(w.location,S,C);f=p()+1;let M=Ap(R,f),L=w.createHref(R);try{u.pushState(M,"",L)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(L)}l&&h&&h({action:c,location:w.location,delta:1})}function E(S,C){c="REPLACE";let R=Lh(w.location,S,C);f=p();let M=Ap(R,f),L=w.createHref(R);u.replaceState(M,"",L),l&&h&&h({action:c,location:w.location,delta:0})}function v(S){let C=s.location.origin!=="null"?s.location.origin:s.location.href,R=typeof S=="string"?S:zo(S);return R=R.replace(/ $/,"%20"),Ke(C,`No window.location.(origin|href) available to create URL for href: ${R}`),new URL(R,C)}let w={get action(){return c},get location(){return i(s,u)},listen(S){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(kp,_),h=S,()=>{s.removeEventListener(kp,_),h=null}},createHref(S){return e(s,S)},createURL:v,encodeLocation(S){let C=v(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:E,go(S){return u.go(S)}};return w}function Vm(i,e,t="/"){return N1(i,e,t,!1)}function N1(i,e,t,r){let s=typeof e=="string"?Os(e):e,l=tr(s.pathname||"/",t);if(l==null)return null;let u=Km(i);z1(u);let c=null;for(let h=0;c==null&&h<u.length;++h){let f=H1(l);c=V1(u[h],f,r)}return c}function Km(i,e=[],t=[],r=""){let s=(l,u,c)=>{let h={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};h.relativePath.startsWith("/")&&(Ke(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let f=hi([r,h.relativePath]),p=t.concat(h);l.children&&l.children.length>0&&(Ke(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Km(l.children,e,p,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:B1(f,l.index),routesMeta:p})};return i.forEach((l,u)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))s(l,u);else for(let h of Hm(l.path))s(l,u,h)}),e}function Hm(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let u=Hm(r.join("/")),c=[];return c.push(...u.map(h=>h===""?l:[l,h].join("/"))),s&&c.push(...u),c.map(h=>i.startsWith("/")&&h===""?"/":h)}function z1(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:Y1(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var G1=/^:[\w-]+$/,b1=3,U1=2,W1=1,X1=10,j1=-2,Mp=i=>i==="*";function B1(i,e){let t=i.split("/"),r=t.length;return t.some(Mp)&&(r+=j1),e&&(r+=U1),t.filter(s=>!Mp(s)).reduce((s,l)=>s+(G1.test(l)?b1:l===""?W1:X1),r)}function Y1(i,e){return i.length===e.length&&i.slice(0,-1).every((r,s)=>r===e[s])?i[i.length-1]-e[e.length-1]:0}function V1(i,e,t=!1){let{routesMeta:r}=i,s={},l="/",u=[];for(let c=0;c<r.length;++c){let h=r[c],f=c===r.length-1,p=l==="/"?e:e.slice(l.length)||"/",_=Fa({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),y=h.route;if(!_&&f&&t&&!r[r.length-1].route.index&&(_=Fa({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!_)return null;Object.assign(s,_.params),u.push({params:s,pathname:hi([l,_.pathname]),pathnameBase:Q1(hi([l,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(l=hi([l,_.pathnameBase]))}return u}function Fa(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=K1(i.path,i.caseSensitive,i.end),s=e.match(t);if(!s)return null;let l=s[0],u=l.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:_},y)=>{if(p==="*"){let v=c[y]||"";u=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const E=c[y];return _&&!E?f[p]=void 0:f[p]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:u,pattern:i}}function K1(i,e=!1,t=!0){Yn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function H1(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function tr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function Z1(i,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof i=="string"?Os(i):i;return{pathname:t?t.startsWith("/")?t:$1(t,e):e,search:J1(r),hash:ev(s)}}function $1(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function sh(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function q1(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Zm(i){let e=q1(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function $m(i,e,t,r=!1){let s;typeof i=="string"?s=Os(i):(s={...i},Ke(!s.pathname||!s.pathname.includes("?"),sh("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),sh("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),sh("#","search","hash",s)));let l=i===""||s.pathname==="",u=l?"/":s.pathname,c;if(u==null)c=t;else{let _=e.length-1;if(!r&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),_-=1;s.pathname=y.join("/")}c=_>=0?e[_]:"/"}let h=Z1(s,c),f=u&&u!=="/"&&u.endsWith("/"),p=(l||u===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var hi=i=>i.join("/").replace(/\/\/+/g,"/"),Q1=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),J1=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,ev=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function tv(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var qm=["POST","PUT","PATCH","DELETE"];new Set(qm);var nv=["GET",...qm];new Set(nv);var Ns=X.createContext(null);Ns.displayName="DataRouter";var $a=X.createContext(null);$a.displayName="DataRouterState";var Qm=X.createContext({isTransitioning:!1});Qm.displayName="ViewTransition";var iv=X.createContext(new Map);iv.displayName="Fetchers";var rv=X.createContext(null);rv.displayName="Await";var Vn=X.createContext(null);Vn.displayName="Navigation";var Qo=X.createContext(null);Qo.displayName="Location";var mi=X.createContext({outlet:null,matches:[],isDataRoute:!1});mi.displayName="Route";var Hh=X.createContext(null);Hh.displayName="RouteError";function sv(i,{relative:e}={}){Ke(Jo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=X.useContext(Vn),{hash:s,pathname:l,search:u}=el(i,{relative:e}),c=l;return t!=="/"&&(c=l==="/"?t:hi([t,l])),r.createHref({pathname:c,search:u,hash:s})}function Jo(){return X.useContext(Qo)!=null}function Ar(){return Ke(Jo(),"useLocation() may be used only in the context of a <Router> component."),X.useContext(Qo).location}var Jm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function e_(i){X.useContext(Vn).static||X.useLayoutEffect(i)}function ov(){let{isDataRoute:i}=X.useContext(mi);return i?vv():lv()}function lv(){Ke(Jo(),"useNavigate() may be used only in the context of a <Router> component.");let i=X.useContext(Ns),{basename:e,navigator:t}=X.useContext(Vn),{matches:r}=X.useContext(mi),{pathname:s}=Ar(),l=JSON.stringify(Zm(r)),u=X.useRef(!1);return e_(()=>{u.current=!0}),X.useCallback((h,f={})=>{if(Yn(u.current,Jm),!u.current)return;if(typeof h=="number"){t.go(h);return}let p=$m(h,JSON.parse(l),s,f.relative==="path");i==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:hi([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,l,s,i])}X.createContext(null);function el(i,{relative:e}={}){let{matches:t}=X.useContext(mi),{pathname:r}=Ar(),s=JSON.stringify(Zm(t));return X.useMemo(()=>$m(i,JSON.parse(s),r,e==="path"),[i,s,r,e])}function av(i,e){return t_(i,e)}function t_(i,e,t,r){var C;Ke(Jo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=X.useContext(Vn),{matches:l}=X.useContext(mi),u=l[l.length-1],c=u?u.params:{},h=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let R=p&&p.path||"";n_(h,!p||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let _=Ar(),y;if(e){let R=typeof e=="string"?Os(e):e;Ke(f==="/"||((C=R.pathname)==null?void 0:C.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${R.pathname}" was given in the \`location\` prop.`),y=R}else y=_;let E=y.pathname||"/",v=E;if(f!=="/"){let R=f.replace(/^\//,"").split("/");v="/"+E.replace(/^\//,"").split("/").slice(R.length).join("/")}let w=Vm(i,{pathname:v});Yn(p||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Yn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=fv(w&&w.map(R=>Object.assign({},R,{params:Object.assign({},c,R.params),pathname:hi([f,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:hi([f,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),l,t,r);return e&&S?X.createElement(Qo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},S):S}function uv(){let i=yv(),e=tv(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",i),u=X.createElement(X.Fragment,null,X.createElement("p",null," Hey developer "),X.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",X.createElement("code",{style:l},"ErrorBoundary")," or"," ",X.createElement("code",{style:l},"errorElement")," prop on your route.")),X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:s},t):null,u)}var cv=X.createElement(uv,null),hv=class extends X.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?X.createElement(mi.Provider,{value:this.props.routeContext},X.createElement(Hh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dv({routeContext:i,match:e,children:t}){let r=X.useContext(Ns);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),X.createElement(mi.Provider,{value:i},t)}function fv(i,e=[],t=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let s=i,l=t==null?void 0:t.errors;if(l!=null){let h=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Ke(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let u=!1,c=-1;if(t)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:_}=t,y=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!_||_[f.route.id]===void 0);if(f.route.lazy||y){u=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((h,f,p)=>{let _,y=!1,E=null,v=null;t&&(_=l&&f.route.id?l[f.route.id]:void 0,E=f.route.errorElement||cv,u&&(c<0&&p===0?(n_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):c===p&&(y=!0,v=f.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,p+1)),S=()=>{let C;return _?C=E:y?C=v:f.route.Component?C=X.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,X.createElement(dv,{match:f,routeContext:{outlet:h,matches:w,isDataRoute:t!=null},children:C})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?X.createElement(hv,{location:t.location,revalidation:t.revalidation,component:E,error:_,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):S()},null)}function Zh(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gv(i){let e=X.useContext(Ns);return Ke(e,Zh(i)),e}function pv(i){let e=X.useContext($a);return Ke(e,Zh(i)),e}function mv(i){let e=X.useContext(mi);return Ke(e,Zh(i)),e}function $h(i){let e=mv(i),t=e.matches[e.matches.length-1];return Ke(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function _v(){return $h("useRouteId")}function yv(){var r;let i=X.useContext(Hh),e=pv("useRouteError"),t=$h("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[t]}function vv(){let{router:i}=gv("useNavigate"),e=$h("useNavigate"),t=X.useRef(!1);return e_(()=>{t.current=!0}),X.useCallback(async(s,l={})=>{Yn(t.current,Jm),t.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:e,...l}))},[i,e])}var Dp={};function n_(i,e,t){!e&&!Dp[i]&&(Dp[i]=!0,Yn(!1,t))}X.memo(Ev);function Ev({routes:i,future:e,state:t}){return t_(i,void 0,t,e)}function ka(i){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xv({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:l=!1}){Ke(!Jo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=i.replace(/^\/*/,"/"),c=X.useMemo(()=>({basename:u,navigator:s,static:l,future:{}}),[u,s,l]);typeof t=="string"&&(t=Os(t));let{pathname:h="/",search:f="",hash:p="",state:_=null,key:y="default"}=t,E=X.useMemo(()=>{let v=tr(h,u);return v==null?null:{location:{pathname:v,search:f,hash:p,state:_,key:y},navigationType:r}},[u,h,f,p,_,y,r]);return Yn(E!=null,`<Router basename="${u}"> is not able to match the URL "${h}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:X.createElement(Vn.Provider,{value:c},X.createElement(Qo.Provider,{children:e,value:E}))}function wv({children:i,location:e}){return av(Ph(i),e)}function Ph(i,e=[]){let t=[];return X.Children.forEach(i,(r,s)=>{if(!X.isValidElement(r))return;let l=[...e,s];if(r.type===X.Fragment){t.push.apply(t,Ph(r.props.children,l));return}Ke(r.type===ka,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Ph(r.props.children,l)),t.push(u)}),t}var Aa="get",Ma="application/x-www-form-urlencoded";function qa(i){return i!=null&&typeof i.tagName=="string"}function Sv(i){return qa(i)&&i.tagName.toLowerCase()==="button"}function Cv(i){return qa(i)&&i.tagName.toLowerCase()==="form"}function Rv(i){return qa(i)&&i.tagName.toLowerCase()==="input"}function Tv(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Iv(i,e){return i.button===0&&(!e||e==="_self")&&!Tv(i)}var ya=null;function Lv(){if(ya===null)try{new FormData(document.createElement("form"),0),ya=!1}catch{ya=!0}return ya}var Pv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oh(i){return i!=null&&!Pv.has(i)?(Yn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ma}"`),null):i}function kv(i,e){let t,r,s,l,u;if(Cv(i)){let c=i.getAttribute("action");r=c?tr(c,e):null,t=i.getAttribute("method")||Aa,s=oh(i.getAttribute("enctype"))||Ma,l=new FormData(i)}else if(Sv(i)||Rv(i)&&(i.type==="submit"||i.type==="image")){let c=i.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=i.getAttribute("formaction")||c.getAttribute("action");if(r=h?tr(h,e):null,t=i.getAttribute("formmethod")||c.getAttribute("method")||Aa,s=oh(i.getAttribute("formenctype"))||oh(c.getAttribute("enctype"))||Ma,l=new FormData(c,i),!Lv()){let{name:f,type:p,value:_}=i;if(p==="image"){let y=f?`${f}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else f&&l.append(f,_)}}else{if(qa(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Aa,r=null,s=Ma,u=i}return l&&s==="text/plain"&&(u=l,l=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:l,body:u}}function qh(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function Av(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Mv(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Dv(i,e,t){let r=await Promise.all(i.map(async s=>{let l=e.routes[s.route.id];if(l){let u=await Av(l,t);return u.links?u.links():[]}return[]}));return zv(r.flat(1).filter(Mv).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Fp(i,e,t,r,s,l){let u=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,c=(h,f)=>{var p;return t[f].pathname!==h.pathname||((p=t[f].route.path)==null?void 0:p.endsWith("*"))&&t[f].params["*"]!==h.params["*"]};return l==="assets"?e.filter((h,f)=>u(h,f)||c(h,f)):l==="data"?e.filter((h,f)=>{var _;let p=r.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(u(h,f)||c(h,f))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(i,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Fv(i,e){return Ov(i.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function Ov(i){return[...new Set(i)]}function Nv(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function zv(i,e){let t=new Set;return new Set(e),i.reduce((r,s)=>{let l=JSON.stringify(Nv(s));return t.has(l)||(t.add(l),r.push({key:l,link:s})),r},[])}function Gv(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function bv(){let i=X.useContext(Ns);return qh(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function Uv(){let i=X.useContext($a);return qh(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Qh=X.createContext(void 0);Qh.displayName="FrameworkContext";function i_(){let i=X.useContext(Qh);return qh(i,"You must render this element inside a <HydratedRouter> element"),i}function Wv(i,e){let t=X.useContext(Qh),[r,s]=X.useState(!1),[l,u]=X.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:_}=e,y=X.useRef(null);X.useEffect(()=>{if(i==="render"&&u(!0),i==="viewport"){let w=C=>{C.forEach(R=>{u(R.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[i]),X.useEffect(()=>{if(r){let w=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(w)}}},[r]);let E=()=>{s(!0)},v=()=>{s(!1),u(!1)};return t?i!=="intent"?[l,y,{}]:[l,y,{onFocus:Ro(c,E),onBlur:Ro(h,v),onMouseEnter:Ro(f,E),onMouseLeave:Ro(p,v),onTouchStart:Ro(_,E)}]:[!1,y,{}]}function Ro(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function Xv({page:i,...e}){let{router:t}=bv(),r=X.useMemo(()=>Vm(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?X.createElement(Bv,{page:i,matches:r,...e}):null}function jv(i){let{manifest:e,routeModules:t}=i_(),[r,s]=X.useState([]);return X.useEffect(()=>{let l=!1;return Dv(i,e,t).then(u=>{l||s(u)}),()=>{l=!0}},[i,e,t]),r}function Bv({page:i,matches:e,...t}){let r=Ar(),{manifest:s,routeModules:l}=i_(),{loaderData:u,matches:c}=Uv(),h=X.useMemo(()=>Fp(i,e,c,s,r,"data"),[i,e,c,s,r]),f=X.useMemo(()=>Fp(i,e,c,s,r,"assets"),[i,e,c,s,r]),p=X.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let E=new Set,v=!1;if(e.forEach(S=>{var R;let C=s.routes[S.route.id];!C||!C.hasLoader||(!h.some(M=>M.route.id===S.route.id)&&S.route.id in u&&((R=l[S.route.id])!=null&&R.shouldRevalidate)||C.hasClientLoader?v=!0:E.add(S.route.id))}),E.size===0)return[];let w=Gv(i);return v&&E.size>0&&w.searchParams.set("_routes",e.filter(S=>E.has(S.route.id)).map(S=>S.route.id).join(",")),[w.pathname+w.search]},[u,r,s,h,e,i,l]),_=X.useMemo(()=>Fv(f,s),[f,s]),y=jv(f);return X.createElement(X.Fragment,null,p.map(E=>X.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),_.map(E=>X.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),y.map(({key:E,link:v})=>X.createElement("link",{key:E,...v})))}function Yv(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var r_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{r_&&(window.__reactRouterVersion="7.1.3")}catch{}function Vv({basename:i,children:e,window:t}){let r=X.useRef();r.current==null&&(r.current=D1({window:t,v5Compat:!0}));let s=r.current,[l,u]=X.useState({action:s.action,location:s.location}),c=X.useCallback(h=>{X.startTransition(()=>u(h))},[u]);return X.useLayoutEffect(()=>s.listen(c),[s,c]),X.createElement(xv,{basename:i,children:e,location:l.location,navigationType:l.action,navigator:s})}var s_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Go=X.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:l,replace:u,state:c,target:h,to:f,preventScrollReset:p,viewTransition:_,...y},E){let{basename:v}=X.useContext(Vn),w=typeof f=="string"&&s_.test(f),S,C=!1;if(typeof f=="string"&&w&&(S=f,r_))try{let U=new URL(window.location.href),Y=f.startsWith("//")?new URL(U.protocol+f):new URL(f),ne=tr(Y.pathname,v);Y.origin===U.origin&&ne!=null?f=ne+Y.search+Y.hash:C=!0}catch{Yn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=sv(f,{relative:s}),[M,L,A]=Wv(r,y),W=$v(f,{replace:u,state:c,target:h,preventScrollReset:p,relative:s,viewTransition:_});function V(U){e&&e(U),U.defaultPrevented||W(U)}let b=X.createElement("a",{...y,...A,href:S||R,onClick:C||l?e:V,ref:Yv(E,L),target:h,"data-discover":!w&&t==="render"?"true":void 0});return M&&!w?X.createElement(X.Fragment,null,b,X.createElement(Xv,{page:R})):b});Go.displayName="Link";var Kv=X.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:l,to:u,viewTransition:c,children:h,...f},p){let _=el(u,{relative:f.relative}),y=Ar(),E=X.useContext($a),{navigator:v,basename:w}=X.useContext(Vn),S=E!=null&&tE(_)&&c===!0,C=v.encodeLocation?v.encodeLocation(_).pathname:_.pathname,R=y.pathname,M=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(R=R.toLowerCase(),M=M?M.toLowerCase():null,C=C.toLowerCase()),M&&w&&(M=tr(M,w)||M);const L=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let A=R===C||!s&&R.startsWith(C)&&R.charAt(L)==="/",W=M!=null&&(M===C||!s&&M.startsWith(C)&&M.charAt(C.length)==="/"),V={isActive:A,isPending:W,isTransitioning:S},b=A?e:void 0,U;typeof r=="function"?U=r(V):U=[r,A?"active":null,W?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let Y=typeof l=="function"?l(V):l;return X.createElement(Go,{...f,"aria-current":b,className:U,ref:p,style:Y,to:u,viewTransition:c},typeof h=="function"?h(V):h)});Kv.displayName="NavLink";var Hv=X.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:l,method:u=Aa,action:c,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:_,...y},E)=>{let v=Jv(),w=eE(c,{relative:f}),S=u.toLowerCase()==="get"?"get":"post",C=typeof c=="string"&&s_.test(c),R=M=>{if(h&&h(M),M.defaultPrevented)return;M.preventDefault();let L=M.nativeEvent.submitter,A=(L==null?void 0:L.getAttribute("formmethod"))||u;v(L||M.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:l,relative:f,preventScrollReset:p,viewTransition:_})};return X.createElement("form",{ref:E,method:S,action:w,onSubmit:r?h:R,...y,"data-discover":!C&&i==="render"?"true":void 0})});Hv.displayName="Form";function Zv(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o_(i){let e=X.useContext(Ns);return Ke(e,Zv(i)),e}function $v(i,{target:e,replace:t,state:r,preventScrollReset:s,relative:l,viewTransition:u}={}){let c=ov(),h=Ar(),f=el(i,{relative:l});return X.useCallback(p=>{if(Iv(p,e)){p.preventDefault();let _=t!==void 0?t:zo(h)===zo(f);c(i,{replace:_,state:r,preventScrollReset:s,relative:l,viewTransition:u})}},[h,c,f,t,r,e,i,s,l,u])}var qv=0,Qv=()=>`__${String(++qv)}__`;function Jv(){let{router:i}=o_("useSubmit"),{basename:e}=X.useContext(Vn),t=_v();return X.useCallback(async(r,s={})=>{let{action:l,method:u,encType:c,formData:h,body:f}=kv(r,e);if(s.navigate===!1){let p=s.fetcherKey||Qv();await i.fetch(p,t,s.action||l,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||u,formEncType:s.encType||c,flushSync:s.flushSync})}else await i.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||u,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,e,t])}function eE(i,{relative:e}={}){let{basename:t}=X.useContext(Vn),r=X.useContext(mi);Ke(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...el(i||".",{relative:e})},u=Ar();if(i==null){l.search=u.search;let c=new URLSearchParams(l.search),h=c.getAll("index");if(h.some(p=>p==="")){c.delete("index"),h.filter(_=>_).forEach(_=>c.append("index",_));let p=c.toString();l.search=p?`?${p}`:""}}return(!i||i===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:hi([t,l.pathname])),zo(l)}function tE(i,e={}){let t=X.useContext(Qm);Ke(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=o_("useViewTransitionState"),s=el(i,{relative:e.relative});if(!t.isTransitioning)return!1;let l=tr(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=tr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Fa(s.pathname,u)!=null||Fa(s.pathname,l)!=null}new TextEncoder;let hn=[{id:1,name:"John Doe",description:"Software Engineer",location:{lat:37.7749,lng:-122.4194}},{id:2,name:"Jane Smith",description:"Graphic Designer",location:{lat:34.0522,lng:-118.2437}}];const Da=async()=>hn,nE=async i=>{const e=hn.length>0?hn[hn.length-1].id+1:1;return hn.push({...i,id:e}),hn},iE=async i=>(hn=hn.map(e=>e.id===i.id?i:e),hn),rE=async i=>(hn=hn.filter(e=>e.id!==i),hn),sE=()=>{const[i,e]=X.useState([]),[t,r]=X.useState({id:null,name:"",description:"",location:{lat:"",lng:""}}),[s,l]=X.useState(!1);X.useEffect(()=>{Da().then(e)},[]);const u=p=>{const{name:_,value:y}=p.target;r(E=>({...E,[_]:_.includes("location")?{...E.location,[_.split(".")[1]]:parseFloat(y)}:y}))},c=async()=>{s?await iE(t):await nE(t),e(await Da()),r({id:null,name:"",description:"",location:{lat:"",lng:""}}),l(!1)},h=p=>{r(p),l(!0)},f=async p=>{await rE(p),e(await Da())};return Ee.jsxs("div",{children:[Ee.jsx("h2",{children:"Admin Panel"}),Ee.jsx("input",{type:"text",name:"name",placeholder:"Name",value:t.name,onChange:u}),Ee.jsx("textarea",{name:"description",placeholder:"Description",value:t.description,onChange:u}),Ee.jsx("input",{type:"number",name:"location.lat",placeholder:"Latitude",value:t.location.lat,onChange:u}),Ee.jsx("input",{type:"number",name:"location.lng",placeholder:"Longitude",value:t.location.lng,onChange:u}),Ee.jsx("button",{onClick:c,children:s?"Update Profile":"Add Profile"}),Ee.jsx("h3",{children:"Profile List"}),Ee.jsx("ul",{children:i.map(p=>Ee.jsxs("li",{children:[Ee.jsx("span",{children:p.name}),Ee.jsx("button",{onClick:()=>h(p),children:"Edit"}),Ee.jsx("button",{onClick:()=>f(p.id),children:"Delete"})]},p.id))})]})},oE=({profile:i,onSummaryClick:e})=>Ee.jsxs("div",{className:"profile-card",children:[Ee.jsx("h3",{children:i.name}),Ee.jsx("p",{children:i.description}),Ee.jsx("button",{onClick:()=>e(i),children:"Show on Map"}),Ee.jsx(Go,{to:`/profile/${i.id}`,children:"View Details"})]}),lE=({profiles:i,onSummaryClick:e})=>!i||i.length===0?Ee.jsx("p",{children:"No profiles available"}):Ee.jsx("div",{className:"profile-list",children:i.map(t=>Ee.jsx(oE,{profile:t,onSummaryClick:e},t.id))});class _i{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Is={PROPERTYCHANGE:"propertychange"};class Qa{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function aE(i,e,t){let r,s;t=t||qi;let l=0,u=i.length,c=!1;for(;l<u;)r=l+(u-l>>1),s=+t(i[r],e),s<0?l=r+1:(u=r,c=!s);return c?l:~l}function qi(i,e){return i>e?1:i<e?-1:0}function uE(i,e){return i<e?1:i>e?-1:0}function Jh(i,e,t){if(i[0]<=e)return 0;const r=i.length;if(e<=i[r-1])return r-1;if(typeof t=="function"){for(let s=1;s<r;++s){const l=i[s];if(l===e)return s;if(l<e)return t(e,i[s-1],l)>0?s-1:s}return r-1}if(t>0){for(let s=1;s<r;++s)if(i[s]<e)return s-1;return r-1}if(t<0){for(let s=1;s<r;++s)if(i[s]<=e)return s;return r-1}for(let s=1;s<r;++s){if(i[s]==e)return s;if(i[s]<e)return i[s-1]-e<e-i[s]?s-1:s}return r-1}function cE(i,e,t){for(;e<t;){const r=i[e];i[e]=i[t],i[t]=r,++e,--t}}function ed(i,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let s=0;s<r;s++)i[i.length]=t[s]}function rr(i,e){const t=i.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(i[r]!==e[r])return!1;return!0}function hE(i,e,t){const r=e;return i.every(function(s,l){if(l===0)return!0;const u=r(i[l-1],s);return!(u>0||u===0)})}function bo(){return!0}function Ja(){return!1}function Ls(){}function l_(i){let e,t,r;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==r||!rr(s,t))&&(r=this,t=s,e=i.apply(this,arguments)),e}}function dE(i){function e(){let t;try{t=i()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function tl(i){for(const e in i)delete i[e]}function Ps(i){let e;for(e in i)return!1;return!e}class eu extends Qa{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),s=r[e]||(r[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,s=this.listeners_&&this.listeners_[r];if(!s)return;const l=t?new _i(e):e;l.target||(l.target=this.eventTarget_||this);const u=this.dispatching_||(this.dispatching_={}),c=this.pendingRemovals_||(this.pendingRemovals_={});r in u||(u[r]=0,c[r]=0),++u[r];let h;for(let f=0,p=s.length;f<p;++f)if("handleEvent"in s[f]?h=s[f].handleEvent(l):h=s[f].call(this,l),h===!1||l.propagationStopped){h=!1;break}if(--u[r]===0){let f=c[r];for(delete c[r];f--;)this.removeEventListener(r,Ls);delete u[r]}return h}disposeInternal(){this.listeners_&&tl(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const s=r.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[s]=Ls,++this.pendingRemovals_[e]):(r.splice(s,1),r.length===0&&delete this.listeners_[e]))}}const xe={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Pe(i,e,t,r,s){if(s){const u=t;t=function(){i.removeEventListener(e,t),u.apply(r??this,arguments)}}else r&&r!==i&&(t=t.bind(r));const l={target:i,type:e,listener:t};return i.addEventListener(e,t),l}function Oa(i,e,t,r){return Pe(i,e,t,r,!0)}function We(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),tl(i))}class nl extends eu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(xe.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,s=new Array(r);for(let l=0;l<r;++l)s[l]=Pe(this,e[l],t);return s}return Pe(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const s=e.length;r=new Array(s);for(let l=0;l<s;++l)r[l]=Oa(this,e[l],t)}else r=Oa(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)fE(r);else if(Array.isArray(e))for(let s=0,l=e.length;s<l;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}nl.prototype.on;nl.prototype.once;nl.prototype.un;function fE(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)We(i[e]);else We(i)}function Me(){throw new Error("Unimplemented abstract method.")}let gE=0;function Oe(i){return i.ol_uid||(i.ol_uid=String(++gE))}class Op extends _i{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Kn extends nl{constructor(e){super(),this.on,this.once,this.un,Oe(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new Op(r,e,t)),r=Is.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new Op(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const s=this.values_||(this.values_={});if(r)s[e]=t;else{const l=s[e];s[e]=t,l!==t&&this.notify(e,l)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],Ps(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const bt={ADD:"add",REMOVE:"remove"},Np={LENGTH:"length"};class va extends _i{constructor(e,t,r){super(e),this.element=t,this.index=r}}class jn extends Kn{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,s=this.array_.length;r<s;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,s=t.length;r<s;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Np.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new va(bt.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,s=t.length;r<s;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new va(bt.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new va(bt.REMOVE,s,e)),this.dispatchEvent(new va(bt.ADD,t,e))}updateLength_(){this.set(Np.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,s=this.array_.length;r<s;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}function De(i,e){if(!i)throw new Error(e)}class td extends Kn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new td(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(We(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Pe(e,xe.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?pE(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function pE(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(De(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}new Array(6);function kn(){return[1,0,0,1,0,0]}function mE(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function ct(i,e){const t=e[0],r=e[1];return e[0]=i[0]*t+i[2]*r+i[4],e[1]=i[1]*t+i[3]*r+i[5],e}function gi(i,e,t,r,s,l,u,c){const h=Math.sin(l),f=Math.cos(l);return i[0]=r*f,i[1]=s*h,i[2]=-r*h,i[3]=s*f,i[4]=u*r*f-c*r*h+e,i[5]=u*s*h+c*s*f+t,i}function a_(i,e){const t=_E(e);De(t!==0,"Transformation matrix cannot be inverted");const r=e[0],s=e[1],l=e[2],u=e[3],c=e[4],h=e[5];return i[0]=u/t,i[1]=-s/t,i[2]=-l/t,i[3]=r/t,i[4]=(l*h-u*c)/t,i[5]=-(r*h-s*c)/t,i}function _E(i){return i[0]*i[3]-i[1]*i[2]}const zp=[1e6,1e6,1e6,1e6,2,2];function yE(i){return"matrix("+i.map((t,r)=>Math.round(t*zp[r])/zp[r]).join(", ")+")"}const ut={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Gp(i){const e=qt();for(let t=0,r=i.length;t<r;++t)No(e,i[t]);return e}function nd(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function u_(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function c_(i,e,t){let r,s;return e<i[0]?r=i[0]-e:i[2]<e?r=e-i[2]:r=0,t<i[1]?s=i[1]-t:i[3]<t?s=t-i[3]:s=0,r*r+s*s}function ks(i,e){return h_(i,e[0],e[1])}function ys(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function h_(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function kh(i,e){const t=i[0],r=i[1],s=i[2],l=i[3],u=e[0],c=e[1];let h=ut.UNKNOWN;return u<t?h=h|ut.LEFT:u>s&&(h=h|ut.RIGHT),c<r?h=h|ut.BELOW:c>l&&(h=h|ut.ABOVE),h===ut.UNKNOWN&&(h=ut.INTERSECTING),h}function qt(){return[1/0,1/0,-1/0,-1/0]}function nr(i,e,t,r,s){return s?(s[0]=i,s[1]=e,s[2]=t,s[3]=r,s):[i,e,t,r]}function tu(i){return nr(1/0,1/0,-1/0,-1/0,i)}function d_(i,e){const t=i[0],r=i[1];return nr(t,r,t,r,e)}function id(i,e,t,r,s){const l=tu(s);return g_(l,i,e,t,r)}function Uo(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function f_(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function No(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function g_(i,e,t,r,s){for(;t<r;t+=s)vE(i,e[t],e[t+1]);return i}function vE(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function p_(i,e){let t;return t=e(nu(i)),t||(t=e(iu(i)),t)||(t=e(ru(i)),t)||(t=e(pi(i)),t)?t:!1}function Wo(i){let e=0;return su(i)||(e=ke(i)*ht(i)),e}function nu(i){return[i[0],i[1]]}function iu(i){return[i[2],i[1]]}function Pr(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function EE(i,e){let t;if(e==="bottom-left")t=nu(i);else if(e==="bottom-right")t=iu(i);else if(e==="top-left")t=pi(i);else if(e==="top-right")t=ru(i);else throw new Error("Invalid corner");return t}function Ah(i,e,t,r,s){const[l,u,c,h,f,p,_,y]=xE(i,e,t,r);return nr(Math.min(l,c,f,_),Math.min(u,h,p,y),Math.max(l,c,f,_),Math.max(u,h,p,y),s)}function xE(i,e,t,r){const s=e*r[0]/2,l=e*r[1]/2,u=Math.cos(t),c=Math.sin(t),h=s*u,f=s*c,p=l*u,_=l*c,y=i[0],E=i[1];return[y-h+_,E-f-p,y-h-_,E-f+p,y+h-_,E+f+p,y+h+_,E+f-p,y-h+_,E-f-p]}function ht(i){return i[3]-i[1]}function Pn(i,e,t){const r=t||qt();return Xt(i,e)?(i[0]>e[0]?r[0]=i[0]:r[0]=e[0],i[1]>e[1]?r[1]=i[1]:r[1]=e[1],i[2]<e[2]?r[2]=i[2]:r[2]=e[2],i[3]<e[3]?r[3]=i[3]:r[3]=e[3]):tu(r),r}function pi(i){return[i[0],i[3]]}function ru(i){return[i[2],i[3]]}function ke(i){return i[2]-i[0]}function Xt(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function su(i){return i[2]<i[0]||i[3]<i[1]}function wE(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function SE(i,e,t){let r=!1;const s=kh(i,e),l=kh(i,t);if(s===ut.INTERSECTING||l===ut.INTERSECTING)r=!0;else{const u=i[0],c=i[1],h=i[2],f=i[3],p=e[0],_=e[1],y=t[0],E=t[1],v=(E-_)/(y-p);let w,S;l&ut.ABOVE&&!(s&ut.ABOVE)&&(w=y-(E-f)/v,r=w>=u&&w<=h),!r&&l&ut.RIGHT&&!(s&ut.RIGHT)&&(S=E-(y-h)*v,r=S>=c&&S<=f),!r&&l&ut.BELOW&&!(s&ut.BELOW)&&(w=y-(E-c)/v,r=w>=u&&w<=h),!r&&l&ut.LEFT&&!(s&ut.LEFT)&&(S=E-(y-u)*v,r=S>=c&&S<=f)}return r}function m_(i,e){const t=e.getExtent(),r=Pr(i);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const s=ke(t),u=Math.floor((r[0]-t[0])/s)*s;i[0]-=u,i[2]-=u}return i}function rd(i,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[r[0],i[1],r[2],i[3]]];m_(i,e);const s=ke(r);if(ke(i)>s&&!t)return[[r[0],i[1],r[2],i[3]]];if(i[0]<r[0])return[[i[0]+s,i[1],r[2],i[3]],[r[0],i[1],i[2],i[3]]];if(i[2]>r[2])return[[i[0],i[1],r[2],i[3]],[r[0],i[1],i[2]-s,i[3]]]}return[i]}const sd={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class od{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||sd[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const il=6378137,vs=Math.PI*il,CE=[-vs,-vs,vs,vs],RE=[-180,-85,180,85],Ea=il*Math.log(Math.tan(Math.PI/2));class os extends od{constructor(e){super({code:e,units:"m",extent:CE,global:!0,worldExtent:RE,getPointResolution:function(t,r){return t/Math.cosh(r[1]/il)}})}}const bp=[new os("EPSG:3857"),new os("EPSG:102100"),new os("EPSG:102113"),new os("EPSG:900913"),new os("http://www.opengis.net/def/crs/EPSG/0/3857"),new os("http://www.opengis.net/gml/srs/epsg.xml#3857")];function TE(i,e,t,r){const s=i.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=i.slice():e=new Array(s));for(let l=0;l<s;l+=r){e[l]=vs*i[l]/180;let u=il*Math.log(Math.tan(Math.PI*(+i[l+1]+90)/360));u>Ea?u=Ea:u<-Ea&&(u=-Ea),e[l+1]=u}return e}function IE(i,e,t,r){const s=i.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=i.slice():e=new Array(s));for(let l=0;l<s;l+=r)e[l]=180*i[l]/vs,e[l+1]=360*Math.atan(Math.exp(i[l+1]/il))/Math.PI-90;return e}const LE=6378137,Up=[-180,-90,180,90],PE=Math.PI*LE/180;class wr extends od{constructor(e,t){super({code:e,units:"degrees",extent:Up,axisOrientation:t,global:!0,metersPerUnit:PE,worldExtent:Up})}}const Wp=[new wr("CRS:84"),new wr("EPSG:4326","neu"),new wr("urn:ogc:def:crs:OGC:1.3:CRS84"),new wr("urn:ogc:def:crs:OGC:2:84"),new wr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new wr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new wr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Mh={};function kE(i){return Mh[i]||Mh[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function AE(i,e){Mh[i]=e}let ws={};function Xo(i,e,t){const r=i.getCode(),s=e.getCode();r in ws||(ws[r]={}),ws[r][s]=t}function lh(i,e){return i in ws&&e in ws[i]?ws[i][e]:null}function $e(i,e,t){return Math.min(Math.max(i,e),t)}function ME(i,e,t,r,s,l){const u=s-t,c=l-r;if(u!==0||c!==0){const h=((i-t)*u+(e-r)*c)/(u*u+c*c);h>1?(t=s,r=l):h>0&&(t+=u*h,r+=c*h)}return Ss(i,e,t,r)}function Ss(i,e,t,r){const s=t-i,l=r-e;return s*s+l*l}function DE(i){const e=i.length;for(let r=0;r<e;r++){let s=r,l=Math.abs(i[r][r]);for(let c=r+1;c<e;c++){const h=Math.abs(i[c][r]);h>l&&(l=h,s=c)}if(l===0)return null;const u=i[s];i[s]=i[r],i[r]=u;for(let c=r+1;c<e;c++){const h=-i[c][r]/i[r][r];for(let f=r;f<e+1;f++)r==f?i[c][f]=0:i[c][f]+=h*i[r][f]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=i[r][e]/i[r][r];for(let s=r-1;s>=0;s--)i[s][e]-=i[s][r]*t[r]}return t}function Xp(i){return i*180/Math.PI}function Qi(i){return i*Math.PI/180}function Cs(i,e){const t=i%e;return t*e<0?t+e:t}function cn(i,e,t){return i+t*(e-i)}function ld(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function xa(i,e){return Math.floor(ld(i,e))}function wa(i,e){return Math.ceil(ld(i,e))}function Dh(i,e,t){if(i>=e&&i<t)return i;const r=t-e;return((i-e)%r+r)%r+e}function FE(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function Na(i,e){let t=!0;for(let r=i.length-1;r>=0;--r)if(i[r]!=e[r]){t=!1;break}return t}function ad(i,e){const t=Math.cos(e),r=Math.sin(e),s=i[0]*t-i[1]*r,l=i[1]*t+i[0]*r;return i[0]=s,i[1]=l,i}function OE(i,e){return i[0]*=e,i[1]*=e,i}function __(i,e){if(e.canWrapX()){const t=ke(e.getExtent()),r=NE(i,e,t);r&&(i[0]-=r*t)}return i}function NE(i,e,t){const r=e.getExtent();let s=0;return e.canWrapX()&&(i[0]<r[0]||i[0]>r[2])&&(t=t||ke(r),s=Math.floor((i[0]-r[0])/t)),s}const zE=63710088e-1;function jp(i,e,t){t=t||zE;const r=Qi(i[1]),s=Qi(e[1]),l=(s-r)/2,u=Qi(e[0]-i[0])/2,c=Math.sin(l)*Math.sin(l)+Math.sin(u)*Math.sin(u)*Math.cos(r)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}const za=.9996,gn=.00669438,ou=gn*gn,lu=ou*gn,Rr=gn/(1-gn),Bp=Math.sqrt(1-gn),As=(1-Bp)/(1+Bp),y_=As*As,ud=y_*As,cd=ud*As,v_=cd*As,E_=1-gn/4-3*ou/64-5*lu/256,GE=3*gn/8+3*ou/32+45*lu/1024,bE=15*ou/256+45*lu/1024,UE=35*lu/3072,WE=3/2*As-27/32*ud+269/512*v_,XE=21/16*y_-55/32*cd,jE=151/96*ud-417/128*v_,BE=1097/512*cd,Ga=6378137;function YE(i,e,t){const r=i-5e5,u=(t.north?e:e-1e7)/za/(Ga*E_),c=u+WE*Math.sin(2*u)+XE*Math.sin(4*u)+jE*Math.sin(6*u)+BE*Math.sin(8*u),h=Math.sin(c),f=h*h,p=Math.cos(c),_=h/p,y=_*_,E=y*y,v=1-gn*f,w=Math.sqrt(1-gn*f),S=Ga/w,C=(1-gn)/v,R=Rr*p**2,M=R*R,L=r/(S*za),A=L*L,W=A*L,V=W*L,b=V*L,U=b*L,Y=c-_/C*(A/2-V/24*(5+3*y+10*R-4*M-9*Rr))+U/720*(61+90*y+298*R+45*E-252*Rr-3*M);let ne=(L-W/6*(1+2*y+R)+b/120*(5-2*R+28*y-3*M+8*Rr+24*E))/p;return ne=Dh(ne+Qi(x_(t.number)),-Math.PI,Math.PI),[Xp(ne),Xp(Y)]}const Yp=-80,Vp=84,VE=-180,KE=180;function HE(i,e,t){i=Dh(i,VE,KE),e<Yp?e=Yp:e>Vp&&(e=Vp);const r=Qi(e),s=Math.sin(r),l=Math.cos(r),u=s/l,c=u*u,h=c*c,f=Qi(i),p=x_(t.number),_=Qi(p),y=Ga/Math.sqrt(1-gn*s**2),E=Rr*l**2,v=l*Dh(f-_,-Math.PI,Math.PI),w=v*v,S=w*v,C=S*v,R=C*v,M=R*v,L=Ga*(E_*r-GE*Math.sin(2*r)+bE*Math.sin(4*r)-UE*Math.sin(6*r)),A=za*y*(v+S/6*(1-c+E)+R/120*(5-18*c+h+72*E-58*Rr))+5e5;let W=za*(L+y*u*(w/2+C/24*(5-c+9*E+4*E**2)+M/720*(61-58*c+h+600*E-330*Rr)));return t.north||(W+=1e7),[A,W]}function x_(i){return(i-1)*6-180+3}const ZE=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function w_(i){let e=0;for(const s of ZE){const l=i.match(s);if(l){e=parseInt(l[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function Kp(i,e){return function(t,r,s,l){const u=t.length;s=s>1?s:2,l=l??s,r||(s>2?r=t.slice():r=new Array(u));for(let c=0;c<u;c+=l){const h=t[c],f=t[c+1],p=i(h,f,e);r[c]=p[0],r[c+1]=p[1]}return r}}function $E(i){return w_(i)?new od({code:i,units:"m"}):null}function qE(i){const e=w_(i.getCode());return e?{forward:Kp(HE,e),inverse:Kp(YE,e)}:null}function S_(...i){console.warn(...i)}const QE=[qE],JE=[$E];let Fh=!0;function C_(i){Fh=!1}function hd(i,e){if(e!==void 0){for(let t=0,r=i.length;t<r;++t)e[t]=i[t];e=e}else e=i.slice();return e}function Oh(i){AE(i.getCode(),i),Xo(i,i,hd)}function ex(i){i.forEach(Oh)}function Yt(i){if(typeof i!="string")return i;const e=kE(i);if(e)return e;for(const t of JE){const r=t(i);if(r)return r}return null}function Hp(i,e,t,r){i=Yt(i);let s;const l=i.getPointResolutionFunc();if(l)s=l(e,t);else{const u=i.getUnits();if(u=="degrees"||r=="degrees")s=e;else{const c=fd(i,Yt("EPSG:4326"));if(!c&&u!=="degrees")s=e*i.getMetersPerUnit();else{let f=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];f=c(f,f,2);const p=jp(f.slice(0,2),f.slice(2,4)),_=jp(f.slice(4,6),f.slice(6,8));s=(p+_)/2}const h=i.getMetersPerUnit();h!==void 0&&(s/=h)}}return s}function Zp(i){ex(i),i.forEach(function(e){i.forEach(function(t){e!==t&&Xo(e,t,hd)})})}function tx(i,e,t,r){i.forEach(function(s){e.forEach(function(l){Xo(s,l,t),Xo(l,s,r)})})}function dd(i,e){return i?typeof i=="string"?Yt(i):i:Yt(e)}function nx(i){return function(e,t,r,s){const l=e.length;r=r!==void 0?r:2,s=s??r,t=t!==void 0?t:new Array(l);for(let u=0;u<l;u+=s){const c=i(e.slice(u,u+r)),h=c.length;for(let f=0,p=s;f<p;++f)t[u+f]=f>=h?e[u+f]:c[f]}return t}}function $p(i,e){return C_(),gd(i,"EPSG:4326","EPSG:3857")}function ah(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||fd(i,e)===hd)&&t}function fd(i,e){const t=i.getCode(),r=e.getCode();let s=lh(t,r);if(s)return s;let l=null,u=null;for(const h of QE)l||(l=h(i)),u||(u=h(e));if(!l&&!u)return null;const c="EPSG:4326";if(u)if(l)s=uh(l.inverse,u.forward);else{const h=lh(t,c);h&&(s=uh(h,u.forward))}else{const h=lh(c,r);h&&(s=uh(l.inverse,h))}return s&&(Oh(i),Oh(e),Xo(i,e,s)),s}function uh(i,e){return function(t,r,s,l){return r=i(t,r,s,l),e(r,r,s,l)}}function ba(i,e){const t=Yt(i),r=Yt(e);return fd(t,r)}function gd(i,e,t){const r=ba(e,t);if(!r){const s=Yt(e).getCode(),l=Yt(t).getCode();throw new Error(`No transform available between ${s} and ${l}`)}return r(i,void 0,i.length)}function Nh(i,e){return i}function ai(i,e){return Fh&&!Na(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(Fh=!1,S_("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function R_(i,e){return i}function Zi(i,e){return i}function ix(){Zp(bp),Zp(Wp),tx(Wp,bp,TE,IE)}ix();function Ji(i,e,t,r,s,l,u){l=l||[],u=u||2;let c=0;for(let h=e;h<t;h+=r){const f=i[h],p=i[h+1];l[c++]=s[0]*f+s[2]*p+s[4],l[c++]=s[1]*f+s[3]*p+s[5];for(let _=2;_<u;_++)l[c++]=i[h+_]}return l&&l.length!=c&&(l.length=c),l}function T_(i,e,t,r,s,l,u){u=u||[];const c=Math.cos(s),h=Math.sin(s),f=l[0],p=l[1];let _=0;for(let y=e;y<t;y+=r){const E=i[y]-f,v=i[y+1]-p;u[_++]=f+E*c-v*h,u[_++]=p+E*h+v*c;for(let w=y+2;w<y+r;++w)u[_++]=i[w]}return u&&u.length!=_&&(u.length=_),u}function rx(i,e,t,r,s,l,u,c){c=c||[];const h=u[0],f=u[1];let p=0;for(let _=e;_<t;_+=r){const y=i[_]-h,E=i[_+1]-f;c[p++]=h+s*y,c[p++]=f+l*E;for(let v=_+2;v<_+r;++v)c[p++]=i[v]}return c&&c.length!=p&&(c.length=p),c}function sx(i,e,t,r,s,l,u){u=u||[];let c=0;for(let h=e;h<t;h+=r){u[c++]=i[h]+s,u[c++]=i[h+1]+l;for(let f=h+2;f<h+r;++f)u[c++]=i[f]}return u&&u.length!=c&&(u.length=c),u}const qp=kn();class ox extends Kn{constructor(){super(),this.extent_=qt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=l_((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(r),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Me()}closestPointXY(e,t,r,s){return Me()}containsXY(e,t){const r=this.getClosestPoint([e,t]);return r[0]===e&&r[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Me()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&tu(t),this.extentRevision_=this.getRevision()}return wE(this.extent_,e)}rotate(e,t){Me()}scale(e,t,r){Me()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Me()}getType(){return Me()}applyTransform(e){Me()}intersectsExtent(e){return Me()}translate(e,t){Me()}transform(e,t){const r=Yt(e),s=r.getUnits()=="tile-pixels"?function(l,u,c){const h=r.getExtent(),f=r.getWorldExtent(),p=ht(f)/ht(h);gi(qp,f[0],f[3],p,-p,0,0,0);const _=Ji(l,0,l.length,c,qp,u),y=ba(r,t);return y?y(_,_,c):_}:ba(r,t);return this.applyTransform(s),this}}class pd extends ox{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return id(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Me()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Qp(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Me()}setLayout(e,t,r){let s;if(e)s=Qp(e);else{for(let l=0;l<r;++l){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=lx(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const s=this.getStride();T_(r,0,r.length,s,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Pr(this.getExtent()));const s=this.getFlatCoordinates();if(s){const l=this.getStride();rx(s,0,s.length,l,e,t,r,s),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const s=this.getStride();sx(r,0,r.length,s,e,t,r),this.changed()}}}function lx(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function Qp(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function ax(i,e,t){const r=i.getFlatCoordinates();if(!r)return null;const s=i.getStride();return Ji(r,0,r.length,s,e,t)}function Jp(i,e,t,r,s,l,u){const c=i[e],h=i[e+1],f=i[t]-c,p=i[t+1]-h;let _;if(f===0&&p===0)_=e;else{const y=((s-c)*f+(l-h)*p)/(f*f+p*p);if(y>1)_=t;else if(y>0){for(let E=0;E<r;++E)u[E]=cn(i[e+E],i[t+E],y);u.length=r;return}else _=e}for(let y=0;y<r;++y)u[y]=i[_+y];u.length=r}function I_(i,e,t,r,s){let l=i[e],u=i[e+1];for(e+=r;e<t;e+=r){const c=i[e],h=i[e+1],f=Ss(l,u,c,h);f>s&&(s=f),l=c,u=h}return s}function ux(i,e,t,r,s){for(let l=0,u=t.length;l<u;++l){const c=t[l];s=I_(i,e,c,r,s),e=c}return s}function L_(i,e,t,r,s,l,u,c,h,f,p){if(e==t)return f;let _,y;if(s===0){if(y=Ss(u,c,i[e],i[e+1]),y<f){for(_=0;_<r;++_)h[_]=i[e+_];return h.length=r,y}return f}p=p||[NaN,NaN];let E=e+r;for(;E<t;)if(Jp(i,E-r,E,r,u,c,p),y=Ss(u,c,p[0],p[1]),y<f){for(f=y,_=0;_<r;++_)h[_]=p[_];h.length=r,E+=r}else E+=r*Math.max((Math.sqrt(y)-Math.sqrt(f))/s|0,1);if(Jp(i,t-r,e,r,u,c,p),y=Ss(u,c,p[0],p[1]),y<f){for(f=y,_=0;_<r;++_)h[_]=p[_];h.length=r}return f}function cx(i,e,t,r,s,l,u,c,h,f,p){p=p||[NaN,NaN];for(let _=0,y=t.length;_<y;++_){const E=t[_];f=L_(i,e,E,r,s,l,u,c,h,f,p),e=E}return f}function hx(i,e,t,r){for(let s=0,l=t.length;s<l;++s)i[e++]=t[s];return e}function P_(i,e,t,r){for(let s=0,l=t.length;s<l;++s){const u=t[s];for(let c=0;c<r;++c)i[e++]=u[c]}return e}function dx(i,e,t,r,s){s=s||[];let l=0;for(let u=0,c=t.length;u<c;++u){const h=P_(i,e,t[u],r);s[l++]=h,e=h}return s.length=l,s}function md(i,e,t,r,s,l,u){const c=(t-e)/r;if(c<3){for(;e<t;e+=r)l[u++]=i[e],l[u++]=i[e+1];return u}const h=new Array(c);h[0]=1,h[c-1]=1;const f=[e,t-r];let p=0;for(;f.length>0;){const _=f.pop(),y=f.pop();let E=0;const v=i[y],w=i[y+1],S=i[_],C=i[_+1];for(let R=y+r;R<_;R+=r){const M=i[R],L=i[R+1],A=ME(M,L,v,w,S,C);A>E&&(p=R,E=A)}E>s&&(h[(p-e)/r]=1,y+r<p&&f.push(y,p),p+r<_&&f.push(p,_))}for(let _=0;_<c;++_)h[_]&&(l[u++]=i[e+_*r],l[u++]=i[e+_*r+1]);return u}function fx(i,e,t,r,s,l,u,c){for(let h=0,f=t.length;h<f;++h){const p=t[h];u=md(i,e,p,r,s,l,u),c.push(u),e=p}return u}function Cr(i,e){return e*Math.round(i/e)}function gx(i,e,t,r,s,l,u){if(e==t)return u;let c=Cr(i[e],s),h=Cr(i[e+1],s);e+=r,l[u++]=c,l[u++]=h;let f,p;do if(f=Cr(i[e],s),p=Cr(i[e+1],s),e+=r,e==t)return l[u++]=f,l[u++]=p,u;while(f==c&&p==h);for(;e<t;){const _=Cr(i[e],s),y=Cr(i[e+1],s);if(e+=r,_==f&&y==p)continue;const E=f-c,v=p-h,w=_-c,S=y-h;if(E*S==v*w&&(E<0&&w<E||E==w||E>0&&w>E)&&(v<0&&S<v||v==S||v>0&&S>v)){f=_,p=y;continue}l[u++]=f,l[u++]=p,c=f,h=p,f=_,p=y}return l[u++]=f,l[u++]=p,u}function k_(i,e,t,r,s,l,u,c){for(let h=0,f=t.length;h<f;++h){const p=t[h];u=gx(i,e,p,r,s,l,u),c.push(u),e=p}return u}function Es(i,e,t,r,s){s=s!==void 0?s:[];let l=0;for(let u=e;u<t;u+=r)s[l++]=i.slice(u,u+r);return s.length=l,s}function Ua(i,e,t,r,s){s=s!==void 0?s:[];let l=0;for(let u=0,c=t.length;u<c;++u){const h=t[u];s[l++]=Es(i,e,h,r,s[l]),e=h}return s.length=l,s}function em(i,e,t,r,s){s=s!==void 0?s:[];let l=0;for(let u=0,c=t.length;u<c;++u){const h=t[u];s[l++]=h.length===1&&h[0]===e?[]:Ua(i,e,h,r,s[l]),e=h[h.length-1]}return s.length=l,s}function A_(i,e,t,r){let s=0;const l=i[t-r],u=i[t-r+1];let c=0,h=0;for(;e<t;e+=r){const f=i[e]-l,p=i[e+1]-u;s+=h*f-c*p,c=f,h=p}return s/2}function px(i,e,t,r){let s=0;for(let l=0,u=t.length;l<u;++l){const c=t[l];s+=A_(i,e,c,r),e=c}return s}class jo extends pd{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new jo(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,s){return s<c_(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(I_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),L_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,s))}getArea(){return A_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Es(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=md(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new jo(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=P_(this.flatCoordinates,0,e,this.stride),this.changed()}}class au extends pd{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new au(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,s){const l=this.flatCoordinates,u=Ss(e,t,l[0],l[1]);if(u<s){const c=this.stride;for(let h=0;h<c;++h)r[h]=l[h];return r.length=c,u}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return d_(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return h_(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hx(this.flatCoordinates,0,e,this.stride),this.changed()}}function mx(i,e,t,r,s){return!p_(s,function(u){return!Tr(i,e,t,r,u[0],u[1])})}function Tr(i,e,t,r,s,l){let u=0,c=i[t-r],h=i[t-r+1];for(;e<t;e+=r){const f=i[e],p=i[e+1];h<=l?p>l&&(f-c)*(l-h)-(s-c)*(p-h)>0&&u++:p<=l&&(f-c)*(l-h)-(s-c)*(p-h)<0&&u--,c=f,h=p}return u!==0}function M_(i,e,t,r,s,l){if(t.length===0||!Tr(i,e,t[0],r,s,l))return!1;for(let u=1,c=t.length;u<c;++u)if(Tr(i,t[u-1],t[u],r,s,l))return!1;return!0}function _d(i,e,t,r,s,l,u){let c,h,f,p,_,y,E;const v=s[l+1],w=[];for(let R=0,M=t.length;R<M;++R){const L=t[R];for(p=i[L-r],y=i[L-r+1],c=e;c<L;c+=r)_=i[c],E=i[c+1],(v<=y&&E<=v||y<=v&&v<=E)&&(f=(v-y)/(E-y)*(_-p)+p,w.push(f)),p=_,y=E}let S=NaN,C=-1/0;for(w.sort(qi),p=w[0],c=1,h=w.length;c<h;++c){_=w[c];const R=Math.abs(_-p);R>C&&(f=(p+_)/2,M_(i,e,t,r,f,v)&&(S=f,C=R)),p=_}return isNaN(S)&&(S=s[l]),u?(u.push(S,v,C),u):[S,v,C]}function _x(i,e,t,r,s){let l=[];for(let u=0,c=t.length;u<c;++u){const h=t[u];l=_d(i,e,h,r,s,2*u,l),e=h[h.length-1]}return l}function yx(i,e,t,r,s){let l;for(e+=r;e<t;e+=r)if(l=s(i.slice(e-r,e),i.slice(e,e+r)),l)return l;return!1}function D_(i,e,t,r,s){const l=g_(qt(),i,e,t,r);return Xt(s,l)?ys(s,l)||l[0]>=s[0]&&l[2]<=s[2]||l[1]>=s[1]&&l[3]<=s[3]?!0:yx(i,e,t,r,function(u,c){return SE(s,u,c)}):!1}function F_(i,e,t,r,s){return!!(D_(i,e,t,r,s)||Tr(i,e,t,r,s[0],s[1])||Tr(i,e,t,r,s[0],s[3])||Tr(i,e,t,r,s[2],s[1])||Tr(i,e,t,r,s[2],s[3]))}function vx(i,e,t,r,s){if(!F_(i,e,t[0],r,s))return!1;if(t.length===1)return!0;for(let l=1,u=t.length;l<u;++l)if(mx(i,t[l-1],t[l],r,s)&&!D_(i,t[l-1],t[l],r,s))return!1;return!0}function Ex(i,e,t,r){for(;e<t-r;){for(let s=0;s<r;++s){const l=i[e+s];i[e+s]=i[t-r+s],i[t-r+s]=l}e+=r,t-=r}}function yd(i,e,t,r){let s=0,l=i[t-r],u=i[t-r+1];for(;e<t;e+=r){const c=i[e],h=i[e+1];s+=(c-l)*(h+u),l=c,u=h}return s===0?void 0:s>0}function xx(i,e,t,r,s){s=s!==void 0?s:!1;for(let l=0,u=t.length;l<u;++l){const c=t[l],h=yd(i,e,c,r);if(l===0){if(s&&h||!s&&!h)return!1}else if(s&&!h||!s&&h)return!1;e=c}return!0}function tm(i,e,t,r,s){s=s!==void 0?s:!1;for(let l=0,u=t.length;l<u;++l){const c=t[l],h=yd(i,e,c,r);(l===0?s&&h||!s&&!h:s&&!h||!s&&h)&&Ex(i,e,c,r),e=c}return e}function wx(i,e){const t=[];let r=0,s=0,l;for(let u=0,c=e.length;u<c;++u){const h=e[u],f=yd(i,r,h,2);if(l===void 0&&(l=f),f===l)t.push(e.slice(s,u+1));else{if(t.length===0)continue;t[t.length-1].push(e[s])}s=u+1,r=h}return t}class Bo extends pd{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?ed(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Bo(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,s){return s<c_(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ux(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cx(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,s))}containsXY(e,t){return M_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return px(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),tm(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Ua(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Pr(this.getExtent());this.flatInteriorPoint_=_d(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new au(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new jo(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,s=[];let l=0;for(let u=0,c=r.length;u<c;++u){const h=r[u],f=new jo(t.slice(l,h),e);s.push(f),l=h}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;xx(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=tm(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=k_(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Bo(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return vx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=dx(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function nm(i){if(su(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],r=i[2],s=i[3],l=[e,t,e,s,r,s,r,t,e,t];return new Bo(l,"XY",[l.length])}const dn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ce={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Yo={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var gt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};gt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};gt.max=gt.whitepoint[2].D65;gt.rgb=function(i,e){e=e||gt.whitepoint[2].E;var t=i[0]/e[0],r=i[1]/e[1],s=i[2]/e[2],l,u,c;return l=t*3.240969941904521+r*-1.537383177570093+s*-.498610760293,u=t*-.96924363628087+r*1.87596750150772+s*.041555057407175,c=t*.055630079696993+r*-.20397695888897+s*1.056971514242878,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u=u*12.92,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=c*12.92,l=Math.min(Math.max(0,l),1),u=Math.min(Math.max(0,u),1),c=Math.min(Math.max(0,c),1),[l*255,u*255,c*255]};Yo.xyz=function(i,e){var t=i[0]/255,r=i[1]/255,s=i[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var l=t*.41239079926595+r*.35758433938387+s*.18048078840183,u=t*.21263900587151+r*.71516867876775+s*.072192315360733,c=t*.019330818715591+r*.11919477979462+s*.95053215224966;return e=e||gt.whitepoint[2].E,[l*e[0],u*e[1],c*e[2]]};const vd={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(i,e,t){var r,s,l,u,c,h,f,p,_,y,E,v,w;if(l=i[0],u=i[1],c=i[2],l===0)return[0,0,0];var S=.0011070564598794539;return e=e||"D65",t=t||2,_=gt.whitepoint[t][e][0],y=gt.whitepoint[t][e][1],E=gt.whitepoint[t][e][2],v=4*_/(_+15*y+3*E),w=9*y/(_+15*y+3*E),r=u/(13*l)+v||0,s=c/(13*l)+w||0,f=l>8?y*Math.pow((l+16)/116,3):y*l*S,h=f*9*r/(4*s)||0,p=f*(12-3*r-20*s)/(4*s)||0,[h,f,p]}};gt.luv=function(i,e,t){var r,s,l,u,c,h,f,p,_,y,E,v,w,S=.008856451679035631,C=903.2962962962961;e=e||"D65",t=t||2,_=gt.whitepoint[t][e][0],y=gt.whitepoint[t][e][1],E=gt.whitepoint[t][e][2],v=4*_/(_+15*y+3*E),w=9*y/(_+15*y+3*E),h=i[0],f=i[1],p=i[2],r=4*h/(h+15*f+3*p)||0,s=9*f/(h+15*f+3*p)||0;var R=f/y;return l=R<=S?C*R:116*Math.pow(R,1/3)-16,u=13*l*(r-v),c=13*l*(s-w),[l,u,c]};var O_={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(i){var e=i[0],t=i[1],r=i[2],s,l,u;return u=r/360*2*Math.PI,s=t*Math.cos(u),l=t*Math.sin(u),[e,s,l]},xyz:function(i){return vd.xyz(O_.luv(i))}};vd.lchuv=function(i){var e=i[0],t=i[1],r=i[2],s=Math.sqrt(t*t+r*r),l=Math.atan2(r,t),u=l*360/2/Math.PI;return u<0&&(u+=360),[e,s,u]};gt.lchuv=function(i){return vd.lchuv(gt.luv(i))};const im={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var rm={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Sx(i){var p,_;var e,t=[],r=1,s;if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(i=String(i).toLowerCase(),im[i])t=im[i].slice(),s="rgb";else if(i==="transparent")r=0,s="rgb",t=[0,0,0];else if(i[0]==="#"){var l=i.slice(1),u=l.length,c=u<=4;r=1,c?(t=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],u===4&&(r=parseInt(l[3]+l[3],16)/255)):(t=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],u===8&&(r=parseInt(l[6]+l[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(i)){var h=e[1];s=h.replace(/a$/,"");var f=s==="cmyk"?4:s==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=t.shift()),t=t.map(function(y,E){if(y[y.length-1]==="%")return y=parseFloat(y)/100,E===3?y:s==="rgb"?y*255:s[0]==="h"||s[0]==="l"&&!E?y*100:s==="lab"?y*125:s==="lch"?E<2?y*150:y*360:s[0]==="o"&&!E?y:s==="oklab"?y*.4:s==="oklch"?E<2?y*.4:y*360:y;if(s[E]==="h"||E===2&&s[s.length-1]==="h"){if(rm[y]!==void 0)return rm[y];if(y.endsWith("deg"))return parseFloat(y);if(y.endsWith("turn"))return parseFloat(y)*360;if(y.endsWith("grad"))return parseFloat(y)*360/400;if(y.endsWith("rad"))return parseFloat(y)*180/Math.PI}return y==="none"?0:parseFloat(y)}),r=t.length>f?t.pop():1}else/[0-9](?:\s|\/|,)/.test(i)&&(t=i.match(/([0-9]+)/g).map(function(y){return parseFloat(y)}),s=((_=(p=i.match(/([a-z])/ig))==null?void 0:p.join(""))==null?void 0:_.toLowerCase())||"rgb");return{space:s,values:t,alpha:r}}const ch={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(i){var e=i[0]/360,t=i[1]/100,r=i[2]/100,s,l,u,c,h,f=0;if(t===0)return h=r*255,[h,h,h];for(l=r<.5?r*(1+t):r+t-r*t,s=2*r-l,c=[0,0,0];f<3;)u=e+1/3*-(f-1),u<0?u++:u>1&&u--,h=6*u<1?s+(l-s)*6*u:2*u<1?l:3*u<2?s+(l-s)*(2/3-u)*6:s,c[f++]=h*255;return c}};Yo.hsl=function(i){var e=i[0]/255,t=i[1]/255,r=i[2]/255,s=Math.min(e,t,r),l=Math.max(e,t,r),u=l-s,c,h,f;return l===s?c=0:e===l?c=(t-r)/u:t===l?c=2+(r-e)/u:r===l&&(c=4+(e-t)/u),c=Math.min(c*60,360),c<0&&(c+=360),f=(s+l)/2,l===s?h=0:f<=.5?h=u/(l+s):h=u/(2-l-s),[c,h*100,f*100]};function Cx(i){Array.isArray(i)&&i.raw&&(i=String.raw(...arguments)),i instanceof Number&&(i=+i);var e,t=Sx(i);if(!t.space)return[];const r=t.space[0]==="h"?ch.min:Yo.min,s=t.space[0]==="h"?ch.max:Yo.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],r[0]),s[0]),e[1]=Math.min(Math.max(t.values[1],r[1]),s[1]),e[2]=Math.min(Math.max(t.values[2],r[2]),s[2]),t.space[0]==="h"&&(e=ch.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const Ed=[NaN,NaN,NaN,0];function Rx(i){return typeof i=="string"?i:wd(i)}const Tx=1024,To={};let hh=0;function Ix(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function sm(i){const e=gt.lchuv(Yo.xyz(i));return e[3]=i[3],e}function Lx(i){const e=gt.rgb(O_.xyz(i));return e[3]=i[3],e}function xd(i){if(i==="none")return Ed;if(To.hasOwnProperty(i))return To[i];if(hh>=Tx){let t=0;for(const r in To)t++&3||(delete To[r],--hh)}const e=Cx(i);if(e.length!==4)throw new Error('failed to parse "'+i+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+i+'" as color');return N_(e),To[i]=e,++hh,e}function Ms(i){return Array.isArray(i)?i:xd(i)}function N_(i){return i[0]=$e(i[0]+.5|0,0,255),i[1]=$e(i[1]+.5|0,0,255),i[2]=$e(i[2]+.5|0,0,255),i[3]=$e(i[3],0,1),i}function wd(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let r=i[2];r!=(r|0)&&(r=r+.5|0);const s=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+s+")"}const ir=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Px=ir.includes("firefox"),kx=ir.includes("safari")&&!ir.includes("chrom");kx&&(ir.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ir));const Ax=ir.includes("webkit")&&!ir.includes("edge"),z_=ir.includes("macintosh"),G_=typeof devicePixelRatio<"u"?devicePixelRatio:1,Sd=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,b_=typeof Image<"u"&&Image.prototype.decode,U_=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function nt(i,e,t,r){let s;return t&&t.length?s=t.shift():Sd?s=new OffscreenCanvas(i||300,e||300):s=document.createElement("canvas"),i&&(s.width=i),e&&(s.height=e),s.getContext("2d",r)}let dh;function Wa(){return dh||(dh=nt(1,1)),dh}function uu(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function om(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function Mx(i){for(;i.lastChild;)i.lastChild.remove()}function Dx(i,e){const t=i.childNodes;for(let r=0;;++r){const s=t[r],l=e[r];if(!s&&!l)break;if(s!==l){if(!s){i.appendChild(l);continue}if(!l){i.removeChild(s),--r;continue}i.insertBefore(l,s)}}}function Fx(i,e,t){const r=i;let s=!0,l=!1,u=!1;const c=[Oa(r,xe.LOAD,function(){u=!0,l||e()})];return r.src&&b_?(l=!0,r.decode().then(function(){s&&e()}).catch(function(h){s&&(u?e():t())})):c.push(Oa(r,xe.ERROR,t)),function(){s=!1,c.forEach(We)}}function Ox(i,e){return new Promise((t,r)=>{function s(){u(),t(i)}function l(){u(),r(new Error("Image load error"))}function u(){i.removeEventListener("load",s),i.removeEventListener("error",l)}i.addEventListener("load",s),i.addEventListener("error",l)})}function Nx(i,e){return e&&(i.src=e),i.src&&b_?new Promise((t,r)=>i.decode().then(()=>t(i)).catch(s=>i.complete&&i.width?t(i):r(s))):Ox(i)}class zx{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];!(e++&3)&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const s=fh(e,t,r);return s in this.cache_?this.cache_[s]:null}getPattern(e,t,r){const s=fh(e,t,r);return s in this.patternCache_?this.patternCache_[s]:null}set(e,t,r,s,l){const u=fh(e,t,r),c=u in this.cache_;this.cache_[u]=s,l&&(s.getImageState()===Ce.IDLE&&s.load(),s.getImageState()===Ce.LOADING?s.ready().then(()=>{this.patternCache_[u]=Wa().createPattern(s.getImage(1),"repeat")}):this.patternCache_[u]=Wa().createPattern(s.getImage(1),"repeat")),c||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function fh(i,e,t){const r=t?Ms(t):"null";return e+":"+i+":"+r}const fn=new zx;let Io=null;class W_ extends eu{constructor(e,t,r,s,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=l,this.imageState_=s===void 0?Ce.IDLE:s,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ce.LOADED){Io||(Io=nt(1,1,void 0,{willReadFrequently:!0})),Io.drawImage(this.image_,0,0);try{Io.getImageData(0,0,1,1),this.tainted_=!1}catch{Io=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(xe.CHANGE)}handleImageError_(){this.imageState_=Ce.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ce.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=nt(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ce.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ce.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Nx(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ce.LOADED)return;const t=this.image_,r=nt(Math.ceil(t.width*e),Math.ceil(t.height*e)),s=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=Rx(this.color_),r.fillRect(0,0,s.width/e,s.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=s}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Ce.LOADED||this.imageState_===Ce.ERROR)e();else{const t=()=>{(this.imageState_===Ce.LOADED||this.imageState_===Ce.ERROR)&&(this.removeEventListener(xe.CHANGE,t),e())};this.addEventListener(xe.CHANGE,t)}})),this.ready_}}function Cd(i,e,t,r,s,l){let u=e===void 0?void 0:fn.get(e,t,s);return u||(u=new W_(i,i&&"src"in i?i.src||void 0:e,t,r,s),fn.set(e,t,s,u,l)),l&&u&&!fn.getPattern(e,t,s)&&fn.set(e,t,s,u,l),u}class rl{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new rl({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=Cd(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Ce.IDLE&&t.load(),t.getImageState()===Ce.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Oe(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Ms(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function lm(i,e,t,r,s,l,u){let c,h;const f=(t-e)/r;if(f===1)c=e;else if(f===2)c=e,h=s;else if(f!==0){let p=i[e],_=i[e+1],y=0;const E=[0];for(let S=e+r;S<t;S+=r){const C=i[S],R=i[S+1];y+=Math.sqrt((C-p)*(C-p)+(R-_)*(R-_)),E.push(y),p=C,_=R}const v=s*y,w=aE(E,v);w<0?(h=(v-E[-w-2])/(E[-w-1]-E[-w-2]),c=e+(-w-2)*r):c=e+w*r}u=u>1?u:2,l=l||new Array(u);for(let p=0;p<u;++p)l[p]=c===void 0?NaN:h===void 0?i[c+p]:cn(i[c+p],i[c+r+p],h);return l}function Gx(i,e,t,r){let s=i[e],l=i[e+1],u=0;for(let c=e+r;c<t;c+=r){const h=i[c],f=i[c+1];u+=Math.sqrt((h-s)*(h-s)+(f-l)*(f-l)),s=h,l=f}return u}class cu{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new cu({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function am(i){return i[0]>0&&i[1]>0}function bx(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function Bt(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}class hu{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Bt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new hu({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Me()}getImage(e){return Me()}getHitDetectionImage(){return Me()}getPixelRatio(e){return 1}getImageState(){return Me()}getImageSize(){return Me()}getOrigin(){return Me()}getSize(){return Me()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Bt(e)}listenImageChange(e){Me()}load(){Me()}unlistenImageChange(e){Me()}ready(){return Promise.resolve()}}function Bn(i){return i?Array.isArray(i)?wd(i):typeof i=="object"&&"src"in i?Ux(i):i:null}function Ux(i){if(!i.offset||!i.size)return fn.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=fn.getPattern(e,void 0,i.color);if(t)return t;const r=fn.get(i.src,"anonymous",null);if(r.getImageState()!==Ce.LOADED)return null;const s=nt(i.size[0],i.size[1]);return s.drawImage(r.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),Cd(s.canvas,e,void 0,Ce.LOADED,i.color,!0),fn.getPattern(e,void 0,i.color)}const Sa="ol-hidden",du="ol-unselectable",Rd="ol-control",um="ol-collapsed",Wx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),cm=["style","variant","weight","size","lineHeight","family"],X_=function(i){const e=i.match(Wx);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,s=cm.length;r<s;++r){const l=e[r+1];l!==void 0&&(t[cm[r]]=l)}return t.families=t.family.split(/,\s?/),t},j_="10px sans-serif",Ut="#000",Ds="round",di=[],fi=0,Fs="round",Vo=10,Ko="#000",Ho="center",Xa="middle",Ir=[0,0,0,0],Zo=1,ui=new Kn;let gs=null,zh;const Gh={},Xx=function(){const e="32px ",t=["monospace","serif"],r=t.length,s="wmytzilWMYTZIL@#/&?$%10";let l,u;function c(f,p,_){let y=!0;for(let E=0;E<r;++E){const v=t[E];if(u=ja(f+" "+p+" "+e+v,s),_!=v){const w=ja(f+" "+p+" "+e+_+","+v,s);y=y&&w!=u}}return!!y}function h(){let f=!0;const p=ui.getKeys();for(let _=0,y=p.length;_<y;++_){const E=p[_];if(ui.get(E)<100){const[v,w,S]=E.split(`
`);c(v,w,S)?(tl(Gh),gs=null,zh=void 0,ui.set(E,100)):(ui.set(E,ui.get(E)+1,!0),f=!1)}}f&&(clearInterval(l),l=void 0)}return function(f){const p=X_(f);if(!p)return;const _=p.families;for(let y=0,E=_.length;y<E;++y){const v=_[y],w=p.style+`
`+p.weight+`
`+v;ui.get(w)===void 0&&(ui.set(w,100,!0),c(p.style,p.weight,v)||(ui.set(w,0,!0),l===void 0&&(l=setInterval(h,32))))}}}(),jx=function(){let i;return function(e){let t=Gh[e];if(t==null){if(Sd){const r=X_(e),s=B_(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);Gh[e]=t}return t}}();function B_(i,e){return gs||(gs=nt(1,1)),i!=zh&&(gs.font=i,zh=gs.font),gs.measureText(e)}function ja(i,e){return B_(i,e).width}function hm(i,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((s,l)=>Math.max(s,ja(i,l)),0);return t[e]=r,r}function Bx(i,e){const t=[],r=[],s=[];let l=0,u=0,c=0,h=0;for(let f=0,p=e.length;f<=p;f+=2){const _=e[f];if(_===`
`||f===p){l=Math.max(l,u),s.push(u),u=0,c+=h,h=0;continue}const y=e[f+1]||i.font,E=ja(y,_);t.push(E),u+=E;const v=jx(y);r.push(v),h=Math.max(h,v)}return{width:l,height:c,widths:t,heights:r,lineWidths:s}}function Yx(i,e,t,r,s,l,u,c,h,f,p){i.save(),t!==1&&(i.globalAlpha===void 0?i.globalAlpha=_=>_.globalAlpha*=t:i.globalAlpha*=t),e&&i.transform.apply(i,e),r.contextInstructions?(i.translate(h,f),i.scale(p[0],p[1]),Vx(r,i)):p[0]<0||p[1]<0?(i.translate(h,f),i.scale(p[0],p[1]),i.drawImage(r,s,l,u,c,0,0,u,c)):i.drawImage(r,s,l,u,c,h,f,u*p[0],c*p[1]),i.restore()}function Vx(i,e){const t=i.contextInstructions;for(let r=0,s=t.length;r<s;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class fu extends hu{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ce.LOADING:Ce.LOADED,this.imageState_===Ce.LOADING&&this.ready().then(()=>this.imageState_=Ce.LOADED),this.render()}clone(){const e=this.getScale(),t=new fu({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var l,u;const t=(l=this.fill_)==null?void 0:l.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let s=(u=fn.get(r,null,null))==null?void 0:u.getImage(1);if(!s){const c=this.renderOptions_,h=Math.ceil(c.size*e),f=nt(h,h);this.draw_(c,f,e),s=f.canvas,fn.set(r,null,null,new W_(s,void 0,null,Ce.LOADED,null))}return s}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius,l=this.radius2_===void 0?s:this.radius2_;if(s<l){const W=s;s=l,l=W}const u=this.radius2_===void 0?this.points_:this.points_*2,c=2*Math.PI/u,h=l*Math.sin(c),f=Math.sqrt(l*l-h*h),p=s-f,_=Math.sqrt(h*h+p*p),y=_/h;if(e==="miter"&&y<=r)return y*t;const E=t/2/y,v=t/2*(p/_),S=Math.sqrt((s+E)*(s+E)+v*v)-s;if(this.radius2_===void 0||e==="bevel")return S*2;const C=s*Math.sin(c),R=Math.sqrt(s*s-C*C),M=l-R,A=Math.sqrt(C*C+M*M)/C;if(A<=r){const W=A*t/2-l-s;return 2*Math.max(S,W)}return S*2}createRenderOptions(){let e=Ds,t=Fs,r=0,s=null,l=0,u,c=0;this.stroke_&&(u=Bn(this.stroke_.getColor()??Ko),c=this.stroke_.getWidth()??Zo,s=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Fs,e=this.stroke_.getLineCap()??Ds,r=this.stroke_.getMiterLimit()??Vo);const h=this.calculateLineJoinSize_(t,c,r),f=Math.max(this.radius,this.radius2_||0),p=Math.ceil(2*f+h);return{strokeStyle:u,strokeWidth:c,size:p,lineCap:e,lineDash:s,lineDashOffset:l,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=Ut),t.fillStyle=Bn(s),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),s=0;typeof r=="string"&&(r=Ms(r)),r===null?s=1:Array.isArray(r)&&(s=r.length===4?r[3]:1),s===0&&(t=nt(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const s=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const l=this.angle_-Math.PI/2,u=2*Math.PI/t;for(let c=0;c<t;c++){const h=l+c*u,f=c%2===0?r:s;e.lineTo(f*Math.cos(h),f*Math.sin(h))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Ut,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class gu extends fu{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new gu({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class er{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=dm,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new er({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=dm,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Kx(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(De(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let gh=null;function Y_(i,e){if(!gh){const t=new rl({color:"rgba(255,255,255,0.4)"}),r=new cu({color:"#3399CC",width:1.25});gh=[new er({image:new gu({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return gh}function dm(i){return i.getGeometry()}const Hx="#333";class Td{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Bt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new rl({color:Hx}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Td({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Bt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const ze={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class V_ extends Kn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[ze.OPACITY]=e.opacity!==void 0?e.opacity:1,De(typeof t[ze.OPACITY]=="number","Layer opacity must be a number"),t[ze.VISIBLE]=e.visible!==void 0?e.visible:!0,t[ze.Z_INDEX]=e.zIndex,t[ze.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[ze.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[ze.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[ze.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=$e(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Me()}getLayerStatesArray(e){return Me()}getExtent(){return this.get(ze.EXTENT)}getMaxResolution(){return this.get(ze.MAX_RESOLUTION)}getMinResolution(){return this.get(ze.MIN_RESOLUTION)}getMinZoom(){return this.get(ze.MIN_ZOOM)}getMaxZoom(){return this.get(ze.MAX_ZOOM)}getOpacity(){return this.get(ze.OPACITY)}getSourceState(){return Me()}getVisible(){return this.get(ze.VISIBLE)}getZIndex(){return this.get(ze.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(ze.EXTENT,e)}setMaxResolution(e){this.set(ze.MAX_RESOLUTION,e)}setMinResolution(e){this.set(ze.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(ze.MAX_ZOOM,e)}setMinZoom(e){this.set(ze.MIN_ZOOM,e)}setOpacity(e){De(typeof e=="number","Layer opacity must be a number"),this.set(ze.OPACITY,e)}setVisible(e){this.set(ze.VISIBLE,e)}setZIndex(e){this.set(ze.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Ct={ANIMATING:0,INTERACTING:1},Tn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Zx=42,Id=256;function fm(i,e,t){return function(r,s,l,u,c){if(!r)return;if(!s&&!e)return r;const h=e?0:l[0]*s,f=e?0:l[1]*s,p=c?c[0]:0,_=c?c[1]:0;let y=i[0]+h/2+p,E=i[2]-h/2+p,v=i[1]+f/2+_,w=i[3]-f/2+_;y>E&&(y=(E+y)/2,E=y),v>w&&(v=(w+v)/2,w=v);let S=$e(r[0],y,E),C=$e(r[1],v,w);if(u&&t&&s){const R=30*s;S+=-R*Math.log(1+Math.max(0,y-r[0])/R)+R*Math.log(1+Math.max(0,r[0]-E)/R),C+=-R*Math.log(1+Math.max(0,v-r[1])/R)+R*Math.log(1+Math.max(0,r[1]-w)/R)}return[S,C]}}function $x(i){return i}function Ld(i,e,t,r){const s=ke(e)/t[0],l=ht(e)/t[1];return r?Math.min(i,Math.max(s,l)):Math.min(i,Math.min(s,l))}function Pd(i,e,t){let r=Math.min(i,e);const s=50;return r*=Math.log(1+s*Math.max(0,i/e-1))/s+1,t&&(r=Math.max(r,t),r/=Math.log(1+s*Math.max(0,t/i-1))/s+1),$e(r,t/2,e*2)}function qx(i,e,t,r){return e=e!==void 0?e:!0,function(s,l,u,c){if(s!==void 0){const h=i[0],f=i[i.length-1],p=t?Ld(h,t,u,r):h;if(c)return e?Pd(s,p,f):$e(s,f,p);const _=Math.min(p,s),y=Math.floor(Jh(i,_,l));return i[y]>p&&y<i.length-1?i[y+1]:i[y]}}}function Qx(i,e,t,r,s,l){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(u,c,h,f){if(u!==void 0){const p=s?Ld(e,s,h,l):e;if(f)return r?Pd(u,p,t):$e(u,t,p);const _=1e-9,y=Math.ceil(Math.log(e/p)/Math.log(i)-_),E=-c*(.5-_)+.5,v=Math.min(p,u),w=Math.floor(Math.log(e/v)/Math.log(i)+E),S=Math.max(y,w),C=e/Math.pow(i,S);return $e(C,t,p)}}}function gm(i,e,t,r,s){return t=t!==void 0?t:!0,function(l,u,c,h){if(l!==void 0){const f=r?Ld(i,r,c,s):i;return!t||!h?$e(l,e,f):Pd(l,f,e)}}}function kd(i){if(i!==void 0)return 0}function pm(i){if(i!==void 0)return i}function Jx(i){const e=2*Math.PI/i;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function ew(i){const e=Qi(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}function K_(i){return Math.pow(i,3)}function zs(i){return 1-K_(1-i)}function tw(i){return 3*i*i-2*i*i*i}function nw(i){return i}const ph=0;class Wn extends Kn{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=dd(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&C_(),e.center&&(e.center=ai(e.center,this.projection_)),e.extent&&(e.extent=Zi(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const c in Tn)delete t[c];this.setProperties(t,!0);const r=rw(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const s=iw(e),l=r.constraint,u=sw(e);this.constraints_={center:s,resolution:l,rotation:u},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const s=e||[0,0,0,0];t=t||[0,0,0,0];const l=this.getResolution(),u=l/2*(s[3]-t[3]+t[1]-s[1]),c=l/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([r[0]+u,r[1]-c])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let s=arguments[r];s.center&&(s=Object.assign({},s),s.center=ai(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=ai(s.anchor,this.getProjection())),t[r]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const p=arguments[s];p.center&&this.setCenterInternal(p.center),p.zoom!==void 0?this.setZoom(p.zoom):p.resolution&&this.setResolution(p.resolution),p.rotation!==void 0&&this.setRotation(p.rotation)}if(s===t){r&&Ca(r,!0);return}let l=Date.now(),u=this.targetCenter_.slice(),c=this.targetResolution_,h=this.targetRotation_;const f=[];for(;s<t;++s){const p=arguments[s],_={start:l,complete:!1,anchor:p.anchor,duration:p.duration!==void 0?p.duration:1e3,easing:p.easing||tw,callback:r};if(p.center&&(_.sourceCenter=u,_.targetCenter=p.center.slice(),u=_.targetCenter),p.zoom!==void 0?(_.sourceResolution=c,_.targetResolution=this.getResolutionForZoom(p.zoom),c=_.targetResolution):p.resolution&&(_.sourceResolution=c,_.targetResolution=p.resolution,c=_.targetResolution),p.rotation!==void 0){_.sourceRotation=h;const y=Cs(p.rotation-h+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=h+y,h=_.targetRotation}ow(_)?_.complete=!0:l+=_.duration,f.push(_)}this.animations_.push(f),this.setHint(Ct.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Ct.ANIMATING]>0}getInteracting(){return this.hints_[Ct.INTERACTING]>0}cancelAnimations(){this.setHint(Ct.ANIMATING,-this.hints_[Ct.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const s=this.animations_[t];if(s[0].callback&&Ca(s[0].callback,!1),!e)for(let l=0,u=s.length;l<u;++l){const c=s[l];if(!c.complete){e=c.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const s=this.animations_[r];let l=!0;for(let u=0,c=s.length;u<c;++u){const h=s[u];if(h.complete)continue;const f=e-h.start;let p=h.duration>0?f/h.duration:1;p>=1?(h.complete=!0,p=1):l=!1;const _=h.easing(p);if(h.sourceCenter){const y=h.sourceCenter[0],E=h.sourceCenter[1],v=h.targetCenter[0],w=h.targetCenter[1];this.nextCenter_=h.targetCenter;const S=y+_*(v-y),C=E+_*(w-E);this.targetCenter_=[S,C]}if(h.sourceResolution&&h.targetResolution){const y=_===1?h.targetResolution:h.sourceResolution+_*(h.targetResolution-h.sourceResolution);if(h.anchor){const E=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(y,0,E,!0);this.targetCenter_=this.calculateCenterZoom(v,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){const y=_===1?Cs(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+_*(h.targetRotation-h.sourceRotation);if(h.anchor){const E=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(E,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),t=!0,!h.complete)break}if(l){this.animations_[r]=null,this.setHint(Ct.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const u=s[0].callback;u&&Ca(u,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const s=this.getCenterInternal();return s!==void 0&&(r=[s[0]-t[0],s[1]-t[1]],ad(r,e-this.getRotation()),FE(r,t)),r}calculateCenterZoom(e,t){let r;const s=this.getCenterInternal(),l=this.getResolution();if(s!==void 0&&l!==void 0){const u=t[0]-e*(t[0]-s[0])/l,c=t[1]-e*(t[1]-s[1])/l;r=[u,c]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],s=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Nh(e,this.getProjection())}getCenterInternal(){return this.get(Tn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return R_(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();De(t,"The view center is not defined");const r=this.getResolution();De(r!==void 0,"The view resolution is not defined");const s=this.getRotation();return De(s!==void 0,"The view rotation is not defined"),Ah(t,r,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Tn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Zi(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=ke(e)/t[0],s=ht(e)/t[1];return Math.max(r,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(t/r)/Math.log(e);return function(l){return t/Math.pow(e,l*s)}}getRotation(){return this.get(Tn.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,l=Math.log(r/s)/t;return function(u){return Math.log(r/u)/t/l}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let s=this.getCenterInternal();const l=this.padding_;if(l){const u=this.getViewportSizeMinusPadding_();s=mh(s,this.getViewportSize_(),[u[0]/2+l[3],u[1]/2+l[0]],t,r)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,s;if(this.resolutions_){const l=Jh(this.resolutions_,e,1);t=l,r=this.resolutions_[l],l==this.resolutions_.length-1?s=2:s=r/this.resolutions_[l+1]}else r=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(r/e)/Math.log(s)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=$e(Math.floor(e),0,this.resolutions_.length-2),s=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(s,$e(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(De(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){De(!su(e),"Cannot fit empty extent provided as `geometry`");const s=Zi(e,this.getProjection());r=nm(s)}else if(e.getType()==="Circle"){const s=Zi(e.getExtent(),this.getProjection());r=nm(s),r.rotate(this.getRotation(),Pr(s))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),s=Math.sin(-t),l=e.getFlatCoordinates(),u=e.getStride();let c=1/0,h=1/0,f=-1/0,p=-1/0;for(let _=0,y=l.length;_<y;_+=u){const E=l[_]*r-l[_+1]*s,v=l[_]*s+l[_+1]*r;c=Math.min(c,E),h=Math.min(h,v),f=Math.max(f,E),p=Math.max(p,v)}return[c,h,f,p]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],l=t.nearest!==void 0?t.nearest:!1;let u;t.minResolution!==void 0?u=t.minResolution:t.maxZoom!==void 0?u=this.getResolutionForZoom(t.maxZoom):u=0;const c=this.rotatedExtentForGeometry(e);let h=this.getResolutionForExtentInternal(c,[r[0]-s[1]-s[3],r[1]-s[0]-s[2]]);h=isNaN(h)?u:Math.max(h,u),h=this.getConstrainedResolution(h,l?0:1);const f=this.getRotation(),p=Math.sin(f),_=Math.cos(f),y=Pr(c);y[0]+=(s[1]-s[3])/2*h,y[1]+=(s[0]-s[2])/2*h;const E=y[0]*_-y[1]*p,v=y[1]*_+y[0]*p,w=this.getConstrainedCenter([E,v],h),S=t.callback?t.callback:Ls;t.duration!==void 0?this.animateInternal({resolution:h,center:w,duration:t.duration,easing:t.easing},S):(this.targetResolution_=h,this.targetCenter_=w,this.applyTargetState_(!1,!0),Ca(S,!0))}centerOn(e,t,r){this.centerOnInternal(ai(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(mh(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,s){let l;const u=this.padding_;if(u&&e){const c=this.getViewportSizeMinusPadding_(-r),h=mh(e,s,[c[0]/2+u[3],c[1]/2+u[0]],t,r);l=[e[0]-h[0],e[1]-h[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Nh(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&ai(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,s,r);t&&(this.targetCenter_=this.calculateCenterZoom(l,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=ai(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&ai(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,r),l=this.getViewportSize_(s),u=this.constraints_.resolution(this.targetResolution_,0,l,r),c=this.constraints_.center(this.targetCenter_,u,l,r,this.calculateCenterShift(this.targetCenter_,u,s,l));this.get(Tn.ROTATION)!==s&&this.set(Tn.ROTATION,s),this.get(Tn.RESOLUTION)!==u&&(this.set(Tn.RESOLUTION,u),this.set("zoom",this.getZoom(),!0)),(!c||!this.get(Tn.CENTER)||!Na(this.get(Tn.CENTER),c))&&this.set(Tn.CENTER,c),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const s=t||0,l=this.constraints_.rotation(this.targetRotation_),u=this.getViewportSize_(l),c=this.constraints_.resolution(this.targetResolution_,s,u),h=this.constraints_.center(this.targetCenter_,c,u,!1,this.calculateCenterShift(this.targetCenter_,c,l,u));if(e===0&&!this.cancelAnchor_){this.targetResolution_=c,this.targetRotation_=l,this.targetCenter_=h,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==l||!this.getCenterInternal()||!Na(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:h,resolution:c,duration:e,easing:zs,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Ct.INTERACTING,1)}endInteraction(e,t,r){r=r&&ai(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Ct.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function Ca(i,e){setTimeout(function(){i(e)},0)}function iw(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return fm(i.extent,i.constrainOnlyCenter,t)}const e=dd(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,fm(t,!1,!1)}return $x}function rw(i){let e,t,r,u=i.minZoom!==void 0?i.minZoom:ph,c=i.maxZoom!==void 0?i.maxZoom:28;const h=i.zoomFactor!==void 0?i.zoomFactor:2,f=i.multiWorld!==void 0?i.multiWorld:!1,p=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,_=i.showFullExtent!==void 0?i.showFullExtent:!1,y=dd(i.projection,"EPSG:3857"),E=y.getExtent();let v=i.constrainOnlyCenter,w=i.extent;if(!f&&!w&&y.isGlobal()&&(v=!1,w=E),i.resolutions!==void 0){const S=i.resolutions;t=S[u],r=S[c]!==void 0?S[c]:S[S.length-1],i.constrainResolution?e=qx(S,p,!v&&w,_):e=gm(t,r,p,!v&&w,_)}else{const C=(E?Math.max(ke(E),ht(E)):360*sd.degrees/y.getMetersPerUnit())/Id/Math.pow(2,ph),R=C/Math.pow(2,28-ph);t=i.maxResolution,t!==void 0?u=0:t=C/Math.pow(h,u),r=i.minResolution,r===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?r=t/Math.pow(h,c):r=C/Math.pow(h,c):r=R),c=u+Math.floor(Math.log(t/r)/Math.log(h)),r=t/Math.pow(h,c-u),i.constrainResolution?e=Qx(h,t,r,p,!v&&w,_):e=gm(t,r,p,!v&&w,_)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:u,zoomFactor:h}}function sw(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?ew():t===!1?pm:typeof t=="number"?Jx(t):pm}return kd}function ow(i){return!(i.sourceCenter&&i.targetCenter&&!Na(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function mh(i,e,t,r,s){const l=Math.cos(-s);let u=Math.sin(-s),c=i[0]*l-i[1]*u,h=i[1]*l+i[0]*u;c+=(e[0]/2-t[0])*r,h+=(t[1]-e[1]/2)*r,u=-u;const f=c*l-h*u,p=h*l+c*u;return[f,p]}class pu extends V_{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(ze.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(ze.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(We(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Pe(e,xe.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof Wn?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let s;if(t.layerStatesArray){if(s=t.layerStatesArray.find(u=>u.layer===this),!s)return!1}else s=this.getLayerState();const l=this.getExtent();return Ad(s,t.viewState)&&(!l||Xt(l,t.extent))}getAttributions(e){var l;if(!this.isVisible(e))return[];const t=(l=this.getSource())==null?void 0:l.getAttributions();if(!t)return[];const r=e instanceof Wn?e.getViewStateAndExtent():e;let s=t(r);return Array.isArray(s)||(s=[s]),s}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(ze.MAP,e)}getMapInternal(){return this.get(ze.MAP)}setMap(e){this.mapPrecomposeKey_&&(We(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(We(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Pe(e,dn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Pe(this,xe.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);De(!t.some(s=>s.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(ze.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Ad(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const r=e.zoom;return r>i.minZoom&&r<=i.maxZoom}function H_(i,e,t=0,r=i.length-1,s=lw){for(;r>t;){if(r-t>600){const h=r-t+1,f=e-t+1,p=Math.log(h),_=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*_*(h-_)/h)*(f-h/2<0?-1:1),E=Math.max(t,Math.floor(e-f*_/h+y)),v=Math.min(r,Math.floor(e+(h-f)*_/h+y));H_(i,e,E,v,s)}const l=i[e];let u=t,c=r;for(Lo(i,t,e),s(i[r],l)>0&&Lo(i,t,r);u<c;){for(Lo(i,u,c),u++,c--;s(i[u],l)<0;)u++;for(;s(i[c],l)>0;)c--}s(i[t],l)===0?Lo(i,t,c):(c++,Lo(i,c,r)),c<=e&&(t=c+1),e<=c&&(r=c-1)}}function Lo(i,e,t){const r=i[e];i[e]=i[t],i[t]=r}function lw(i,e){return i<e?-1:i>e?1:0}let Z_=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!Ta(e,t))return r;const s=this.toBBox,l=[];for(;t;){for(let u=0;u<t.children.length;u++){const c=t.children[u],h=t.leaf?s(c):c;Ta(e,h)&&(t.leaf?r.push(c):yh(e,h)?this._all(c,r):l.push(c))}t=l.pop()}return r}collides(e){let t=this.data;if(!Ta(e,t))return!1;const r=[];for(;t;){for(let s=0;s<t.children.length;s++){const l=t.children[s],u=t.leaf?this.toBBox(l):l;if(Ta(e,u)){if(t.leaf||yh(e,u))return!0;r.push(l)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ps([]),this}remove(e,t){if(!e)return this;let r=this.data;const s=this.toBBox(e),l=[],u=[];let c,h,f;for(;r||l.length;){if(r||(r=l.pop(),h=l[l.length-1],c=u.pop(),f=!0),r.leaf){const p=aw(e,r.children,t);if(p!==-1)return r.children.splice(p,1),l.push(r),this._condense(l),this}!f&&!r.leaf&&yh(r,s)?(l.push(r),u.push(c),c=0,h=r,r=r.children[0]):h?(c++,r=h.children[c],f=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,s){const l=r-t+1;let u=this._maxEntries,c;if(l<=u)return c=ps(e.slice(t,r+1)),ls(c,this.toBBox),c;s||(s=Math.ceil(Math.log(l)/Math.log(u)),u=Math.ceil(l/Math.pow(u,s-1))),c=ps([]),c.leaf=!1,c.height=s;const h=Math.ceil(l/u),f=h*Math.ceil(Math.sqrt(u));mm(e,t,r,f,this.compareMinX);for(let p=t;p<=r;p+=f){const _=Math.min(p+f-1,r);mm(e,p,_,h,this.compareMinY);for(let y=p;y<=_;y+=h){const E=Math.min(y+h-1,_);c.children.push(this._build(e,y,E,s-1))}}return ls(c,this.toBBox),c}_chooseSubtree(e,t,r,s){for(;s.push(t),!(t.leaf||s.length-1===r);){let l=1/0,u=1/0,c;for(let h=0;h<t.children.length;h++){const f=t.children[h],p=_h(f),_=hw(e,f)-p;_<u?(u=_,l=p<l?p:l,c=f):_===u&&p<l&&(l=p,c=f)}t=c||t.children[0]}return t}_insert(e,t,r){const s=r?e:this.toBBox(e),l=[],u=this._chooseSubtree(s,this.data,t,l);for(u.children.push(e),Ao(u,s);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(s,l,t)}_split(e,t){const r=e[t],s=r.children.length,l=this._minEntries;this._chooseSplitAxis(r,l,s);const u=this._chooseSplitIndex(r,l,s),c=ps(r.children.splice(u,r.children.length-u));c.height=r.height,c.leaf=r.leaf,ls(r,this.toBBox),ls(c,this.toBBox),t?e[t-1].children.push(c):this._splitRoot(r,c)}_splitRoot(e,t){this.data=ps([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ls(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let s,l=1/0,u=1/0;for(let c=t;c<=r-t;c++){const h=ko(e,0,c,this.toBBox),f=ko(e,c,r,this.toBBox),p=dw(h,f),_=_h(h)+_h(f);p<l?(l=p,s=c,u=_<u?_:u):p===l&&_<u&&(u=_,s=c)}return s||r-t}_chooseSplitAxis(e,t,r){const s=e.leaf?this.compareMinX:uw,l=e.leaf?this.compareMinY:cw,u=this._allDistMargin(e,t,r,s),c=this._allDistMargin(e,t,r,l);u<c&&e.children.sort(s)}_allDistMargin(e,t,r,s){e.children.sort(s);const l=this.toBBox,u=ko(e,0,t,l),c=ko(e,r-t,r,l);let h=Ra(u)+Ra(c);for(let f=t;f<r-t;f++){const p=e.children[f];Ao(u,e.leaf?l(p):p),h+=Ra(u)}for(let f=r-t-1;f>=t;f--){const p=e.children[f];Ao(c,e.leaf?l(p):p),h+=Ra(c)}return h}_adjustParentBBoxes(e,t,r){for(let s=r;s>=0;s--)Ao(t[s],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():ls(e[t],this.toBBox)}};function aw(i,e,t){if(!t)return e.indexOf(i);for(let r=0;r<e.length;r++)if(t(i,e[r]))return r;return-1}function ls(i,e){ko(i,0,i.children.length,e,i)}function ko(i,e,t,r,s){s||(s=ps(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let l=e;l<t;l++){const u=i.children[l];Ao(s,i.leaf?r(u):u)}return s}function Ao(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function uw(i,e){return i.minX-e.minX}function cw(i,e){return i.minY-e.minY}function _h(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function Ra(i){return i.maxX-i.minX+(i.maxY-i.minY)}function hw(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function dw(i,e){const t=Math.max(i.minX,e.minX),r=Math.max(i.minY,e.minY),s=Math.min(i.maxX,e.maxX),l=Math.min(i.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,l-r)}function yh(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function Ta(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function ps(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mm(i,e,t,r,s){const l=[e,t];for(;l.length;){if(t=l.pop(),e=l.pop(),t-e<=r)continue;const u=e+Math.ceil((t-e)/r/2)*r;H_(i,u,e,t,s),l.push(e,u,u,t)}}function _m(i,e,t,r){return t!==void 0&&r!==void 0?[t/i,r/e]:t!==void 0?t/i:r!==void 0?r/e:1}class sl extends hu{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const u=e.img!==void 0?e.img:null;let c=e.src;De(!(c!==void 0&&u),"`image` and `src` cannot be provided at the same time"),(c===void 0||c.length===0)&&u&&(c=u.src||Oe(u)),De(c!==void 0&&c.length>0,"A defined and non-empty `src` or `image` must be provided"),De(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let h;if(e.src!==void 0?h=Ce.IDLE:u!==void 0&&("complete"in u?u.complete?h=u.src?Ce.LOADED:Ce.IDLE:h=Ce.LOADING:h=Ce.LOADED),this.color_=e.color!==void 0?Ms(e.color):null,this.iconImage_=Cd(u,c,this.crossOrigin_,h,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let f,p;if(e.size)[f,p]=e.size;else{const _=this.getImage(1);if(_.width&&_.height)f=_.width,p=_.height;else if(_ instanceof HTMLImageElement){this.initialOptions_=e;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const E=this.iconImage_.getSize();this.setScale(_m(E[0],E[1],e.width,e.height))};this.listenImageChange(y);return}}f!==void 0&&this.setScale(_m(f,p,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new sl({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ce.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ce.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(xe.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(xe.CHANGE,e)}ready(){return this.iconImage_.ready()}}let Mr=0;const At=1<<Mr++,Ie=1<<Mr++,Wt=1<<Mr++,Ln=1<<Mr++,kr=1<<Mr++,Mo=1<<Mr++,Ia=Math.pow(2,Mr)-1,Md={[At]:"boolean",[Ie]:"number",[Wt]:"string",[Ln]:"color",[kr]:"number[]",[Mo]:"size"},fw=Object.keys(Md).map(Number).sort(qi);function gw(i){return i in Md}function Do(i){const e=[];for(const t of fw)Fo(i,t)&&e.push(Md[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Fo(i,e){return(i&e)===e}function Wi(i,e){return i===e}class st{constructor(e,t){if(!gw(e))throw new Error(`literal expressions must have a specific type, got ${Do(e)}`);this.type=e,this.value=t}}class pw{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function $_(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function pt(i,e,t){switch(typeof i){case"boolean":{if(Wi(e,Wt))return new st(Wt,i?"true":"false");if(!Fo(e,At))throw new Error(`got a boolean, but expected ${Do(e)}`);return new st(At,i)}case"number":{if(Wi(e,Mo))return new st(Mo,Bt(i));if(Wi(e,At))return new st(At,!!i);if(Wi(e,Wt))return new st(Wt,i.toString());if(!Fo(e,Ie))throw new Error(`got a number, but expected ${Do(e)}`);return new st(Ie,i)}case"string":{if(Wi(e,Ln))return new st(Ln,xd(i));if(Wi(e,At))return new st(At,!!i);if(!Fo(e,Wt))throw new Error(`got a string, but expected ${Do(e)}`);return new st(Wt,i)}}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(i.length===0)throw new Error("empty expression");if(typeof i[0]=="string")return Tw(i,e,t);for(const r of i)if(typeof r!="number")throw new Error("expected an array of numbers");if(Wi(e,Mo)){if(i.length!==2)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new st(Mo,i)}if(Wi(e,Ln)){if(i.length===3)return new st(Ln,[...i,1]);if(i.length===4)return new st(Ln,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!Fo(e,kr))throw new Error(`got an array of numbers, but expected ${Do(e)}`);return new st(kr,i)}const B={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},mw={[B.Get]:ve(Se(1,1/0),ym),[B.Var]:ve(Se(1,1),_w),[B.Has]:ve(Se(1,1/0),ym),[B.Id]:ve(yw,as),[B.Concat]:ve(Se(2,1/0),Fe(Wt)),[B.GeometryType]:ve(vw,as),[B.LineMetric]:ve(as),[B.Resolution]:ve(as),[B.Zoom]:ve(as),[B.Time]:ve(as),[B.Any]:ve(Se(2,1/0),Fe(At)),[B.All]:ve(Se(2,1/0),Fe(At)),[B.Not]:ve(Se(1,1),Fe(At)),[B.Equal]:ve(Se(2,2),Fe(Ia)),[B.NotEqual]:ve(Se(2,2),Fe(Ia)),[B.GreaterThan]:ve(Se(2,2),Fe(Ie)),[B.GreaterThanOrEqualTo]:ve(Se(2,2),Fe(Ie)),[B.LessThan]:ve(Se(2,2),Fe(Ie)),[B.LessThanOrEqualTo]:ve(Se(2,2),Fe(Ie)),[B.Multiply]:ve(Se(2,1/0),vm),[B.Coalesce]:ve(Se(2,1/0),vm),[B.Divide]:ve(Se(2,2),Fe(Ie)),[B.Add]:ve(Se(2,1/0),Fe(Ie)),[B.Subtract]:ve(Se(2,2),Fe(Ie)),[B.Clamp]:ve(Se(3,3),Fe(Ie)),[B.Mod]:ve(Se(2,2),Fe(Ie)),[B.Pow]:ve(Se(2,2),Fe(Ie)),[B.Abs]:ve(Se(1,1),Fe(Ie)),[B.Floor]:ve(Se(1,1),Fe(Ie)),[B.Ceil]:ve(Se(1,1),Fe(Ie)),[B.Round]:ve(Se(1,1),Fe(Ie)),[B.Sin]:ve(Se(1,1),Fe(Ie)),[B.Cos]:ve(Se(1,1),Fe(Ie)),[B.Atan]:ve(Se(1,2),Fe(Ie)),[B.Sqrt]:ve(Se(1,1),Fe(Ie)),[B.Match]:ve(Se(4,1/0),Em,xw),[B.Between]:ve(Se(3,3),Fe(Ie)),[B.Interpolate]:ve(Se(6,1/0),Em,ww),[B.Case]:ve(Se(3,1/0),Ew,Sw),[B.In]:ve(Se(2,2),Cw),[B.Number]:ve(Se(1,1/0),Fe(Ia)),[B.String]:ve(Se(1,1/0),Fe(Ia)),[B.Array]:ve(Se(1,1/0),Fe(Ie)),[B.Color]:ve(Se(1,4),Fe(Ie)),[B.Band]:ve(Se(1,3),Fe(Ie)),[B.Palette]:ve(Se(2,2),Rw),[B.ToString]:ve(Se(1,1),Fe(At|Ie|Wt|Ln))};function ym(i,e,t){const r=i.length-1,s=new Array(r);for(let l=0;l<r;++l){const u=i[l+1];switch(typeof u){case"number":{s[l]=new st(Ie,u);break}case"string":{s[l]=new st(Wt,u);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${u}`)}l===0&&t.properties.add(String(u))}return s}function _w(i,e,t){const r=i[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new st(Wt,r)]}function yw(i,e,t){t.featureId=!0}function vw(i,e,t){t.geometryType=!0}function as(i,e,t){const r=i[0];if(i.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Se(i,e){return function(t,r,s){const l=t[0],u=t.length-1;if(i===e){if(u!==i){const c=i===1?"":"s";throw new Error(`expected ${i} argument${c} for ${l}, got ${u}`)}}else if(u<i||u>e){const c=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`expected ${c} arguments for ${l}, got ${u}`)}}}function vm(i,e,t){const r=i.length-1,s=new Array(r);for(let l=0;l<r;++l){const u=pt(i[l+1],e,t);s[l]=u}return s}function Fe(i){return function(e,t,r){const s=e.length-1,l=new Array(s);for(let u=0;u<s;++u){const c=pt(e[u+1],i,r);l[u]=c}return l}}function Ew(i,e,t){const r=i[0],s=i.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${s} instead`)}function Em(i,e,t){const r=i[0],s=i.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${s} instead`)}function xw(i,e,t){const r=i.length-1,s=Wt|Ie|At,l=pt(i[1],s,t),u=pt(i[i.length-1],e,t),c=new Array(r-2);for(let h=0;h<r-2;h+=2){try{const f=pt(i[h+2],l.type,t);c[h]=f}catch(f){throw new Error(`failed to parse argument ${h+1} of match expression: ${f.message}`)}try{const f=pt(i[h+3],u.type,t);c[h+1]=f}catch(f){throw new Error(`failed to parse argument ${h+2} of match expression: ${f.message}`)}}return[l,...c,u]}function ww(i,e,t){const r=i[1];let s;switch(r[0]){case"linear":s=1;break;case"exponential":const h=r[1];if(typeof h!="number"||h<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(h)} instead`);s=h;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const l=new st(Ie,s);let u;try{u=pt(i[2],Ie,t)}catch(h){throw new Error(`failed to parse argument 1 in interpolate expression: ${h.message}`)}const c=new Array(i.length-3);for(let h=0;h<c.length;h+=2){try{const f=pt(i[h+3],Ie,t);c[h]=f}catch(f){throw new Error(`failed to parse argument ${h+2} for interpolate expression: ${f.message}`)}try{const f=pt(i[h+4],e,t);c[h+1]=f}catch(f){throw new Error(`failed to parse argument ${h+3} for interpolate expression: ${f.message}`)}}return[l,u,...c]}function Sw(i,e,t){const r=pt(i[i.length-1],e,t),s=new Array(i.length-1);for(let l=0;l<s.length-1;l+=2){try{const u=pt(i[l+1],At,t);s[l]=u}catch(u){throw new Error(`failed to parse argument ${l} of case expression: ${u.message}`)}try{const u=pt(i[l+2],r.type,t);s[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of case expression: ${u.message}`)}}return s[s.length-1]=r,s}function Cw(i,e,t){let r=i[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],s=Wt}else s=Ie;const l=new Array(r.length);for(let c=0;c<l.length;c++)try{const h=pt(r[c],s,t);l[c]=h}catch(h){throw new Error(`failed to parse haystack item ${c} for "in" expression: ${h.message}`)}return[pt(i[1],s,t),...l]}function Rw(i,e,t){let r;try{r=pt(i[1],Ie,t)}catch(u){throw new Error(`failed to parse first argument in palette expression: ${u.message}`)}const s=i[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const l=new Array(s.length);for(let u=0;u<l.length;u++){let c;try{c=pt(s[u],Ln,t)}catch(h){throw new Error(`failed to parse color at index ${u} in palette expression: ${h.message}`)}if(!(c instanceof st))throw new Error(`the palette color at index ${u} must be a literal value`);l[u]=c}return[r,...l]}function ve(...i){return function(e,t,r){const s=e[0];let l;for(let u=0;u<i.length;u++){const c=i[u](e,t,r);if(u==i.length-1){if(!c)throw new Error("expected last argument validator to return the parsed args");l=c}}return new pw(t,s,...l)}}function Tw(i,e,t){const r=i[0],s=mw[r];if(!s)throw new Error(`unknown operator: ${r}`);return s(i,e,t)}function q_(i){if(!i)return"";const e=i.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return q_(i.getGeometries()[0]);default:return""}}function Q_(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function yi(i,e,t){const r=pt(i,e,t);return An(r)}function An(i,e){if(i instanceof st){if(i.type===Ln&&typeof i.value=="string"){const r=xd(i.value);return function(){return r}}return function(){return i.value}}const t=i.operator;switch(t){case B.Number:case B.String:case B.Coalesce:return Iw(i);case B.Get:case B.Var:case B.Has:return Lw(i);case B.Id:return r=>r.featureId;case B.GeometryType:return r=>r.geometryType;case B.Concat:{const r=i.args.map(s=>An(s));return s=>"".concat(...r.map(l=>l(s).toString()))}case B.Resolution:return r=>r.resolution;case B.Any:case B.All:case B.Between:case B.In:case B.Not:return kw(i);case B.Equal:case B.NotEqual:case B.LessThan:case B.LessThanOrEqualTo:case B.GreaterThan:case B.GreaterThanOrEqualTo:return Pw(i);case B.Multiply:case B.Divide:case B.Add:case B.Subtract:case B.Clamp:case B.Mod:case B.Pow:case B.Abs:case B.Floor:case B.Ceil:case B.Round:case B.Sin:case B.Cos:case B.Atan:case B.Sqrt:return Aw(i);case B.Case:return Mw(i);case B.Match:return Dw(i);case B.Interpolate:return Fw(i);case B.ToString:return Ow(i);default:throw new Error(`Unsupported operator ${t}`)}}function Iw(i,e){const t=i.operator,r=i.args.length,s=new Array(r);for(let l=0;l<r;++l)s[l]=An(i.args[l]);switch(t){case B.Coalesce:return l=>{for(let u=0;u<r;++u){const c=s[u](l);if(typeof c<"u"&&c!==null)return c}throw new Error("Expected one of the values to be non-null")};case B.Number:case B.String:return l=>{for(let u=0;u<r;++u){const c=s[u](l);if(typeof c===t)return c}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Lw(i,e){const r=i.args[0].value;switch(i.operator){case B.Get:return s=>{const l=i.args;let u=s.properties[r];for(let c=1,h=l.length;c<h;++c){const p=l[c].value;u=u[p]}return u};case B.Var:return s=>s.variables[r];case B.Has:return s=>{const l=i.args;if(!(r in s.properties))return!1;let u=s.properties[r];for(let c=1,h=l.length;c<h;++c){const p=l[c].value;if(!u||!Object.hasOwn(u,p))return!1;u=u[p]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function Pw(i,e){const t=i.operator,r=An(i.args[0]),s=An(i.args[1]);switch(t){case B.Equal:return l=>r(l)===s(l);case B.NotEqual:return l=>r(l)!==s(l);case B.LessThan:return l=>r(l)<s(l);case B.LessThanOrEqualTo:return l=>r(l)<=s(l);case B.GreaterThan:return l=>r(l)>s(l);case B.GreaterThanOrEqualTo:return l=>r(l)>=s(l);default:throw new Error(`Unsupported comparison operator ${t}`)}}function kw(i,e){const t=i.operator,r=i.args.length,s=new Array(r);for(let l=0;l<r;++l)s[l]=An(i.args[l]);switch(t){case B.Any:return l=>{for(let u=0;u<r;++u)if(s[u](l))return!0;return!1};case B.All:return l=>{for(let u=0;u<r;++u)if(!s[u](l))return!1;return!0};case B.Between:return l=>{const u=s[0](l),c=s[1](l),h=s[2](l);return u>=c&&u<=h};case B.In:return l=>{const u=s[0](l);for(let c=1;c<r;++c)if(u===s[c](l))return!0;return!1};case B.Not:return l=>!s[0](l);default:throw new Error(`Unsupported logical operator ${t}`)}}function Aw(i,e){const t=i.operator,r=i.args.length,s=new Array(r);for(let l=0;l<r;++l)s[l]=An(i.args[l]);switch(t){case B.Multiply:return l=>{let u=1;for(let c=0;c<r;++c)u*=s[c](l);return u};case B.Divide:return l=>s[0](l)/s[1](l);case B.Add:return l=>{let u=0;for(let c=0;c<r;++c)u+=s[c](l);return u};case B.Subtract:return l=>s[0](l)-s[1](l);case B.Clamp:return l=>{const u=s[0](l),c=s[1](l);if(u<c)return c;const h=s[2](l);return u>h?h:u};case B.Mod:return l=>s[0](l)%s[1](l);case B.Pow:return l=>Math.pow(s[0](l),s[1](l));case B.Abs:return l=>Math.abs(s[0](l));case B.Floor:return l=>Math.floor(s[0](l));case B.Ceil:return l=>Math.ceil(s[0](l));case B.Round:return l=>Math.round(s[0](l));case B.Sin:return l=>Math.sin(s[0](l));case B.Cos:return l=>Math.cos(s[0](l));case B.Atan:return r===2?l=>Math.atan2(s[0](l),s[1](l)):l=>Math.atan(s[0](l));case B.Sqrt:return l=>Math.sqrt(s[0](l));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Mw(i,e){const t=i.args.length,r=new Array(t);for(let s=0;s<t;++s)r[s]=An(i.args[s]);return s=>{for(let l=0;l<t-1;l+=2)if(r[l](s))return r[l+1](s);return r[t-1](s)}}function Dw(i,e){const t=i.args.length,r=new Array(t);for(let s=0;s<t;++s)r[s]=An(i.args[s]);return s=>{const l=r[0](s);for(let u=1;u<t;u+=2)if(l===r[u](s))return r[u+1](s);return r[t-1](s)}}function Fw(i,e){const t=i.args.length,r=new Array(t);for(let s=0;s<t;++s)r[s]=An(i.args[s]);return s=>{const l=r[0](s),u=r[1](s);let c,h;for(let f=2;f<t;f+=2){const p=r[f](s);let _=r[f+1](s);const y=Array.isArray(_);if(y&&(_=Ix(_)),p>=u)return f===2?_:y?Nw(l,u,c,h,p,_):Oo(l,u,c,h,p,_);c=p,h=_}return h}}function Ow(i,e){const t=i.operator,r=i.args.length,s=new Array(r);for(let l=0;l<r;++l)s[l]=An(i.args[l]);switch(t){case B.ToString:return l=>{const u=s[0](l);return i.args[0].type===Ln?wd(u):u.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Oo(i,e,t,r,s,l){const u=s-t;if(u===0)return r;const c=e-t,h=i===1?c/u:(Math.pow(i,c)-1)/(Math.pow(i,u)-1);return r+h*(l-r)}function Nw(i,e,t,r,s,l){if(s-t===0)return r;const c=sm(r),h=sm(l);let f=h[2]-c[2];f>180?f-=360:f<-180&&(f+=360);const p=[Oo(i,e,t,c[0],s,h[0]),Oo(i,e,t,c[1],s,h[1]),c[2]+Oo(i,e,t,0,s,f),Oo(i,e,t,r[3],s,l[3])];return N_(Lx(p))}function zw(i){return!0}function Gw(i){const e=$_(),t=bw(i,e),r=Q_();return function(s,l){if(r.properties=s.getPropertiesInternal(),r.resolution=l,e.featureId){const u=s.getId();u!==void 0?r.featureId=u:r.featureId=null}return e.geometryType&&(r.geometryType=q_(s.getGeometry())),t(r)}}function xm(i){const e=$_(),t=i.length,r=new Array(t);for(let u=0;u<t;++u)r[u]=bh(i[u],e);const s=Q_(),l=new Array(t);return function(u,c){if(s.properties=u.getPropertiesInternal(),s.resolution=c,e.featureId){const f=u.getId();f!==void 0?s.featureId=f:s.featureId=null}let h=0;for(let f=0;f<t;++f){const p=r[f](s);p&&(l[h]=p,h+=1)}return l.length=h,l}}function bw(i,e){const t=i.length,r=new Array(t);for(let s=0;s<t;++s){const l=i[s],u="filter"in l?yi(l.filter,At,e):zw;let c;if(Array.isArray(l.style)){const h=l.style.length;c=new Array(h);for(let f=0;f<h;++f)c[f]=bh(l.style[f],e)}else c=[bh(l.style,e)];r[s]={filter:u,styles:c}}return function(s){const l=[];let u=!1;for(let c=0;c<t;++c){const h=r[c].filter;if(h(s)&&!(i[c].else&&u)){u=!0;for(const f of r[c].styles){const p=f(s);p&&l.push(p)}}}return l}}function bh(i,e){const t=$o(i,"",e),r=qo(i,"",e),s=Uw(i,e),l=Ww(i,e),u=jt(i,"z-index",e);if(!t&&!r&&!s&&!l&&!Ps(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const c=new er;return function(h){let f=!0;if(t){const p=t(h);p&&(f=!1),c.setFill(p)}if(r){const p=r(h);p&&(f=!1),c.setStroke(p)}if(s){const p=s(h);p&&(f=!1),c.setText(p)}if(l){const p=l(h);p&&(f=!1),c.setImage(p)}return u&&c.setZIndex(u(h)),f?null:c}}function $o(i,e,t){let r;if(e+"fill-pattern-src"in i)r=Yw(i,e+"fill-",t);else{if(i[e+"fill-color"]==="none")return l=>null;r=Dd(i,e+"fill-color",t)}if(!r)return null;const s=new rl;return function(l){const u=r(l);return u===Ed?null:(s.setColor(u),s)}}function qo(i,e,t){const r=jt(i,e+"stroke-width",t),s=Dd(i,e+"stroke-color",t);if(!r&&!s)return null;const l=ci(i,e+"stroke-line-cap",t),u=ci(i,e+"stroke-line-join",t),c=J_(i,e+"stroke-line-dash",t),h=jt(i,e+"stroke-line-dash-offset",t),f=jt(i,e+"stroke-miter-limit",t),p=new cu;return function(_){if(s){const y=s(_);if(y===Ed)return null;p.setColor(y)}if(r&&p.setWidth(r(_)),l){const y=l(_);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");p.setLineCap(y)}if(u){const y=u(_);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");p.setLineJoin(y)}return c&&p.setLineDash(c(_)),h&&p.setLineDashOffset(h(_)),f&&p.setMiterLimit(f(_)),p}}function Uw(i,e){const t="text-",r=ci(i,t+"value",e);if(!r)return null;const s=$o(i,t,e),l=$o(i,t+"background-",e),u=qo(i,t,e),c=qo(i,t+"background-",e),h=ci(i,t+"font",e),f=jt(i,t+"max-angle",e),p=jt(i,t+"offset-x",e),_=jt(i,t+"offset-y",e),y=Rs(i,t+"overflow",e),E=ci(i,t+"placement",e),v=jt(i,t+"repeat",e),w=mu(i,t+"scale",e),S=Rs(i,t+"rotate-with-view",e),C=jt(i,t+"rotation",e),R=ci(i,t+"align",e),M=ci(i,t+"justify",e),L=ci(i,t+"baseline",e),A=Rs(i,t+"keep-upright",e),W=J_(i,t+"padding",e),V=_u(i,t+"declutter-mode"),b=new Td({declutterMode:V});return function(U){if(b.setText(r(U)),s&&b.setFill(s(U)),l&&b.setBackgroundFill(l(U)),u&&b.setStroke(u(U)),c&&b.setBackgroundStroke(c(U)),h&&b.setFont(h(U)),f&&b.setMaxAngle(f(U)),p&&b.setOffsetX(p(U)),_&&b.setOffsetY(_(U)),y&&b.setOverflow(y(U)),E){const Y=E(U);if(Y!=="point"&&Y!=="line")throw new Error("Expected point or line for text-placement");b.setPlacement(Y)}if(v&&b.setRepeat(v(U)),w&&b.setScale(w(U)),S&&b.setRotateWithView(S(U)),C&&b.setRotation(C(U)),R){const Y=R(U);if(Y!=="left"&&Y!=="center"&&Y!=="right"&&Y!=="end"&&Y!=="start")throw new Error("Expected left, right, center, start, or end for text-align");b.setTextAlign(Y)}if(M){const Y=M(U);if(Y!=="left"&&Y!=="right"&&Y!=="center")throw new Error("Expected left, right, or center for text-justify");b.setJustify(Y)}if(L){const Y=L(U);if(Y!=="bottom"&&Y!=="top"&&Y!=="middle"&&Y!=="alphabetic"&&Y!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");b.setTextBaseline(Y)}return W&&b.setPadding(W(U)),A&&b.setKeepUpright(A(U)),b}}function Ww(i,e){return"icon-src"in i?Xw(i,e):"shape-points"in i?jw(i,e):"circle-radius"in i?Bw(i,e):null}function Xw(i,e){const t="icon-",r=t+"src",s=e0(i[r],r),l=Ba(i,t+"anchor",e),u=mu(i,t+"scale",e),c=jt(i,t+"opacity",e),h=Ba(i,t+"displacement",e),f=jt(i,t+"rotation",e),p=Rs(i,t+"rotate-with-view",e),_=Sm(i,t+"anchor-origin"),y=Cm(i,t+"anchor-x-units"),E=Cm(i,t+"anchor-y-units"),v=Zw(i,t+"color"),w=Kw(i,t+"cross-origin"),S=Hw(i,t+"offset"),C=Sm(i,t+"offset-origin"),R=Ya(i,t+"width"),M=Ya(i,t+"height"),L=Vw(i,t+"size"),A=_u(i,t+"declutter-mode"),W=new sl({src:s,anchorOrigin:_,anchorXUnits:y,anchorYUnits:E,color:v,crossOrigin:w,offset:S,offsetOrigin:C,height:M,width:R,size:L,declutterMode:A});return function(V){return c&&W.setOpacity(c(V)),h&&W.setDisplacement(h(V)),f&&W.setRotation(f(V)),p&&W.setRotateWithView(p(V)),u&&W.setScale(u(V)),l&&W.setAnchor(l(V)),W}}function jw(i,e){const t="shape-",r=t+"points",s=t+"radius",l=Uh(i[r],r),u=Uh(i[s],s),c=$o(i,t,e),h=qo(i,t,e),f=mu(i,t+"scale",e),p=Ba(i,t+"displacement",e),_=jt(i,t+"rotation",e),y=Rs(i,t+"rotate-with-view",e),E=Ya(i,t+"radius2"),v=Ya(i,t+"angle"),w=_u(i,t+"declutter-mode"),S=new fu({points:l,radius:u,radius2:E,angle:v,declutterMode:w});return function(C){return c&&S.setFill(c(C)),h&&S.setStroke(h(C)),p&&S.setDisplacement(p(C)),_&&S.setRotation(_(C)),y&&S.setRotateWithView(y(C)),f&&S.setScale(f(C)),S}}function Bw(i,e){const t="circle-",r=$o(i,t,e),s=qo(i,t,e),l=jt(i,t+"radius",e),u=mu(i,t+"scale",e),c=Ba(i,t+"displacement",e),h=jt(i,t+"rotation",e),f=Rs(i,t+"rotate-with-view",e),p=_u(i,t+"declutter-mode"),_=new gu({radius:5,declutterMode:p});return function(y){return l&&_.setRadius(l(y)),r&&_.setFill(r(y)),s&&_.setStroke(s(y)),c&&_.setDisplacement(c(y)),h&&_.setRotation(h(y)),f&&_.setRotateWithView(f(y)),u&&_.setScale(u(y)),_}}function jt(i,e,t){if(!(e in i))return;const r=yi(i[e],Ie,t);return function(s){return Uh(r(s),e)}}function ci(i,e,t){if(!(e in i))return null;const r=yi(i[e],Wt,t);return function(s){return e0(r(s),e)}}function Yw(i,e,t){const r=ci(i,e+"pattern-src",t),s=wm(i,e+"pattern-offset",t),l=wm(i,e+"pattern-size",t),u=Dd(i,e+"color",t);return function(c){return{src:r(c),offset:s&&s(c),size:l&&l(c),color:u&&u(c)}}}function Rs(i,e,t){if(!(e in i))return null;const r=yi(i[e],At,t);return function(s){const l=r(s);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function Dd(i,e,t){if(!(e in i))return null;const r=yi(i[e],Ln,t);return function(s){return t0(r(s),e)}}function J_(i,e,t){if(!(e in i))return null;const r=yi(i[e],kr,t);return function(s){return ol(r(s),e)}}function Ba(i,e,t){if(!(e in i))return null;const r=yi(i[e],kr,t);return function(s){const l=ol(r(s),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function wm(i,e,t){if(!(e in i))return null;const r=yi(i[e],kr,t);return function(s){return n0(r(s),e)}}function mu(i,e,t){if(!(e in i))return null;const r=yi(i[e],kr|Ie,t);return function(s){return $w(r(s),e)}}function Ya(i,e){const t=i[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Vw(i,e){const t=i[e];if(t!==void 0){if(typeof t=="number")return Bt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Kw(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function Sm(i,e){const t=i[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Cm(i,e){const t=i[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Hw(i,e){const t=i[e];if(t!==void 0)return ol(t,e)}function _u(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Zw(i,e){const t=i[e];if(t!==void 0)return t0(t,e)}function ol(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let r=0;r<t;++r)if(typeof i[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function e0(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function Uh(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function t0(i,e){if(typeof i=="string")return i;const t=ol(i,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function n0(i,e){const t=ol(i,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function $w(i,e){return typeof i=="number"?i:n0(i,e)}const Rm={RENDER_ORDER:"renderOrder"};class i0 extends pu{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Rm.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new Z_(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Rm.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?Y_:e;const t=qw(e);this.styleFunction_=e===null?void 0:Kx(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function qw(i){if(i===void 0)return Y_;if(!i)return null;if(typeof i=="function"||i instanceof er)return i;if(!Array.isArray(i))return xm([i]);if(i.length===0)return[];const e=i.length,t=i[0];if(t instanceof er){const s=new Array(e);for(let l=0;l<e;++l){const u=i[l];if(!(u instanceof er))throw new Error("Expected a list of style instances");s[l]=u}return s}if("style"in t){const s=new Array(e);for(let l=0;l<e;++l){const u=i[l];if(!("style"in u))throw new Error("Expected a list of rules with a style property");s[l]=u}return Gw(s)}return xm(i)}const ge={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},La=[ge.FILL],$i=[ge.STROKE],Lr=[ge.BEGIN_PATH],Tm=[ge.CLOSE_PATH];class r0{drawCustom(e,t,r,s,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class ll extends r0{constructor(e,t,r,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,l=this.coordinates;let u=l.length;for(let c=0,h=e.length;c<h;c+=t)s[0]=e[c],s[1]=e[c+1],ks(r,s)&&(l[u++]=s[0],l[u++]=s[1]);return u}appendFlatLineCoordinates(e,t,r,s,l,u){const c=this.coordinates;let h=c.length;const f=this.getBufferedMaxExtent();u&&(t+=s);let p=e[t],_=e[t+1];const y=this.tmpCoordinate_;let E=!0,v,w,S;for(v=t+s;v<r;v+=s)y[0]=e[v],y[1]=e[v+1],S=kh(f,y),S!==w?(E&&(c[h++]=p,c[h++]=_,E=!1),c[h++]=y[0],c[h++]=y[1]):S===ut.INTERSECTING?(c[h++]=y[0],c[h++]=y[1],E=!1):E=!0,p=y[0],_=y[1],w=S;return(l&&E||v===t+s)&&(c[h++]=p,c[h++]=_),h}drawCustomCoordinates_(e,t,r,s,l){for(let u=0,c=r.length;u<c;++u){const h=r[u],f=this.appendFlatLineCoordinates(e,t,h,s,!1,!1);l.push(f),t=h}return t}drawCustom(e,t,r,s,l){this.beginGeometry(e,t,l);const u=e.getType(),c=e.getStride(),h=this.coordinates.length;let f,p,_,y,E;switch(u){case"MultiPolygon":f=e.getOrientedFlatCoordinates(),y=[];const v=e.getEndss();E=0;for(let w=0,S=v.length;w<S;++w){const C=[];E=this.drawCustomCoordinates_(f,E,v[w],c,C),y.push(C)}this.instructions.push([ge.CUSTOM,h,y,e,r,em,l]),this.hitDetectionInstructions.push([ge.CUSTOM,h,y,e,s||r,em,l]);break;case"Polygon":case"MultiLineString":_=[],f=u=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),E=this.drawCustomCoordinates_(f,0,e.getEnds(),c,_),this.instructions.push([ge.CUSTOM,h,_,e,r,Ua,l]),this.hitDetectionInstructions.push([ge.CUSTOM,h,_,e,s||r,Ua,l]);break;case"LineString":case"Circle":f=e.getFlatCoordinates(),p=this.appendFlatLineCoordinates(f,0,f.length,c,!1,!1),this.instructions.push([ge.CUSTOM,h,p,e,r,Es,l]),this.hitDetectionInstructions.push([ge.CUSTOM,h,p,e,s||r,Es,l]);break;case"MultiPoint":f=e.getFlatCoordinates(),p=this.appendFlatPointCoordinates(f,c),p>h&&(this.instructions.push([ge.CUSTOM,h,p,e,r,Es,l]),this.hitDetectionInstructions.push([ge.CUSTOM,h,p,e,s||r,Es,l]));break;case"Point":f=e.getFlatCoordinates(),this.coordinates.push(f[0],f[1]),p=this.coordinates.length,this.instructions.push([ge.CUSTOM,h,p,e,r,void 0,l]),this.hitDetectionInstructions.push([ge.CUSTOM,h,p,e,s||r,void 0,l]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[ge.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ge.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let s,l,u=-1;for(t=0;t<r;++t)s=e[t],l=s[0],l==ge.END_GEOMETRY?u=t:l==ge.BEGIN_GEOMETRY&&(s[2]=t,cE(this.hitDetectionInstructions,u,t),u=-1)}setFillStrokeStyle(e,t){const r=this.state;if(e){const s=e.getColor();r.fillPatternScale=s&&typeof s=="object"&&"src"in s?this.pixelRatio:1,r.fillStyle=Bn(s||Ut)}else r.fillStyle=void 0;if(t){const s=t.getColor();r.strokeStyle=Bn(s||Ko);const l=t.getLineCap();r.lineCap=l!==void 0?l:Ds;const u=t.getLineDash();r.lineDash=u?u.slice():di;const c=t.getLineDashOffset();r.lineDashOffset=c||fi;const h=t.getLineJoin();r.lineJoin=h!==void 0?h:Fs;const f=t.getWidth();r.lineWidth=f!==void 0?f:Zo;const p=t.getMiterLimit();r.miterLimit=p!==void 0?p:Vo,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(e){const t=e.fillStyle,r=[ge.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[ge.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,s=e.lineCap,l=e.lineDash,u=e.lineDashOffset,c=e.lineJoin,h=e.lineWidth,f=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=s||l!=e.currentLineDash&&!rr(e.currentLineDash,l)||e.currentLineDashOffset!=u||e.currentLineJoin!=c||e.currentLineWidth!=h||e.currentMiterLimit!=f)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=s,e.currentLineDash=l,e.currentLineDashOffset=u,e.currentLineJoin=c,e.currentLineWidth=h,e.currentMiterLimit=f)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[ge.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=u_(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;nd(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Qw extends ll{constructor(e,t,r,s){super(e,t,r,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!ks(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const s=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length,c=this.appendFlatPointCoordinates(s,l);this.instructions.push([ge.DRAW_IMAGE,u,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ge.DRAW_IMAGE,u,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const s=e.getFlatCoordinates(),l=[];for(let h=0,f=s.length;h<f;h+=e.getStride())(!this.maxExtent||ks(this.maxExtent,s.slice(h,h+2)))&&l.push(s[h],s[h+1]);const u=this.coordinates.length,c=this.appendFlatPointCoordinates(l,2);this.instructions.push([ge.DRAW_IMAGE,u,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ge.DRAW_IMAGE,u,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),s=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Jw extends ll{constructor(e,t,r,s){super(e,t,r,s)}drawFlatCoordinates_(e,t,r,s){const l=this.coordinates.length,u=this.appendFlatLineCoordinates(e,t,r,s,!1,!1),c=[ge.MOVE_TO_LINE_TO,l,u];return this.instructions.push(c),this.hitDetectionInstructions.push(c),r}drawLineString(e,t,r){const s=this.state,l=s.strokeStyle,u=s.lineWidth;if(l===void 0||u===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,di,fi],Lr);const c=e.getFlatCoordinates(),h=e.getStride();this.drawFlatCoordinates_(c,0,c.length,h),this.hitDetectionInstructions.push($i),this.endGeometry(t)}drawMultiLineString(e,t,r){const s=this.state,l=s.strokeStyle,u=s.lineWidth;if(l===void 0||u===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,di,fi],Lr);const c=e.getEnds(),h=e.getFlatCoordinates(),f=e.getStride();let p=0;for(let _=0,y=c.length;_<y;++_)p=this.drawFlatCoordinates_(h,p,c[_],f);this.hitDetectionInstructions.push($i),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push($i),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push($i),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Lr)}}class Im extends ll{constructor(e,t,r,s){super(e,t,r,s)}drawFlatCoordinatess_(e,t,r,s){const l=this.state,u=l.fillStyle!==void 0,c=l.strokeStyle!==void 0,h=r.length;this.instructions.push(Lr),this.hitDetectionInstructions.push(Lr);for(let f=0;f<h;++f){const p=r[f],_=this.coordinates.length,y=this.appendFlatLineCoordinates(e,t,p,s,!0,!c),E=[ge.MOVE_TO_LINE_TO,_,y];this.instructions.push(E),this.hitDetectionInstructions.push(E),c&&(this.instructions.push(Tm),this.hitDetectionInstructions.push(Tm)),t=p}return u&&(this.instructions.push(La),this.hitDetectionInstructions.push(La)),c&&(this.instructions.push($i),this.hitDetectionInstructions.push($i)),t}drawCircle(e,t,r){const s=this.state,l=s.fillStyle,u=s.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_FILL_STYLE,Ut]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,di,fi]);const c=e.getFlatCoordinates(),h=e.getStride(),f=this.coordinates.length;this.appendFlatLineCoordinates(c,0,c.length,h,!1,!1);const p=[ge.CIRCLE,f];this.instructions.push(Lr,p),this.hitDetectionInstructions.push(Lr,p),s.fillStyle!==void 0&&(this.instructions.push(La),this.hitDetectionInstructions.push(La)),s.strokeStyle!==void 0&&(this.instructions.push($i),this.hitDetectionInstructions.push($i)),this.endGeometry(t)}drawPolygon(e,t,r){const s=this.state,l=s.fillStyle,u=s.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_FILL_STYLE,Ut]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,di,fi]);const c=e.getEnds(),h=e.getOrientedFlatCoordinates(),f=e.getStride();this.drawFlatCoordinatess_(h,0,c,f),this.endGeometry(t)}drawMultiPolygon(e,t,r){const s=this.state,l=s.fillStyle,u=s.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_FILL_STYLE,Ut]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,di,fi]);const c=e.getEndss(),h=e.getOrientedFlatCoordinates(),f=e.getStride();let p=0;for(let _=0,y=c.length;_<y;++_)p=this.drawFlatCoordinatess_(h,p,c[_],f);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,s=t.length;r<s;++r)t[r]=Cr(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function eS(i,e,t,r,s){const l=[];let u=t,c=0,h=e.slice(t,2);for(;c<i&&u+s<r;){const[f,p]=h.slice(-2),_=e[u+s],y=e[u+s+1],E=Math.sqrt((_-f)*(_-f)+(y-p)*(y-p));if(c+=E,c>=i){const v=(i-c+E)/E,w=cn(f,_,v),S=cn(p,y,v);h.push(w,S),l.push(h),h=[w,S],c==i&&(u+=s),c=0}else if(c<i)h.push(e[u+s],e[u+s+1]),u+=s;else{const v=E-c,w=cn(f,_,v/E),S=cn(p,y,v/E);h.push(w,S),l.push(h),h=[w,S],c=0,u+=s}}return c>0&&l.push(h),l}function tS(i,e,t,r,s){let l=t,u=t,c=0,h=0,f=t,p,_,y,E,v,w,S,C,R,M;for(_=t;_<r;_+=s){const L=e[_],A=e[_+1];v!==void 0&&(R=L-v,M=A-w,E=Math.sqrt(R*R+M*M),S!==void 0&&(h+=y,p=Math.acos((S*R+C*M)/(y*E)),p>i&&(h>c&&(c=h,l=f,u=_),h=0,f=_-s)),y=E,S=R,C=M),v=L,w=A}return h+=E,h>c?[f,_]:[l,u]}const Va={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class nS extends ll{constructor(e,t,r,s){super(e,t,r,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ut]={fillStyle:Ut},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const s=this.textFillState_,l=this.textStrokeState_,u=this.textState_;if(this.text_===""||!u||!s&&!l)return;const c=this.coordinates;let h=c.length;const f=e.getType();let p=null,_=e.getStride();if(u.placement==="line"&&(f=="LineString"||f=="MultiLineString"||f=="Polygon"||f=="MultiPolygon")){if(!Xt(this.maxExtent,e.getExtent()))return;let y;if(p=e.getFlatCoordinates(),f=="LineString")y=[p.length];else if(f=="MultiLineString")y=e.getEnds();else if(f=="Polygon")y=e.getEnds().slice(0,1);else if(f=="MultiPolygon"){const S=e.getEndss();y=[];for(let C=0,R=S.length;C<R;++C)y.push(S[C][0])}this.beginGeometry(e,t,r);const E=u.repeat,v=E?void 0:u.textAlign;let w=0;for(let S=0,C=y.length;S<C;++S){let R;E?R=eS(E*this.resolution,p,w,y[S],_):R=[p.slice(w,y[S])];for(let M=0,L=R.length;M<L;++M){const A=R[M];let W=0,V=A.length;if(v==null){const U=tS(u.maxAngle,A,0,A.length,2);W=U[0],V=U[1]}for(let U=W;U<V;U+=_)c.push(A[U],A[U+1]);const b=c.length;w=y[S],this.drawChars_(h,b),h=b}}this.endGeometry(t)}else{let y=u.overflow?null:[];switch(f){case"Point":case"MultiPoint":p=e.getFlatCoordinates();break;case"LineString":p=e.getFlatMidpoint();break;case"Circle":p=e.getCenter();break;case"MultiLineString":p=e.getFlatMidpoints(),_=2;break;case"Polygon":p=e.getFlatInteriorPoint(),u.overflow||y.push(p[2]/this.resolution),_=3;break;case"MultiPolygon":const R=e.getFlatInteriorPoints();p=[];for(let M=0,L=R.length;M<L;M+=3)u.overflow||y.push(R[M+2]/this.resolution),p.push(R[M],R[M+1]);if(p.length===0)return;_=2;break}const E=this.appendFlatPointCoordinates(p,_);if(E===h)return;if(y&&(E-h)/2!==p.length/_){let R=h/2;y=y.filter((M,L)=>{const A=c[(R+L)*2]===p[L*_]&&c[(R+L)*2+1]===p[L*_+1];return A||--R,A})}this.saveTextStates_(),(u.backgroundFill||u.backgroundStroke)&&(this.setFillStrokeStyle(u.backgroundFill,u.backgroundStroke),u.backgroundFill&&this.updateFillStyle(this.state,this.createFill),u.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,r);let v=u.padding;if(v!=Ir&&(u.scale[0]<0||u.scale[1]<0)){let R=u.padding[0],M=u.padding[1],L=u.padding[2],A=u.padding[3];u.scale[0]<0&&(M=-M,A=-A),u.scale[1]<0&&(R=-R,L=-L),v=[R,M,L,A]}const w=this.pixelRatio;this.instructions.push([ge.DRAW_IMAGE,h,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,v==Ir?Ir:v.map(function(R){return R*w}),!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const S=1/w,C=this.state.fillStyle;u.backgroundFill&&(this.state.fillStyle=Ut,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([ge.DRAW_IMAGE,h,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[S,S],NaN,this.declutterMode_,this.declutterImageWithText_,v,!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ut:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),u.backgroundFill&&(this.state.fillStyle=C,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:t.font,textAlign:t.textAlign||Ho,justify:t.justify,textBaseline:t.textBaseline||Xa,scale:t.scale});const u=this.fillKey_;r&&(u in this.fillStates||(this.fillStates[u]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,s=this.textState_,l=this.strokeKey_,u=this.textKey_,c=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,f=Va[s.textBaseline],p=this.textOffsetY_*h,_=this.text_,y=r?r.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([ge.DRAW_CHARS,e,t,f,s.overflow,c,s.maxAngle,h,p,l,y*h,_,u,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([ge.DRAW_CHARS,e,t,f,s.overflow,c&&Ut,s.maxAngle,h,p,l,y*h,_,u,1/h,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,s,l;if(!e)this.text_="";else{const u=e.getFill();u?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Bn(u.getColor()||Ut)):(s=null,this.textFillState_=s);const c=e.getStroke();if(!c)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const w=c.getLineDash(),S=c.getLineDashOffset(),C=c.getWidth(),R=c.getMiterLimit();l.lineCap=c.getLineCap()||Ds,l.lineDash=w?w.slice():di,l.lineDashOffset=S===void 0?fi:S,l.lineJoin=c.getLineJoin()||Fs,l.lineWidth=C===void 0?Zo:C,l.miterLimit=R===void 0?Vo:R,l.strokeStyle=Bn(c.getColor()||Ko)}r=this.textState_;const h=e.getFont()||j_;Xx(h);const f=e.getScaleArray();r.overflow=e.getOverflow(),r.font=h,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||Xa,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Ir,r.scale=f===void 0?[1,1]:f;const p=e.getOffsetX(),_=e.getOffsetY(),y=e.getRotateWithView(),E=e.getKeepUpright(),v=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=p===void 0?0:p,this.textOffsetY_=_===void 0?0:_,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=E===void 0?!0:E,this.textRotation_=v===void 0?0:v,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:Oe(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?typeof s.fillStyle=="string"?s.fillStyle:"|"+Oe(s.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const iS={Circle:Im,Default:ll,Image:Qw,LineString:Jw,Polygon:Im,Text:nS};class rS{constructor(e,t,r,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const s in r){const l=r[s].finish();e[t][s]=l}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[r];s===void 0&&(s={},this.buildersByZIndex_[r]=s);let l=s[t];if(l===void 0){const u=iS[t];l=new u(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=l}return l}}const sS=5;class oS extends nl{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=sS}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Me()}getData(e){return null}prepareFrame(e){return Me()}renderFrame(e,t){return Me()}forEachFeatureAtCoordinate(e,t,r,s,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Ce.LOADED||t.getState()===Ce.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Ce.LOADED&&t!=Ce.ERROR&&e.addEventListener(xe.CHANGE,this.boundHandleImageChange_),t==Ce.IDLE&&(e.load(),t=e.getState()),t==Ce.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class s0 extends _i{constructor(e,t,r,s){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=s}}class o0{constructor(){vp(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Wa(),{get:(e,t)=>{if(typeof Wa()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,r),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,s=t.length;r<s;++r){const l=t[r];if(typeof l=="function"){l(e);continue}const u=t[++r];if(typeof e[l]=="function")e[l](...u);else{if(typeof u=="function"){e[l]=u(e);continue}e[l]=u}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Lm=[];let ms=null;function lS(){ms=nt(1,1,void 0,{willReadFrequently:!0})}class l0 extends oS{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=kn(),this.pixelTransform=kn(),this.inversePixelTransform=kn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){ms||lS(),ms.clearRect(0,0,1,1);let s;try{ms.drawImage(e,t,r,1,1,0,0,1,1),s=ms.getImageData(0,0,1,1).data}catch{return ms=null,null}return s}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const s=this.getLayer().getClassName();let l,u;if(e&&e.className===s&&(!r||e&&e.style.backgroundColor&&rr(Ms(e.style.backgroundColor),Ms(r)))){const c=e.firstElementChild;c instanceof HTMLCanvasElement&&(u=c.getContext("2d"))}if(u&&u.canvas.style.transform===t?(this.container=e,this.context=u,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=s;let c=l.style;c.position="absolute",c.width="100%",c.height="100%",u=nt();const h=u.canvas;l.appendChild(h),c=h.style,c.position="absolute",c.left="0",c.transformOrigin="top left",this.container=l,this.context=u}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const s=pi(r),l=ru(r),u=iu(r),c=nu(r);ct(t.coordinateToPixelTransform,s),ct(t.coordinateToPixelTransform,l),ct(t.coordinateToPixelTransform,u),ct(t.coordinateToPixelTransform,c);const h=this.inversePixelTransform;ct(h,s),ct(h,l),ct(h,u),ct(h,c),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(u[0]),Math.round(u[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.clip()}prepareContainer(e,t){const r=e.extent,s=e.viewState.resolution,l=e.viewState.rotation,u=e.pixelRatio,c=Math.round(ke(r)/s*u),h=Math.round(ht(r)/s*u);gi(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,l,-c/2,-h/2),a_(this.inversePixelTransform,this.pixelTransform);const f=yE(this.pixelTransform);if(this.useContainer(t,f,this.getBackground(e)),!this.containerReused){const p=this.context.canvas;p.width!=c||p.height!=h?(p.width=c,p.height=h):this.context.clearRect(0,0,c,h),f!==p.style.transform&&(p.style.transform=f)}}dispatchRenderEvent_(e,t,r){const s=this.getLayer();if(s.hasListener(e)){const l=new s0(e,this.inversePixelTransform,r,t);s.dispatchEvent(l)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(dn.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(dn.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new o0),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(dn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(dn.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,s,l,u,c){const h=l/2,f=u/2,p=s/t,_=-p,y=-e[0]+c,E=-e[1];return gi(this.tempTransform,h,f,p,_,-r,y,E)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function aS(i,e,t,r,s,l,u,c,h,f,p,_,y=!0){let E=i[e],v=i[e+1],w=0,S=0,C=0,R=0;function M(){w=E,S=v,e+=r,E=i[e],v=i[e+1],R+=C,C=Math.sqrt((E-w)*(E-w)+(v-S)*(v-S))}do M();while(e<t-r&&R+C<l);let L=C===0?0:(l-R)/C;const A=cn(w,E,L),W=cn(S,v,L),V=e-r,b=R,U=l+c*h(f,s,p);for(;e<t-r&&R+C<U;)M();L=C===0?0:(U-R)/C;const Y=cn(w,E,L),ne=cn(S,v,L);let q=!1;if(y)if(_){const Z=[A,W,Y,ne];T_(Z,0,4,2,_,Z,Z),q=Z[0]>Z[2]}else q=A>Y;const ie=Math.PI,ee=[],te=V+r===e;e=V,C=0,R=b,E=i[e],v=i[e+1];let re;if(te){M(),re=Math.atan2(v-S,E-w),q&&(re+=re>0?-ie:ie);const Z=(Y+A)/2,j=(ne+W)/2;return ee[0]=[Z,j,(U-l)/2,re,s],ee}s=s.replace(/\n/g," ");for(let Z=0,j=s.length;Z<j;){M();let Q=Math.atan2(v-S,E-w);if(q&&(Q+=Q>0?-ie:ie),re!==void 0){let ce=Q-re;if(ce+=ce>ie?-2*ie:ce<-ie?2*ie:0,Math.abs(ce)>u)return null}re=Q;const G=Z;let I=0;for(;Z<j;++Z){const ce=q?j-Z-1:Z,de=c*h(f,s[ce],p);if(e+r<t&&R+C<l+I+de/2)break;I+=de}if(Z===G)continue;const N=q?s.substring(j-G,j-Z):s.substring(G,Z);L=C===0?0:(l+I/2-R)/C;const se=cn(w,E,L),z=cn(S,v,L);ee.push([se,z,I/2,Q,N]),l+=I}return ee}const us=qt(),Xi=[],oi=[],li=[],ji=[];function Pm(i){return i[3].declutterBox}const km=new RegExp("[-----]");function vh(i,e){return e==="start"?e=km.test(i)?"right":"left":e==="end"&&(e=km.test(i)?"left":"right"),Va[e]}function uS(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}class cS{constructor(e,t,r,s,l){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=kn(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new o0:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,s){const l=e+t+r+s;if(this.labels_[l])return this.labels_[l];const u=s?this.strokeStates[s]:null,c=r?this.fillStates[r]:null,h=this.textStates[t],f=this.pixelRatio,p=[h.scale[0]*f,h.scale[1]*f],_=h.justify?Va[h.justify]:vh(Array.isArray(e)?e[0]:e,h.textAlign||Ho),y=s&&u.lineWidth?u.lineWidth:0,E=Array.isArray(e)?e:String(e).split(`
`).reduce(uS,[]),{width:v,height:w,widths:S,heights:C,lineWidths:R}=Bx(h,E),M=v+y,L=[],A=(M+2)*p[0],W=(w+y)*p[1],V={width:A<0?Math.floor(A):Math.ceil(A),height:W<0?Math.floor(W):Math.ceil(W),contextInstructions:L};(p[0]!=1||p[1]!=1)&&L.push("scale",p),s&&(L.push("strokeStyle",u.strokeStyle),L.push("lineWidth",y),L.push("lineCap",u.lineCap),L.push("lineJoin",u.lineJoin),L.push("miterLimit",u.miterLimit),L.push("setLineDash",[u.lineDash]),L.push("lineDashOffset",u.lineDashOffset)),r&&L.push("fillStyle",c.fillStyle),L.push("textBaseline","middle"),L.push("textAlign","center");const b=.5-_;let U=_*M+b*y;const Y=[],ne=[];let q=0,ie=0,ee=0,te=0,re;for(let Z=0,j=E.length;Z<j;Z+=2){const Q=E[Z];if(Q===`
`){ie+=q,q=0,U=_*M+b*y,++te;continue}const G=E[Z+1]||h.font;G!==re&&(s&&Y.push("font",G),r&&ne.push("font",G),re=G),q=Math.max(q,C[ee]);const I=[Q,U+b*S[ee]+_*(S[ee]-R[te]),.5*(y+q)+ie];U+=S[ee],s&&Y.push("strokeText",I),r&&ne.push("fillText",I),++ee}return Array.prototype.push.apply(L,Y),Array.prototype.push.apply(L,ne),this.labels_[l]=V,V}replayTextBackground_(e,t,r,s,l,u,c){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,l),e.lineTo.apply(e,t),u&&(this.alignAndScaleFill_=u[2],this.fill_(e)),c&&(this.setStrokeStyle_(e,c),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,s,l,u,c,h,f,p,_,y,E,v,w,S){c*=y[0],h*=y[1];let C=r-c,R=s-h;const M=l+f>e?e-f:l,L=u+p>t?t-p:u,A=v[3]+M*y[0]+v[1],W=v[0]+L*y[1]+v[2],V=C-v[3],b=R-v[0];(w||_!==0)&&(Xi[0]=V,ji[0]=V,Xi[1]=b,oi[1]=b,oi[0]=V+A,li[0]=oi[0],li[1]=b+W,ji[1]=li[1]);let U;return _!==0?(U=gi(kn(),r,s,1,1,_,-r,-s),ct(U,Xi),ct(U,oi),ct(U,li),ct(U,ji),nr(Math.min(Xi[0],oi[0],li[0],ji[0]),Math.min(Xi[1],oi[1],li[1],ji[1]),Math.max(Xi[0],oi[0],li[0],ji[0]),Math.max(Xi[1],oi[1],li[1],ji[1]),us)):nr(Math.min(V,V+A),Math.min(b,b+W),Math.max(V,V+A),Math.max(b,b+W),us),E&&(C=Math.round(C),R=Math.round(R)),{drawImageX:C,drawImageY:R,drawImageW:M,drawImageH:L,originX:f,originY:p,declutterBox:{minX:us[0],minY:us[1],maxX:us[2],maxY:us[3],value:S},canvasTransform:U,scale:y}}replayImageOrLabel_(e,t,r,s,l,u,c){const h=!!(u||c),f=s.declutterBox,p=c?c[2]*s.scale[0]/2:0;return f.minX-p<=t[0]&&f.maxX+p>=0&&f.minY-p<=t[1]&&f.maxY+p>=0&&(h&&this.replayTextBackground_(e,Xi,oi,li,ji,u,c),Yx(e,s.canvasTransform,l,r,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=ct(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;e.save(),e.translate(r[0]%s,r[1]%s),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,s){const l=this.textStates[t],u=this.createLabel(e,t,s,r),c=this.strokeStates[r],h=this.pixelRatio,f=vh(Array.isArray(e)?e[0]:e,l.textAlign||Ho),p=Va[l.textBaseline||Xa],_=c&&c.lineWidth?c.lineWidth:0,y=u.width/h-2*l.scale[0],E=f*y+2*(.5-f)*_,v=p*u.height/h+2*(.5-p)*_;return{label:u,anchorX:E,anchorY:v}}execute_(e,t,r,s,l,u,c,h){const f=this.zIndexContext_;let p;this.pixelCoordinates_&&rr(r,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=Ji(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),mE(this.renderedTransform_,r));let _=0;const y=s.length;let E=0,v,w,S,C,R,M,L,A,W,V,b,U,Y,ne=0,q=0,ie=null,ee=null;const te=this.coordinateCache_,re=this.viewRotation_,Z=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,j={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:re},Q=this.instructions!=s||this.overlaps?0:200;let G,I,N,se;for(;_<y;){const z=s[_];switch(z[0]){case ge.BEGIN_GEOMETRY:G=z[1],se=z[3],G.getGeometry()?c!==void 0&&!Xt(c,se.getExtent())?_=z[2]+1:++_:_=z[2],f&&(f.zIndex=z[4]);break;case ge.BEGIN_PATH:ne>Q&&(this.fill_(e),ne=0),q>Q&&(e.stroke(),q=0),!ne&&!q&&(e.beginPath(),R=NaN,M=NaN),++_;break;case ge.CIRCLE:E=z[1];const de=p[E],_e=p[E+1],we=p[E+2],Te=p[E+3],Ge=we-de,Rt=Te-_e,Mn=Math.sqrt(Ge*Ge+Rt*Rt);e.moveTo(de+Mn,_e),e.arc(de,_e,Mn,0,2*Math.PI,!0),++_;break;case ge.CLOSE_PATH:e.closePath(),++_;break;case ge.CUSTOM:E=z[1],v=z[2];const pn=z[3],Hn=z[4],Dn=z[5];j.geometry=pn,j.feature=G,_ in te||(te[_]=[]);const Qt=te[_];Dn?Dn(p,E,v,2,Qt):(Qt[0]=p[E],Qt[1]=p[E+1],Qt.length=2),f&&(f.zIndex=z[6]),Hn(Qt,j),++_;break;case ge.DRAW_IMAGE:E=z[1],v=z[2],W=z[3],w=z[4],S=z[5];let mt=z[6];const Vt=z[7],Fn=z[8],Jt=z[9],en=z[10];let mn=z[11];const Zn=z[12];let $n=z[13];C=z[14]||"declutter";const qe=z[15];if(!W&&z.length>=20){V=z[19],b=z[20],U=z[21],Y=z[22];const Tt=this.drawLabelWithPointPlacement_(V,b,U,Y);W=Tt.label,z[3]=W;const _n=z[23];w=(Tt.anchorX-_n)*this.pixelRatio,z[4]=w;const It=z[24];S=(Tt.anchorY-It)*this.pixelRatio,z[5]=S,mt=W.height,z[6]=mt,$n=W.width,z[13]=$n}let Dr;z.length>25&&(Dr=z[25]);let sr,qn,or;z.length>17?(sr=z[16],qn=z[17],or=z[18]):(sr=Ir,qn=!1,or=!1),en&&Z?mn+=re:!en&&!Z&&(mn-=re);let lr=0;for(;E<v;E+=2){if(Dr&&Dr[lr++]<$n/this.pixelRatio)continue;const Tt=this.calculateImageOrLabelDimensions_(W.width,W.height,p[E],p[E+1],$n,mt,w,S,Fn,Jt,mn,Zn,l,sr,qn||or,G),_n=[e,t,W,Tt,Vt,qn?ie:null,or?ee:null];if(h){let It,_t,yt;if(qe){const be=v-E;if(!qe[be]){qe[be]={args:_n,declutterMode:C};continue}const et=qe[be];It=et.args,_t=et.declutterMode,delete qe[be],yt=Pm(It)}let Lt,yn;if(It&&(_t!=="declutter"||!h.collides(yt))&&(Lt=!0),(C!=="declutter"||!h.collides(Tt.declutterBox))&&(yn=!0),_t==="declutter"&&C==="declutter"){const be=Lt&&yn;Lt=be,yn=be}Lt&&(_t!=="none"&&h.insert(yt),this.replayImageOrLabel_.apply(this,It)),yn&&(C!=="none"&&h.insert(Tt.declutterBox),this.replayImageOrLabel_.apply(this,_n))}else this.replayImageOrLabel_.apply(this,_n)}++_;break;case ge.DRAW_CHARS:const vi=z[1],cl=z[2],Fr=z[3],hl=z[4];Y=z[5];const vu=z[6],Or=z[7],Nr=z[8];U=z[9];const ar=z[10];V=z[11],b=z[12];const zr=[z[13],z[13]];C=z[14]||"declutter";const bs=z[15],On=this.textStates[b],tn=On.font,Ei=[On.scale[0]*Or,On.scale[1]*Or];let xi;tn in this.widths_?xi=this.widths_[tn]:(xi={},this.widths_[tn]=xi);const Us=Gx(p,vi,cl,2),Ws=Math.abs(Ei[0])*hm(tn,V,xi);if(hl||Ws<=Us){const Tt=this.textStates[b].textAlign,_n=(Us-Ws)*vh(V,Tt),It=aS(p,vi,cl,2,V,_n,vu,Math.abs(Ei[0]),hm,tn,xi,Z?0:this.viewRotation_,bs);e:if(It){const _t=[];let yt,Lt,yn,be,et;if(U)for(yt=0,Lt=It.length;yt<Lt;++yt){et=It[yt],yn=et[4],be=this.createLabel(yn,b,"",U),w=et[2]+(Ei[0]<0?-ar:ar),S=Fr*be.height+(.5-Fr)*2*ar*Ei[1]/Ei[0]-Nr;const Mt=this.calculateImageOrLabelDimensions_(be.width,be.height,et[0],et[1],be.width,be.height,w,S,0,0,et[3],zr,!1,Ir,!1,G);if(h&&C==="declutter"&&h.collides(Mt.declutterBox))break e;_t.push([e,t,be,Mt,1,null,null])}if(Y)for(yt=0,Lt=It.length;yt<Lt;++yt){et=It[yt],yn=et[4],be=this.createLabel(yn,b,Y,""),w=et[2],S=Fr*be.height-Nr;const Mt=this.calculateImageOrLabelDimensions_(be.width,be.height,et[0],et[1],be.width,be.height,w,S,0,0,et[3],zr,!1,Ir,!1,G);if(h&&C==="declutter"&&h.collides(Mt.declutterBox))break e;_t.push([e,t,be,Mt,1,null,null])}h&&C!=="none"&&h.load(_t.map(Pm));for(let Mt=0,Xs=_t.length;Mt<Xs;++Mt)this.replayImageOrLabel_.apply(this,_t[Mt])}}++_;break;case ge.END_GEOMETRY:if(u!==void 0){G=z[1];const Tt=u(G,se,C);if(Tt)return Tt}++_;break;case ge.FILL:Q?ne++:this.fill_(e),++_;break;case ge.MOVE_TO_LINE_TO:for(E=z[1],v=z[2],I=p[E],N=p[E+1],e.moveTo(I,N),R=I+.5|0,M=N+.5|0,E+=2;E<v;E+=2)I=p[E],N=p[E+1],L=I+.5|0,A=N+.5|0,(E==v-2||L!==R||A!==M)&&(e.lineTo(I,N),R=L,M=A);++_;break;case ge.SET_FILL_STYLE:ie=z,this.alignAndScaleFill_=z[2],ne&&(this.fill_(e),ne=0,q&&(e.stroke(),q=0)),e.fillStyle=z[1],++_;break;case ge.SET_STROKE_STYLE:ee=z,q&&(e.stroke(),q=0),this.setStrokeStyle_(e,z),++_;break;case ge.STROKE:Q?q++:e.stroke(),++_;break;default:++_;break}}ne&&this.fill_(e),q&&e.stroke()}execute(e,t,r,s,l,u){this.viewRotation_=s,this.execute_(e,t,r,this.instructions,l,void 0,void 0,u)}executeHitDetection(e,t,r,s,l){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,s,l)}}const xs=["Polygon","Circle","LineString","Image","Text","Default"],a0=["Image","Text"],hS=xs.filter(i=>!a0.includes(i));class dS{constructor(e,t,r,s,l,u,c){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=u,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=kn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,c)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let s=this.executorsByZIndex_[r];s===void 0&&(s={},this.executorsByZIndex_[r]=s);const l=e[r];for(const u in l){const c=l[u];s[u]=new cS(this.resolution_,this.pixelRatio_,this.overlaps_,c,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let s=0,l=e.length;s<l;++s)if(e[s]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,s,l,u){s=Math.round(s);const c=s*2+1,h=gi(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-r,-e[0],-e[1]),f=!this.hitDetectionContext_;f&&(this.hitDetectionContext_=nt(c,c,void 0,{willReadFrequently:!0}));const p=this.hitDetectionContext_;p.canvas.width!==c||p.canvas.height!==c?(p.canvas.width=c,p.canvas.height=c):f||p.clearRect(0,0,c,c);let _;this.renderBuffer_!==void 0&&(_=qt(),No(_,e),nd(_,t*(this.renderBuffer_+s),_));const y=fS(s);let E;function v(A,W,V){const b=p.getImageData(0,0,c,c).data;for(let U=0,Y=y.length;U<Y;U++)if(b[y[U]]>0){if(!u||V==="none"||E!=="Image"&&E!=="Text"||u.includes(A)){const ne=(y[U]-3)/4,q=s-ne%c,ie=s-(ne/c|0),ee=l(A,W,q*q+ie*ie);if(ee)return ee}p.clearRect(0,0,c,c);break}}const w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(qi);let S,C,R,M,L;for(S=w.length-1;S>=0;--S){const A=w[S].toString();for(R=this.executorsByZIndex_[A],C=xs.length-1;C>=0;--C)if(E=xs[C],M=R[E],M!==void 0&&(L=M.executeHitDetection(p,h,r,v,_),L))return L}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],s=t[1],l=t[2],u=t[3],c=[r,s,r,u,l,u,l,s];return Ji(c,0,8,2,e,c),c}isEmpty(){return Ps(this.executorsByZIndex_)}execute(e,t,r,s,l,u,c){const h=Object.keys(this.executorsByZIndex_).map(Number);h.sort(c?uE:qi),u=u||xs;const f=xs.length;for(let p=0,_=h.length;p<_;++p){const y=h[p].toString(),E=this.executorsByZIndex_[y];for(let v=0,w=u.length;v<w;++v){const S=u[v],C=E[S];if(C!==void 0){const R=c===null?void 0:C.getZIndexContext(),M=R?R.getContext():e,L=this.maxExtent_&&S!=="Image"&&S!=="Text";if(L&&(M.save(),this.clip(M,r)),!R||S==="Text"||S==="Image"?C.execute(M,t,r,s,l,c):R.pushFunction(A=>C.execute(A,t,r,s,l,c)),L&&M.restore(),R){R.offset();const A=h[p]*f+v;this.deferredZIndexContexts_[A]||(this.deferredZIndexContexts_[A]=[]),this.deferredZIndexContexts_[A].push(R)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(qi);for(let r=0,s=t.length;r<s;++r)e[t[r]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[t[r]].length=0}}const Eh={};function fS(i){if(Eh[i]!==void 0)return Eh[i];const e=i*2+1,t=i*i,r=new Array(t+1);for(let l=0;l<=i;++l)for(let u=0;u<=i;++u){const c=l*l+u*u;if(c>t)break;let h=r[c];h||(h=[],r[c]=h),h.push(((i+l)*e+(i+u))*4+3),l>0&&h.push(((i-l)*e+(i+u))*4+3),u>0&&(h.push(((i+l)*e+(i-u))*4+3),l>0&&h.push(((i-l)*e+(i-u))*4+3))}const s=[];for(let l=0,u=r.length;l<u;++l)r[l]&&s.push(...r[l]);return Eh[i]=s,s}class gS extends r0{constructor(e,t,r,s,l,u,c){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=s,this.transformRotation_=s?ld(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=u,this.userTransform_=c,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=kn()}drawImages_(e,t,r,s){if(!this.image_)return;const l=Ji(e,t,r,s,this.transform_,this.pixelCoordinates_),u=this.context_,c=this.tmpLocalTransform_,h=u.globalAlpha;this.imageOpacity_!=1&&(u.globalAlpha=h*this.imageOpacity_);let f=this.imageRotation_;this.transformRotation_===0&&(f-=this.viewRotation_),this.imageRotateWithView_&&(f+=this.viewRotation_);for(let p=0,_=l.length;p<_;p+=2){const y=l[p]-this.imageAnchorX_,E=l[p+1]-this.imageAnchorY_;if(f!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const v=y+this.imageAnchorX_,w=E+this.imageAnchorY_;gi(c,v,w,1,1,f,-v,-w),u.save(),u.transform.apply(u,c),u.translate(v,w),u.scale(this.imageScale_[0],this.imageScale_[1]),u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),u.restore()}else u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,E,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(u.globalAlpha=h)}drawText_(e,t,r,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=Ji(e,t,r,s,this.transform_,this.pixelCoordinates_),u=this.context_;let c=this.textRotation_;for(this.transformRotation_===0&&(c-=this.viewRotation_),this.textRotateWithView_&&(c+=this.viewRotation_);t<r;t+=s){const h=l[t]+this.textOffsetX_,f=l[t+1]+this.textOffsetY_;c!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(u.save(),u.translate(h-this.textOffsetX_,f-this.textOffsetY_),u.rotate(c),u.translate(this.textOffsetX_,this.textOffsetY_),u.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&u.strokeText(this.text_,0,0),this.textFillState_&&u.fillText(this.text_,0,0),u.restore()):(this.textStrokeState_&&u.strokeText(this.text_,h,f),this.textFillState_&&u.fillText(this.text_,h,f))}}moveToLineTo_(e,t,r,s,l){const u=this.context_,c=Ji(e,t,r,s,this.transform_,this.pixelCoordinates_);u.moveTo(c[0],c[1]);let h=c.length;l&&(h-=2);for(let f=2;f<h;f+=2)u.lineTo(c[f],c[f+1]);return l&&u.closePath(),r}drawRings_(e,t,r,s){for(let l=0,u=r.length;l<u;++l)t=this.moveToLineTo_(e,t,r[l],s,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=ax(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],s=t[3]-t[1],l=Math.sqrt(r*r+s*s),u=this.context_;u.beginPath(),u.arc(t[0],t[1],l,0,2*Math.PI),this.fillState_&&u.fill(),this.strokeState_&&u.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,s=t.length;r<s;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Xt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,s=e.getFlatCoordinates();let l=0;const u=e.getEnds(),c=e.getStride();r.beginPath();for(let h=0,f=u.length;h<f;++h)l=this.moveToLineTo_(s,l,u[h],c,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let s=0;const l=e.getEndss(),u=e.getStride();t.beginPath();for(let c=0,h=l.length;c<h;++c){const f=l[c];s=this.drawRings_(r,s,f,u)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),rr(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,s=e.textAlign?e.textAlign:Ho;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=s&&(r.textAlign=s,t.textAlign=s),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Bn(r||Ut)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),s=t.getLineCap(),l=t.getLineDash(),u=t.getLineDashOffset(),c=t.getLineJoin(),h=t.getWidth(),f=t.getMiterLimit(),p=l||di;this.strokeState_={lineCap:s!==void 0?s:Ds,lineDash:this.pixelRatio_===1?p:p.map(_=>_*this.pixelRatio_),lineDashOffset:(u||fi)*this.pixelRatio_,lineJoin:c!==void 0?c:Fs,lineWidth:(h!==void 0?h:Zo)*this.pixelRatio_,miterLimit:f!==void 0?f:Vo,strokeStyle:Bn(r||Ko)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*r,this.imageAnchorY_=s[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const u=e.getScaleArray();this.imageScale_=[u[0]*this.pixelRatio_/r,u[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const E=t.getColor();this.textFillState_={fillStyle:Bn(E||Ut)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const E=r.getColor(),v=r.getLineCap(),w=r.getLineDash(),S=r.getLineDashOffset(),C=r.getLineJoin(),R=r.getWidth(),M=r.getMiterLimit();this.textStrokeState_={lineCap:v!==void 0?v:Ds,lineDash:w||di,lineDashOffset:S||fi,lineJoin:C!==void 0?C:Fs,lineWidth:R!==void 0?R:Zo,miterLimit:M!==void 0?M:Vo,strokeStyle:Bn(E||Ko)}}const s=e.getFont(),l=e.getOffsetX(),u=e.getOffsetY(),c=e.getRotateWithView(),h=e.getRotation(),f=e.getScaleArray(),p=e.getText(),_=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:s!==void 0?s:j_,textAlign:_!==void 0?_:Ho,textBaseline:y!==void 0?y:Xa},this.text_=p!==void 0?Array.isArray(p)?p.reduce((E,v,w)=>E+=w%2?" ":v,""):p:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=u!==void 0?this.pixelRatio_*u:0,this.textRotateWithView_=c!==void 0?c:!1,this.textRotation_=h!==void 0?h:0,this.textScale_=[this.pixelRatio_*f[0],this.pixelRatio_*f[1]]}}}const Xn=.5;function pS(i,e,t,r,s,l,u,c,h){const f=s,p=i[0]*Xn,_=i[1]*Xn,y=nt(p,_);y.imageSmoothingEnabled=!1;const E=y.canvas,v=new gS(y,Xn,s,null,u,c,null),w=t.length,S=Math.floor((256*256*256-1)/w),C={};for(let M=1;M<=w;++M){const L=t[M-1],A=L.getStyleFunction()||r;if(!A)continue;let W=A(L,l);if(!W)continue;Array.isArray(W)||(W=[W]);const b=(M*S).toString(16).padStart(7,"#00000");for(let U=0,Y=W.length;U<Y;++U){const ne=W[U],q=ne.getGeometryFunction()(L);if(!q||!Xt(f,q.getExtent()))continue;const ie=ne.clone(),ee=ie.getFill();ee&&ee.setColor(b);const te=ie.getStroke();te&&(te.setColor(b),te.setLineDash(null)),ie.setText(void 0);const re=ne.getImage();if(re){const G=re.getImageSize();if(!G)continue;const I=nt(G[0],G[1],void 0,{alpha:!1}),N=I.canvas;I.fillStyle=b,I.fillRect(0,0,N.width,N.height),ie.setImage(new sl({img:N,anchor:re.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:re.getOrigin(),opacity:1,size:re.getSize(),scale:re.getScale(),rotation:re.getRotation(),rotateWithView:re.getRotateWithView()}))}const Z=ie.getZIndex()||0;let j=C[Z];j||(j={},C[Z]=j,j.Polygon=[],j.Circle=[],j.LineString=[],j.Point=[]);const Q=q.getType();if(Q==="GeometryCollection"){const G=q.getGeometriesArrayRecursive();for(let I=0,N=G.length;I<N;++I){const se=G[I];j[se.getType().replace("Multi","")].push(se,ie)}}else j[Q.replace("Multi","")].push(q,ie)}}const R=Object.keys(C).map(Number).sort(qi);for(let M=0,L=R.length;M<L;++M){const A=C[R[M]];for(const W in A){const V=A[W];for(let b=0,U=V.length;b<U;b+=2){v.setStyle(V[b+1]);for(let Y=0,ne=e.length;Y<ne;++Y)v.setTransform(e[Y]),v.drawGeometry(V[b])}}}return y.getImageData(0,0,E.width,E.height)}function mS(i,e,t){const r=[];if(t){const s=Math.floor(Math.round(i[0])*Xn),l=Math.floor(Math.round(i[1])*Xn),u=($e(s,0,t.width-1)+$e(l,0,t.height-1)*t.width)*4,c=t.data[u],h=t.data[u+1],p=t.data[u+2]+256*(h+256*c),_=Math.floor((256*256*256-1)/e.length);p&&p%_===0&&r.push(e[p/_-1])}return r}const _S=.5,u0={Point:RS,LineString:wS,Polygon:IS,MultiPoint:TS,MultiLineString:SS,MultiPolygon:CS,GeometryCollection:xS,Circle:vS};function yS(i,e){return parseInt(Oe(i),10)-parseInt(Oe(e),10)}function Am(i,e){const t=c0(i,e);return t*t}function c0(i,e){return _S*i/e}function vS(i,e,t,r,s){const l=t.getFill(),u=t.getStroke();if(l||u){const h=i.getBuilder(t.getZIndex(),"Circle");h.setFillStrokeStyle(l,u),h.drawCircle(e,r,s)}const c=t.getText();if(c&&c.getText()){const h=i.getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(e,r)}}function Mm(i,e,t,r,s,l,u,c){const h=[],f=t.getImage();if(f){let y=!0;const E=f.getImageState();E==Ce.LOADED||E==Ce.ERROR?y=!1:E==Ce.IDLE&&f.load(),y&&h.push(f.ready())}const p=t.getFill();p&&p.loading()&&h.push(p.ready());const _=h.length>0;return _&&Promise.all(h).then(()=>s(null)),ES(i,e,t,r,l,u,c),_}function ES(i,e,t,r,s,l,u){const c=t.getGeometryFunction()(e);if(!c)return;const h=c.simplifyTransformed(r,s);if(t.getRenderer())h0(i,h,t,e,u);else{const p=u0[h.getType()];p(i,h,t,e,u,l)}}function h0(i,e,t,r,s){if(e.getType()=="GeometryCollection"){const u=e.getGeometries();for(let c=0,h=u.length;c<h;++c)h0(i,u[c],t,r,s);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),s)}function xS(i,e,t,r,s,l){const u=e.getGeometriesArray();let c,h;for(c=0,h=u.length;c<h;++c){const f=u0[u[c].getType()];f(i,u[c],t,r,s,l)}}function wS(i,e,t,r,s){const l=t.getStroke();if(l){const c=i.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawLineString(e,r,s)}const u=t.getText();if(u&&u.getText()){const c=i.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,r,s)}}function SS(i,e,t,r,s){const l=t.getStroke();if(l){const c=i.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawMultiLineString(e,r,s)}const u=t.getText();if(u&&u.getText()){const c=i.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,r,s)}}function CS(i,e,t,r,s){const l=t.getFill(),u=t.getStroke();if(u||l){const h=i.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(l,u),h.drawMultiPolygon(e,r,s)}const c=t.getText();if(c&&c.getText()){const h=i.getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(e,r,s)}}function RS(i,e,t,r,s,l){const u=t.getImage(),c=t.getText(),h=c&&c.getText(),f=l&&u&&h?{}:void 0;if(u){if(u.getImageState()!=Ce.LOADED)return;const p=i.getBuilder(t.getZIndex(),"Image");p.setImageStyle(u,f),p.drawPoint(e,r,s)}if(h){const p=i.getBuilder(t.getZIndex(),"Text");p.setTextStyle(c,f),p.drawText(e,r,s)}}function TS(i,e,t,r,s,l){const u=t.getImage(),c=u&&u.getOpacity()!==0,h=t.getText(),f=h&&h.getText(),p=l&&c&&f?{}:void 0;if(c){if(u.getImageState()!=Ce.LOADED)return;const _=i.getBuilder(t.getZIndex(),"Image");_.setImageStyle(u,p),_.drawMultiPoint(e,r,s)}if(f){const _=i.getBuilder(t.getZIndex(),"Text");_.setTextStyle(h,p),_.drawText(e,r,s)}}function IS(i,e,t,r,s){const l=t.getFill(),u=t.getStroke();if(l||u){const h=i.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(l,u),h.drawPolygon(e,r,s)}const c=t.getText();if(c&&c.getText()){const h=i.getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(e,r,s)}}class LS extends l0{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=qt(),this.wrappedRenderedExtent_=qt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const s=t.extent,l=t.viewState,u=l.center,c=l.resolution,h=l.projection,f=l.rotation,p=h.getExtent(),_=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),E=t.pixelRatio,v=t.viewHints,w=!(v[Ct.ANIMATING]||v[Ct.INTERACTING]),S=this.context,C=Math.round(ke(s)/c*E),R=Math.round(ht(s)/c*E),M=_.getWrapX()&&h.canWrapX(),L=M?ke(p):null,A=M?Math.ceil((s[2]-p[2])/L)+1:1;let W=M?Math.floor((s[0]-p[0])/L):0;do{let V=this.getRenderTransform(u,c,0,E,C,R,W*L);t.declutter&&(V=V.slice(0)),e.execute(S,[S.canvas.width,S.canvas.height],V,f,w,r===void 0?xs:r?a0:hS,r?y&&t.declutter[y]:void 0)}while(++W<A)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=nt(this.context.canvas.width,this.context.canvas.height,Lm))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,uu(this.context),Lm.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const s=e.viewState;this.prepareContainer(e,t);const l=this.context,u=this.replayGroup_;let c=u&&!u.isEmpty();if(!c&&!(this.getLayer().hasListener(dn.PRERENDER)||this.getLayer().hasListener(dn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(l,e),s.projection,this.clipped_=!1,c&&r.extent&&this.clipping){const h=Zi(r.extent);c=Xt(h,e.extent),this.clipped_=c&&!ys(h,e.extent),this.clipped_&&this.clipUnrotated(l,e,h)}return c&&this.renderWorlds(u,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&l.restore(),this.postRender(l,e),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),s=this.renderedCenter_,l=this.renderedResolution_,u=this.renderedRotation_,c=this.renderedProjection_,h=this.wrappedRenderedExtent_,f=this.getLayer(),p=[],_=r[0]*Xn,y=r[1]*Xn;p.push(this.getRenderTransform(s,l,u,Xn,_,y,0).slice());const E=f.getSource(),v=c.getExtent();if(E.getWrapX()&&c.canWrapX()&&!ys(v,h)){let w=h[0];const S=ke(v);let C=0,R;for(;w<v[0];)--C,R=S*C,p.push(this.getRenderTransform(s,l,u,Xn,_,y,R).slice()),w+=S;for(C=0,w=h[2];w>v[2];)++C,R=S*C,p.push(this.getRenderTransform(s,l,u,Xn,_,y,R).slice()),w-=S}this.hitDetectionImageData_=pS(r,p,this.renderedFeatures_,f.getStyleFunction(),h,l,u,Am(l,this.renderedPixelRatio_))}t(mS(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,s,l){if(!this.replayGroup_)return;const u=t.viewState.resolution,c=t.viewState.rotation,h=this.getLayer(),f={},p=function(y,E,v){const w=Oe(y),S=f[w];if(S){if(S!==!0&&v<S.distanceSq){if(v===0)return f[w]=!0,l.splice(l.lastIndexOf(S),1),s(y,h,E);S.geometry=E,S.distanceSq=v}}else{if(v===0)return f[w]=!0,s(y,h,E);l.push(f[w]={feature:y,layer:h,geometry:E,distanceSq:v,callback:s})}},_=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,u,c,r,p,_?t.declutter[_].all().map(y=>y.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const s=e.viewHints[Ct.ANIMATING],l=e.viewHints[Ct.INTERACTING],u=t.getUpdateWhileAnimating(),c=t.getUpdateWhileInteracting();if(this.ready&&!u&&s||!c&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const h=e.extent,f=e.viewState,p=f.projection,_=f.resolution,y=e.pixelRatio,E=t.getRevision(),v=t.getRenderBuffer();let w=t.getRenderOrder();w===void 0&&(w=yS);const S=f.center.slice(),C=nd(h,v*_),R=C.slice(),M=[C.slice()],L=p.getExtent();if(r.getWrapX()&&p.canWrapX()&&!ys(L,e.extent)){const ee=ke(L),te=Math.max(ke(C)/2,ee);C[0]=L[0]-te,C[2]=L[2]+te,__(S,p);const re=m_(M[0],p);re[0]<L[0]&&re[2]<L[2]?M.push([re[0]+ee,re[1],re[2]+ee,re[3]]):re[0]>L[0]&&re[2]>L[2]&&M.push([re[0]-ee,re[1],re[2]-ee,re[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==E&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!e.declutter&&ys(this.wrappedRenderedExtent_,C))return rr(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=S,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const A=new rS(c0(_,y),C,_,y);let W;for(let ee=0,te=M.length;ee<te;++ee)r.loadFeatures(M[ee],_,p);const V=Am(_,y);let b=!0;const U=(ee,te)=>{let re;const Z=ee.getStyleFunction()||t.getStyleFunction();if(Z&&(re=Z(ee,_)),re){const j=this.renderFeature(ee,V,re,A,W,this.getLayer().getDeclutter(),te);b=b&&!j}},Y=R_(C),ne=r.getFeaturesInExtent(Y);w&&ne.sort(w);for(let ee=0,te=ne.length;ee<te;++ee)U(ne[ee],ee);this.renderedFeatures_=ne,this.ready=b;const q=A.finish(),ie=new dS(C,_,y,r.getOverlaps(),q,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=_,this.renderedRevision_=E,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=C,this.renderedCenter_=S,this.renderedProjection_=p,this.renderedPixelRatio_=y,this.replayGroup_=ie,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,s,l,u,c){if(!r)return!1;let h=!1;if(Array.isArray(r))for(let f=0,p=r.length;f<p;++f)h=Mm(s,e,r[f],t,this.boundHandleStyleImageChange_,l,u,c)||h;else h=Mm(s,e,r,t,this.boundHandleStyleImageChange_,l,u,c);return h}}class PS extends i0{constructor(e){super(e)}createRenderer(){return new LS(this)}}class Dm{constructor(e){this.rbush_=new Z_(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Oe(t)]=r}load(e,t){const r=new Array(t.length);for(let s=0,l=t.length;s<l;s++){const u=e[s],c=t[s],h={minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:c};r[s]=h,this.items_[Oe(c)]=h}this.rbush_.load(r)}remove(e){const t=Oe(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Oe(t)],s=[r.minX,r.minY,r.maxX,r.maxY];Uo(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let s=0,l=e.length;s<l;s++)if(r=t(e[s]),r)return r;return r}isEmpty(){return Ps(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return nr(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}function kS(i,e,t,r){const s=[];let l=qt();for(let u=0,c=t.length;u<c;++u){const h=t[u];l=id(i,e,h[0],r),s.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=h[h.length-1]}return s}const Fm=kn();class In{constructor(e,t,r,s,l,u){this.styleFunction,this.extent_,this.id_=u,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=l,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?d_(this.flatCoordinates_):id(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Pr(this.getExtent());this.flatInteriorPoints_=_d(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=wx(this.flatCoordinates_,this.ends_),t=kS(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=_x(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=lm(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let s=0,l=r.length;s<l;++s){const u=r[s],c=lm(e,t,u,2,.5);ed(this.flatMidpoints_,c),t=u}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Yt(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const s=ht(r)/ht(t);gi(Fm,r[0],r[3],s,-s,0,0,0),Ji(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Fm,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new In(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=l_((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":r.length=md(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),s=[r.length];break;case"MultiLineString":s=[],r.length=fx(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,s);break;case"Polygon":s=[],r.length=k_(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,s);break}return s&&(this.simplifiedGeometry_=new In(this.type_,r,s,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}In.prototype.getFlatCoordinates=In.prototype.getOrientedFlatCoordinates;class d0 extends Kn{constructor(e){super(),this.projection=Yt(e.projection),this.attributions_=Om(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,s){t.viewResolver=r,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Om(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Om(i){return i?typeof i=="function"?i:(Array.isArray(i)||(i=[i]),e=>i):null}const un={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function AS(i,e){return[[-1/0,-1/0,1/0,1/0]]}let MS=!1;function DS(i,e,t,r,s,l,u){const c=new XMLHttpRequest;c.open("GET",typeof i=="function"?i(t,r,s):i,!0),e.getType()=="arraybuffer"&&(c.responseType="arraybuffer"),c.withCredentials=MS,c.onload=function(h){if(!c.status||c.status>=200&&c.status<300){const f=e.getType();try{let p;f=="text"||f=="json"?p=c.responseText:f=="xml"?p=c.responseXML||c.responseText:f=="arraybuffer"&&(p=c.response),p?l(e.readFeatures(p,{extent:t,featureProjection:s}),e.readProjection(p)):u()}catch{u()}}else u()},c.onerror=u,c.send()}function Nm(i,e){return function(t,r,s,l,u){const c=this;DS(i,e,t,r,s,function(h,f){c.addFeatures(h),l!==void 0&&l(h)},u||Ls)}}class Bi extends _i{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class FS extends d0{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Ls,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(De(this.format_,"`format` must be set when `url` is set"),this.loader_=Nm(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:AS;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Dm:null,this.loadedExtentsRtree_=new Dm,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,s;Array.isArray(e.features)?s=e.features:e.features&&(r=e.features,s=r.getArray()),!t&&r===void 0&&(r=new jn(s)),s!==void 0&&this.addFeaturesInternal(s),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Oe(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const s=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Bi(un.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof In||(this.featureChangeKeys_[e]=[Pe(t,xe.CHANGE,this.handleFeatureChange_,this),Pe(t,Is.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const s=String(t.getId());if(!(s in this.idIndex_))this.idIndex_[s]=t;else if(t instanceof In){const l=this.idIndex_[s];l instanceof In?Array.isArray(l)?l.push(t):this.idIndex_[s]=[l,t]:r=!1}else r=!1}return r&&(De(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],s=[];for(let l=0,u=e.length;l<u;l++){const c=e[l],h=Oe(c);this.addToIndex_(h,c)&&r.push(c)}for(let l=0,u=r.length;l<u;l++){const c=r[l],h=Oe(c);this.setupChangeEvents_(h,c);const f=c.getGeometry();if(f){const p=f.getExtent();t.push(p),s.push(c)}else this.nullGeometryFeatures_[h]=c}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener(un.ADDFEATURE))for(let l=0,u=r.length;l<u;l++)this.dispatchEvent(new Bi(un.ADDFEATURE,r[l]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(un.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(un.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(bt.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(bt.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(We);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Bi(un.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(s){const l=s.getGeometry();if(l instanceof In||l.intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const s=r.getGeometry();if(s instanceof In||s.intersectsExtent(e)){const l=t(r);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ps(this.nullGeometryFeatures_)||ed(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=rd(e,t);return[].concat(...s.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],s=e[1];let l=null;const u=[NaN,NaN];let c=1/0;const h=[-1/0,-1/0,1/0,1/0];return t=t||bo,this.featuresRtree_.forEachInExtent(h,function(f){if(t(f)){const p=f.getGeometry(),_=c;if(c=p instanceof In?0:p.closestPointXY(r,s,u,c),c<_){l=f;const y=Math.sqrt(c);h[0]=r-y,h[1]=s-y,h[2]=r+y,h[3]=s+y}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Oe(t),s=t.getGeometry();if(!s)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const u=s.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(u,t)):this.featuresRtree_&&this.featuresRtree_.update(u,t)}const l=t.getId();if(l!==void 0){const u=l.toString();this.idIndex_[u]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[u]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new Bi(un.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Oe(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ps(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const s=this.loadedExtentsRtree_,l=this.strategy_(e,t,r);for(let u=0,c=l.length;u<c;++u){const h=l[u];s.forEachInExtent(h,function(p){return ys(p.extent,h)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Bi(un.FEATURESLOADSTART)),this.loader_.call(this,h,t,r,p=>{--this.loadingExtentsCount_,this.dispatchEvent(new Bi(un.FEATURESLOADEND,void 0,p))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Bi(un.FEATURESLOADERROR))}),s.insert(h,{extent:h.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(s){if(Uo(s.extent,e))return s});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,s=e.length;r<s;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Oe(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(We),delete this.featureChangeKeys_[t];const s=e.getId();if(s!==void 0){const l=s.toString(),u=this.idIndex_[l];u===e?delete this.idIndex_[l]:Array.isArray(u)&&(u.splice(u.indexOf(e),1),u.length===1&&(this.idIndex_[l]=u[0]))}return delete this.uidIndex_[t],this.hasListener(un.REMOVEFEATURE)&&this.dispatchEvent(new Bi(un.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){De(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Nm(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const le={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Fd extends eu{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(xe.CHANGE)}release(){this.state===le.ERROR&&this.setState(le.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==le.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Me()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const s=t-r+1e3/60;return s>=this.transition_?1:K_(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class f0 extends Fd{constructor(e,t,r,s,l,u){super(e,t,u),this.crossOrigin_=s,this.src_=r,this.key=r,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=le.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=le.ERROR,this.unlistenImage_(),this.image_=OS(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=le.LOADED:this.state=le.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==le.ERROR&&(this.state=le.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==le.IDLE&&(this.state=le.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Fx(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function OS(){const i=nt(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}class NS{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const s=this.points_[t+2]-this.points_[r+2];if(s<1e3/60)return!1;const l=this.points_[t]-this.points_[r],u=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(u,l),this.initialVelocity_=Math.sqrt(l*l+u*u)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class zS extends Qa{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Me()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;gi(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),a_(s,r)}forEachFeatureAtCoordinate(e,t,r,s,l,u,c,h){let f;const p=t.viewState;function _(L,A,W,V){return l.call(u,A,L?W:null,V)}const y=p.projection,E=__(e.slice(),y),v=[[0,0]];if(y.canWrapX()&&s){const L=y.getExtent(),A=ke(L);v.push([-A,0],[A,0])}const w=t.layerStatesArray,S=w.length,C=[],R=[];for(let L=0;L<v.length;L++)for(let A=S-1;A>=0;--A){const W=w[A],V=W.layer;if(V.hasRenderer()&&Ad(W,p)&&c.call(h,V)){const b=V.getRenderer(),U=V.getSource();if(b&&U){const Y=U.getWrapX()?E:e,ne=_.bind(null,W.managed);R[0]=Y[0]+v[L][0],R[1]=Y[1]+v[L][1],f=b.forEachFeatureAtCoordinate(R,t,r,ne,C)}if(f)return f}}if(C.length===0)return;const M=1/C.length;return C.forEach((L,A)=>L.distanceSq+=A*M),C.sort((L,A)=>L.distanceSq-A.distanceSq),C.some(L=>f=L.callback(L.feature,L.layer,L.geometry)),f}hasFeatureAtCoordinate(e,t,r,s,l,u){return this.forEachFeatureAtCoordinate(e,t,r,s,bo,this,l,u)!==void 0}getMap(){return this.map_}renderFrame(e){Me()}scheduleExpireIconCache(e){fn.canExpireCache()&&e.postRenderFunctions.push(GS)}}function GS(i,e){fn.expire()}class bS extends zS{constructor(e){super(e),this.fontChangeListenerKey_=Pe(ui,Is.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=du+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const s=new s0(e,void 0,t);r.dispatchEvent(s)}}disposeInternal(){We(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(dn.PRECOMPOSE,e);const t=e.layerStatesArray.sort((c,h)=>c.zIndex-h.zIndex);t.some(c=>c.layer instanceof i0&&c.layer.getDeclutter())&&(e.declutter={});const s=e.viewState;this.children_.length=0;const l=[];let u=null;for(let c=0,h=t.length;c<h;++c){const f=t[c];e.layerIndex=c;const p=f.layer,_=p.getSourceState();if(!Ad(f,s)||_!="ready"&&_!="undefined"){p.unrender();continue}const y=p.render(e,u);y&&(y!==u&&(this.children_.push(y),u=y),l.push(f))}this.declutter(e,l),Dx(this.element_,this.children_),this.dispatchRenderEvent(dn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const s=t[r],l=s.layer;l.getDeclutter()&&l.renderDeclutter(e,s)}t.forEach(r=>r.layer.renderDeferred(e))}}}class Hi extends _i{constructor(e,t){super(e),this.layer=t}}const xh={LAYERS:"layers"};class Gs extends V_{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(xh.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new jn(r.slice(),{unique:!0}):De(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new jn(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(We),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Pe(e,bt.ADD,this.handleLayersAdd_,this),Pe(e,bt.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(We);tl(this.listenerKeys_);const t=e.getArray();for(let r=0,s=t.length;r<s;r++){const l=t[r];this.registerLayerListeners_(l),this.dispatchEvent(new Hi("addlayer",l))}this.changed()}registerLayerListeners_(e){const t=[Pe(e,Is.PROPERTYCHANGE,this.handleLayerChange_,this),Pe(e,xe.CHANGE,this.handleLayerChange_,this)];e instanceof Gs&&t.push(Pe(e,"addlayer",this.handleLayerGroupAdd_,this),Pe(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Oe(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Hi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Hi("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Hi("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Oe(t);this.listenerKeys_[r].forEach(We),delete this.listenerKeys_[r],this.dispatchEvent(new Hi("removelayer",t)),this.changed()}getLayers(){return this.get(xh.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let s=0,l=r.length;s<l;++s)this.dispatchEvent(new Hi("removelayer",r[s]))}this.set(xh.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(u){u.getLayerStatesArray(t)});const s=this.getLayerState();let l=s.zIndex;!e&&s.zIndex===void 0&&(l=0);for(let u=r,c=t.length;u<c;u++){const h=t[u];h.opacity*=s.opacity,h.visible=h.visible&&s.visible,h.maxResolution=Math.min(h.maxResolution,s.maxResolution),h.minResolution=Math.max(h.minResolution,s.minResolution),h.minZoom=Math.max(h.minZoom,s.minZoom),h.maxZoom=Math.min(h.maxZoom,s.maxZoom),s.extent!==void 0&&(h.extent!==void 0?h.extent=Pn(h.extent,s.extent):h.extent=s.extent),h.zIndex===void 0&&(h.zIndex=l)}return t}getSourceState(){return"ready"}}class _s extends _i{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class Vi extends _s{constructor(e,t,r,s,l,u){super(e,t,l),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=u}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ze={SINGLECLICK:"singleclick",CLICK:xe.CLICK,DBLCLICK:xe.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Wh={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class US extends eu{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Pe(r,Wh.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Pe(r,Wh.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(xe.TOUCHMOVE,this.boundHandleTouchMove_,U_?{passive:!1}:!1)}emulateClick_(e){let t=new Vi(Ze.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Vi(Ze.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Vi(Ze.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==Ze.POINTERUP||t.type==Ze.POINTERCANCEL){delete this.trackedTouches_[r];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==Ze.POINTERDOWN||t.type==Ze.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Vi(Ze.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(We),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Vi(Ze.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Pe(r,Ze.POINTERMOVE,this.handlePointerMove_,this),Pe(r,Ze.POINTERUP,this.handlePointerUp_,this),Pe(this.element_,Ze.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Pe(this.element_.getRootNode(),Ze.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Vi(Ze.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Vi(Ze.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(We(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(xe.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(We(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(We),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Ki={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},St={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Ka=1/0;class WS{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,tl(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(r);return delete this.queuedElements_[s],r}enqueue(e){De(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Ka?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,s=t.length,l=t[e],u=r[e],c=e;for(;e<s>>1;){const h=this.getLeftChildIndex_(e),f=this.getRightChildIndex_(e),p=f<s&&r[f]<r[h]?f:h;t[e]=t[p],r[e]=r[p],e=p}t[e]=l,r[e]=u,this.siftDown_(c,e)}siftDown_(e,t){const r=this.elements_,s=this.priorities_,l=r[t],u=s[t];for(;t>e;){const c=this.getParentIndex_(t);if(s[c]>u)r[t]=r[c],s[t]=s[c],t=c;else break}r[t]=l,s[t]=u}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let s=0;const l=t.length;let u,c,h;for(c=0;c<l;++c)u=t[c],h=e(u),h==Ka?delete this.queuedElements_[this.keyFunction_(u)]:(r[s]=h,t[s++]=u);t.length=s,r.length=s,this.heapify_()}}class XS extends WS{constructor(e,t){super(function(r){return e.apply(null,r)},function(r){return r[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(xe.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===le.LOADED||r===le.ERROR||r===le.EMPTY){r!==le.ERROR&&t.removeEventListener(xe.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const s=this.dequeue()[0],l=s.getKey();s.getState()===le.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++r,s.load())}}}function jS(i,e,t,r,s){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return Ka;const l=i.viewState.center,u=r[0]-l[0],c=r[1]-l[1];return 65536*Math.log(s)+Math.sqrt(u*u+c*c)/s}class Od extends Kn{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let r=0,s=this.listenerKeys.length;r<s;++r)We(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==Ls&&this.listenerKeys.push(Pe(e,Ki.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class BS extends Od{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"",u=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=u):this.collapseLabel_=l;const c=e.label!==void 0?e.label:"i";typeof c=="string"?(this.label_=document.createElement("span"),this.label_.textContent=c,this.label_.className=s):this.label_=c;const h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(h),this.toggleButton_.addEventListener(xe.CLICK,this.handleClick_.bind(this),!1);const f=t+" "+du+" "+Rd+(this.collapsed_&&this.collapsible_?" "+um:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=f,p.appendChild(this.toggleButton_),p.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(s=>s.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>r.add(s)):r.add(this.attributions_)),!this.overrideCollapsible_){const s=!t.some(l=>{var u;return((u=l.getSource())==null?void 0:u.getAttributionsCollapsible())===!1});this.setCollapsible(s)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(s=>dE(()=>s))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!rr(t,this.renderedAttributions_)){Mx(this.ulElement_);for(let s=0,l=t.length;s<l;++s){const u=document.createElement("li");u.innerHTML=t[s],this.ulElement_.appendChild(u)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(um),this.collapsed_?om(this.collapseLabel_,this.label_):om(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class YS extends Od{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(s));const l=e.tipLabel?e.tipLabel:"Reset rotation",u=document.createElement("button");u.className=t+"-reset",u.setAttribute("type","button"),u.title=l,u.appendChild(this.label_),u.addEventListener(xe.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+du+" "+Rd,h=this.element;h.className=c,h.appendChild(u),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Sa)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:zs}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const s="rotate("+r+"rad)";if(this.autoHide_){const l=this.element.classList.contains(Sa);!l&&r===0?this.element.classList.add(Sa):l&&r!==0&&this.element.classList.remove(Sa)}this.label_.style.transform=s}this.rotation_=r}}class VS extends Od{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",u=e.zoomInLabel!==void 0?e.zoomInLabel:"+",c=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",h=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",f=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=h,p.appendChild(typeof u=="string"?document.createTextNode(u):u),p.addEventListener(xe.CLICK,this.handleClick_.bind(this,r),!1);const _=document.createElement("button");_.className=l,_.setAttribute("type","button"),_.title=f,_.appendChild(typeof c=="string"?document.createTextNode(c):c),_.addEventListener(xe.CLICK,this.handleClick_.bind(this,-r),!1);const y=t+" "+du+" "+Rd,E=this.element;E.className=y,E.appendChild(p),E.appendChild(_),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const s=r.getZoom();if(s!==void 0){const l=r.getConstrainedZoom(s+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:l,duration:this.duration_,easing:zs})):r.setZoom(l)}}}function KS(i){i=i||{};const e=new jn;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new VS(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new YS(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new BS(i.attributionOptions)),e}const zm={ACTIVE:"active"};class al extends Kn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(zm.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(zm.ACTIVE,e)}setMap(e){this.map_=e}}function HS(i,e,t){const r=i.getCenterInternal();if(r){const s=[r[0]+e[0],r[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:nw,center:i.getConstrainedCenter(s)})}}function Nd(i,e,t,r){const s=i.getZoom();if(s===void 0)return;const l=i.getConstrainedZoom(s+e),u=i.getResolutionForZoom(l);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:u,anchor:t,duration:r!==void 0?r:250,easing:zs})}class ZS extends al{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ze.DBLCLICK){const r=e.originalEvent,s=e.map,l=e.coordinate,u=r.shiftKey?-this.delta_:this.delta_,c=s.getView();Nd(c,u,l,this.duration_),r.preventDefault(),t=!0}return!t}}class ul extends al{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ze.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ze.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Ze.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==Ze.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function zd(i){const e=i.length;let t=0,r=0;for(let s=0;s<e;s++)t+=i[s].clientX,r+=i[s].clientY;return{clientX:t/e,clientY:r/e}}function Xh(i){const e=arguments;return function(t){let r=!0;for(let s=0,l=e.length;s<l&&(r=r&&e[s](t),!!r);++s);return r}}const $S=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},qS=function(i){const e=i.map.getTargetElement(),t=e.getRootNode(),r=i.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},g0=function(i){const e=i.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?qS(i):!0},QS=bo,p0=function(i){const e=i.originalEvent;return e.button==0&&!(Ax&&z_&&e.ctrlKey)},m0=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},JS=function(i){const e=i.originalEvent;return z_?e.metaKey:e.ctrlKey},eC=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},_0=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},wh=function(i){const e=i.originalEvent;return De(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},tC=function(i){const e=i.originalEvent;return De(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class nC extends ul{constructor(e){super({stopDown:Ja}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Xh(m0,tC);this.condition_=e.onFocusOnly?Xh(g0,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,s=t.getEventPixel(zd(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const l=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],c=e.map.getView();OE(l,c.getResolution()),ad(l,c.getRotation()),c.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),u=r.getCenterInternal(),c=t.getPixelFromCoordinateInternal(u),h=t.getCoordinateFromPixelInternal([c[0]-s*Math.cos(l),c[1]-s*Math.sin(l)]);r.animateInternal({center:r.getConstrainedCenter(h),duration:500,easing:zs})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class iC extends ul{constructor(e){e=e||{},super({stopDown:Ja}),this.condition_=e.condition?e.condition:$S,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!wh(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===kd)return;const s=t.getSize(),l=e.pixel,u=Math.atan2(s[1]/2-l[1],l[0]-s[0]/2);if(this.lastAngle_!==void 0){const c=u-this.lastAngle_;r.adjustRotationInternal(-c)}this.lastAngle_=u}handleUpEvent(e){return wh(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return wh(e)&&p0(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class rC extends Qa{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+r,s.top=Math.min(e[1],t[1])+r,s.width=Math.abs(t[0]-e[0])+r,s.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Bo([s])}getGeometry(){return this.geometry_}}const cs={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Po extends _i{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class sC extends ul{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new rC(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??p0,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const s=r[0]-t[0],l=r[1]-t[1];return s*s+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Po(cs.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Po(t?cs.BOXEND:cs.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Po(cs.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Po(cs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Po(cs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class oC extends sC{constructor(e){e=e||{};const t=e.condition?e.condition:eC;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let s=this.getGeometry();if(this.out_){const l=r.rotatedExtentForGeometry(s),u=r.getResolutionForExtentInternal(l),c=r.getResolution()/u;s=s.clone(),s.scale(c*c)}r.fitInternal(s,{duration:this.duration_,easing:zs})}}const Sr={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class lC extends al{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return m0(t)&&_0(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==xe.KEYDOWN){const r=e.originalEvent,s=r.key;if(this.condition_(e)&&(s==Sr.DOWN||s==Sr.LEFT||s==Sr.RIGHT||s==Sr.UP)){const u=e.map.getView(),c=u.getResolution()*this.pixelDelta_;let h=0,f=0;s==Sr.DOWN?f=-c:s==Sr.LEFT?h=-c:s==Sr.RIGHT?h=c:f=c;const p=[h,f];ad(p,u.getRotation()),HS(u,p,this.duration_),r.preventDefault(),t=!0}}return!t}}class aC extends al{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!JS(t)&&_0(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==xe.KEYDOWN||e.type==xe.KEYPRESS){const r=e.originalEvent,s=r.key;if(this.condition_(e)&&(s==="+"||s==="-")){const l=e.map,u=s==="+"?this.delta_:-this.delta_,c=l.getView();Nd(c,u,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}class uC extends al{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:QS;this.condition_=e.onFocusOnly?Xh(g0,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==xe.WHEEL)return!0;const r=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l;if(e.type==xe.WHEEL&&(l=s.deltaY,Px&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=G_),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;const u=Date.now();this.startTime_===void 0&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const c=r.getView();if(this.mode_==="trackpad"&&!(c.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(c.getAnimating()&&c.cancelAnimations(),c.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),c.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=u,!1;this.totalDelta_+=l;const h=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),h),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-$e(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),Nd(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class cC extends ul{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ja),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],s=this.targetPointers[1],l=Math.atan2(s.clientY-r.clientY,s.clientX-r.clientX);if(this.lastAngle_!==void 0){const h=l-this.lastAngle_;this.rotationDelta_+=h,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=h}this.lastAngle_=l;const u=e.map,c=u.getView();c.getConstraints().rotation!==kd&&(this.anchor_=u.getCoordinateFromPixelInternal(u.getEventPixel(zd(this.targetPointers))),this.rotating_&&(u.render(),c.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class hC extends ul{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ja),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],s=this.targetPointers[1],l=r.clientX-s.clientX,u=r.clientY-s.clientY,c=Math.sqrt(l*l+u*u);this.lastDistance_!==void 0&&(t=this.lastDistance_/c),this.lastDistance_=c;const h=e.map,f=h.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=h.getCoordinateFromPixelInternal(h.getEventPixel(zd(this.targetPointers))),h.render(),f.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function dC(i){i=i||{};const e=new jn,t=new NS(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new iC),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new ZS({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new nC({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new cC),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new hC({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new lC),e.push(new aC({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new uC({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new oC({duration:i.zoomDuration})),e}function y0(i){if(i instanceof pu){i.setMapInternal(null);return}i instanceof Gs&&i.getLayers().forEach(y0)}function v0(i,e){if(i instanceof pu){i.setMapInternal(e);return}if(i instanceof Gs){const t=i.getLayers().getArray();for(let r=0,s=t.length;r<s;++r)v0(t[r],e)}}let fC=class extends Kn{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=gC(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:G_,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=kn(),this.pixelToCoordinateTransform_=kn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||KS(),this.interactions=t.interactions||dC({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new XS(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(St.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(St.VIEW,this.handleViewChanged_),this.addChangeListener(St.SIZE,this.handleSizeChanged_),this.addChangeListener(St.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof Wn)&&e.view.then(function(s){r.setView(new Wn(s))}),this.controls.addEventListener(bt.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(bt.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(bt.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(bt.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(bt.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(bt.REMOVE,s=>{const l=s.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){v0(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const l=r.hitTolerance!==void 0?r.hitTolerance:0,u=r.layerFilter!==void 0?r.layerFilter:bo,c=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,l,c,t,null,u,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(s){r.push(s)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(s){s instanceof Gs?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:bo,l=t.hitTolerance!==void 0?t.hitTolerance:0,u=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,l,u,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),s=this.getSize(),l=r.width/s[0],u=r.height/s[1],c="changedTouches"in e?e.changedTouches[0]:e;return[(c.clientX-r.left)/l,(c.clientY-r.top)/u]}getTarget(){return this.get(St.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Nh(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?ct(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(St.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof jn){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const s=e[t];if(!s.visible)continue;const l=s.layer.getRenderer();if(l&&!l.ready)return!0;const u=s.layer.getSource();if(u&&u.loading)return!0}return!1}getPixelFromCoordinate(e){const t=ai(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?ct(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(St.SIZE)}getView(){return this.get(St.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,s){return jS(this.frameState_,e,t,r,s)}handleBrowserEvent(e,t){t=t||e.type;const r=new Vi(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===Wh.POINTERDOWN||r===xe.WHEEL||r===xe.KEYDOWN){const s=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():s,u=t.target,c=l instanceof ShadowRoot?l.host===u?l.host.ownerDocument:l:l===s?s.documentElement:l;if(this.overlayContainerStopEvent_.contains(u)||!c.contains(u))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let l=s.length-1;l>=0;l--){const u=s[l];if(u.getMap()!==this||!u.getActive()||!this.getTargetElement())continue;if(!u.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,l=s;if(e){const u=e.viewHints;if(u[Ct.ANIMATING]||u[Ct.INTERACTING]){const c=Date.now()-e.time>8;s=c?0:8,l=c?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(dn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(dn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new _s(Ki.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new _s(Ki.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let s=0,l=r.length;s<l;++s)r[s](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,s=this.targetChangeHandlerKeys_.length;r<s;++r)We(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(xe.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(xe.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new bS(this)),this.mapBrowserEventHandler_=new US(this,this.moveTolerance_);for(const l in Ze)this.mapBrowserEventHandler_.addEventListener(Ze[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(xe.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(xe.WHEEL,this.boundHandleBrowserEvent_,U_?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const l=t.getRootNode();r=l instanceof ShadowRoot?l.host:t}this.targetChangeHandlerKeys_=[Pe(r,xe.KEYDOWN,this.handleBrowserEvent,this),Pe(r,xe.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(We(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(We(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Pe(e,Is.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Pe(e,xe.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(We),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Hi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Pe(e,Is.PROPERTYCHANGE,this.render,this),Pe(e,xe.CHANGE,this.render,this),Pe(e,"addlayer",this.handleLayerAdd_,this),Pe(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){y0(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),s=this.frameState_;let l=null;if(t!==void 0&&am(t)&&r&&r.isDef()){const u=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=r.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Ah(c.center,c.resolution,c.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:c,viewHints:u,wantedTiles:{},mapId:Oe(this),renderTargets:{}},c.nextCenter&&c.nextResolution){const h=isNaN(c.nextRotation)?c.rotation:c.nextRotation;l.nextExtent=Ah(c.nextCenter,c.nextResolution,h,t)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),s&&(!this.previousExtent_||!su(this.previousExtent_)&&!Uo(l.extent,this.previousExtent_))&&(this.dispatchEvent(new _s(Ki.MOVESTART,this,s)),this.previousExtent_=tu(this.previousExtent_)),this.previousExtent_&&!l.viewHints[Ct.ANIMATING]&&!l.viewHints[Ct.INTERACTING]&&!Uo(l.extent,this.previousExtent_)&&(this.dispatchEvent(new _s(Ki.MOVEEND,this,l)),u_(l.extent,this.previousExtent_))),this.dispatchEvent(new _s(Ki.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(Ki.LOADSTART)||this.hasListener(Ki.LOADEND)||this.hasListener(dn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Hi("removelayer",t)),this.set(St.LAYERGROUP,e)}setSize(e){this.set(St.SIZE,e)}setTarget(e){this.set(St.TARGET,e)}setView(e){if(!e||e instanceof Wn){this.set(St.VIEW,e);return}this.set(St.VIEW,new Wn);const t=this;e.then(function(r){t.setView(new Wn(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),l=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),u=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(l)&&!isNaN(u)&&(t=[Math.max(0,l),Math.max(0,u)],!am(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&S_("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!rr(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function gC(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},r=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Gs({layers:i.layers});t[St.LAYERGROUP]=r,t[St.TARGET]=i.target,t[St.VIEW]=i.view instanceof Wn?i.view:new Wn;let s;i.controls!==void 0&&(Array.isArray(i.controls)?s=new jn(i.controls.slice()):(De(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=i.controls));let l;i.interactions!==void 0&&(Array.isArray(i.interactions)?l=new jn(i.interactions.slice()):(De(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=i.interactions));let u;return i.overlays!==void 0?Array.isArray(i.overlays)?u=new jn(i.overlays.slice()):(De(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),u=i.overlays):u=new jn,{controls:s,interactions:l,keyboardEventTarget:e,overlays:u,values:t}}class pC{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Qa&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return De(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return De(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){De(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function Ha(i,e,t,r){return r!==void 0?(r[0]=i,r[1]=e,r[2]=t,r):[i,e,t]}function mC(i,e,t){return i+"/"+e+"/"+t}function _C(i){return yC(i[0],i[1],i[2])}function yC(i,e,t){return(e<<i)+t}function vC(i,e){const t=i[0],r=i[1],s=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const l=e.getFullTileRange(t);return l?l.containsXY(r,s):!0}class Gd{constructor(e,t,r,s){this.minX=e,this.maxX=t,this.minY=r,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function hs(i,e,t,r,s){return s!==void 0?(s.minX=i,s.maxX=e,s.minY=t,s.maxY=r,s):new Gd(i,e,t,r)}const Pa={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class EC extends pu{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Pa.PRELOAD)}setPreload(e){this.set(Pa.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Pa.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Pa.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function Za(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}function xC(i){return i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Float32Array||i instanceof DataView?i:null}const wC=new Error("disposed");let ds=null;function SC(i){ds||(ds=nt(i.width,i.height,void 0,{willReadFrequently:!0}));const e=ds.canvas,t=i.width;e.width!==t&&(e.width=t);const r=i.height;return e.height!==r&&(e.height=r),ds.clearRect(0,0,t,r),ds.drawImage(i,0,0),ds.getImageData(0,0,t,r).data}const CC=[256,256];class jh extends Fd{constructor(e){const t=le.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Za(this.data_);return e?[e.width,e.height]:CC}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==le.IDLE&&this.state!==le.ERROR)return;this.state=le.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=le.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=le.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(wC),this.controller_=null),super.disposeInternal()}}const E0=.5,RC=10,Gm=.25;class x0{constructor(e,t,r,s,l,u,c){this.sourceProj_=e,this.targetProj_=t;let h={};const f=c?nx(M=>ct(c,gd(M,this.targetProj_,this.sourceProj_))):ba(this.targetProj_,this.sourceProj_);this.transformInv_=function(M){const L=M[0]+"/"+M[1];return h[L]||(h[L]=f(M)),h[L]},this.maxSourceExtent_=s,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&ke(s)>=ke(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ke(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ke(this.targetProj_.getExtent()):null;const p=pi(r),_=ru(r),y=iu(r),E=nu(r),v=this.transformInv_(p),w=this.transformInv_(_),S=this.transformInv_(y),C=this.transformInv_(E),R=RC+(u?Math.max(0,Math.ceil(Math.log2(Wo(r)/(u*u*256*256)))):0);if(this.addQuad_(p,_,y,E,v,w,S,C,R),this.wrapsXInSource_){let M=1/0;this.triangles_.forEach(function(L,A,W){M=Math.min(M,L.source[0][0],L.source[1][0],L.source[2][0])}),this.triangles_.forEach(L=>{if(Math.max(L.source[0][0],L.source[1][0],L.source[2][0])-M>this.sourceWorldWidth_/2){const A=[[L.source[0][0],L.source[0][1]],[L.source[1][0],L.source[1][1]],[L.source[2][0],L.source[2][1]]];A[0][0]-M>this.sourceWorldWidth_/2&&(A[0][0]-=this.sourceWorldWidth_),A[1][0]-M>this.sourceWorldWidth_/2&&(A[1][0]-=this.sourceWorldWidth_),A[2][0]-M>this.sourceWorldWidth_/2&&(A[2][0]-=this.sourceWorldWidth_);const W=Math.min(A[0][0],A[1][0],A[2][0]);Math.max(A[0][0],A[1][0],A[2][0])-W<this.sourceWorldWidth_/2&&(L.source=A)}})}h={}}addTriangle_(e,t,r,s,l,u){this.triangles_.push({source:[s,l,u],target:[e,t,r]})}addQuad_(e,t,r,s,l,u,c,h,f){const p=Gp([l,u,c,h]),_=this.sourceWorldWidth_?ke(p)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,E=this.sourceProj_.canWrapX()&&_>.5&&_<1;let v=!1;if(f>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const S=Gp([e,t,r,s]);v=ke(S)/this.targetWorldWidth_>Gm||v}!E&&this.sourceProj_.isGlobal()&&_&&(v=_>Gm||v)}if(!v&&this.maxSourceExtent_&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(p[3])&&!Xt(p,this.maxSourceExtent_))return;let w=0;if(!v&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(h[0])||!isFinite(h[1]))){if(f>0)v=!0;else if(w=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(u[0])||!isFinite(u[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(f>0){if(!v){const S=[(e[0]+r[0])/2,(e[1]+r[1])/2],C=this.transformInv_(S);let R;E?R=(Cs(l[0],y)+Cs(c[0],y))/2-Cs(C[0],y):R=(l[0]+c[0])/2-C[0];const M=(l[1]+c[1])/2-C[1];v=R*R+M*M>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const S=[(t[0]+r[0])/2,(t[1]+r[1])/2],C=this.transformInv_(S),R=[(s[0]+e[0])/2,(s[1]+e[1])/2],M=this.transformInv_(R);this.addQuad_(e,t,S,R,l,u,C,M,f-1),this.addQuad_(R,S,r,s,M,C,c,h,f-1)}else{const S=[(e[0]+t[0])/2,(e[1]+t[1])/2],C=this.transformInv_(S),R=[(r[0]+s[0])/2,(r[1]+s[1])/2],M=this.transformInv_(R);this.addQuad_(e,S,R,s,l,C,M,h,f-1),this.addQuad_(S,t,r,R,C,u,c,M,f-1)}return}}if(E){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}w&11||this.addTriangle_(e,r,s,l,c,h),w&14||this.addTriangle_(e,r,t,l,c,u),w&&(w&13||this.addTriangle_(t,s,e,u,h,l),w&7||this.addTriangle_(t,s,r,u,h,c))}calculateSourceExtent(){const e=qt();return this.triangles_.forEach(function(t,r,s){const l=t.source;No(e,l[0]),No(e,l[1]),No(e,l[2])}),e}getTriangles(){return this.triangles_}}let Sh;const Ts=[];function bm(i,e,t,r,s){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(r,s),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,r)+1,Math.max(t,s)),i.restore()}function Ch(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function TC(){if(Sh===void 0){const i=nt(6,6,Ts);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",bm(i,4,5,4,0),bm(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;Sh=Ch(e,0)||Ch(e,4)||Ch(e,8),uu(i),Ts.push(i.canvas)}return Sh}function Um(i,e,t,r){const s=gd(t,e,i);let l=Hp(e,r,t);const u=e.getMetersPerUnit();u!==void 0&&(l*=u);const c=i.getMetersPerUnit();c!==void 0&&(l/=c);const h=i.getExtent();if(!h||ks(h,s)){const f=Hp(i,l,s)/l;isFinite(f)&&f>0&&(l/=f)}return l}function w0(i,e,t,r){const s=Pr(t);let l=Um(i,e,s,r);return(!isFinite(l)||l<=0)&&p_(t,function(u){return l=Um(i,e,u,r),isFinite(l)&&l>0}),l}function IC(i,e,t,r,s,l,u,c,h,f,p,_,y,E){const v=nt(Math.round(t*i),Math.round(t*e),Ts);if(_||(v.imageSmoothingEnabled=!1),h.length===0)return v.canvas;v.scale(t,t);function w(A){return Math.round(A*t)/t}v.globalCompositeOperation="lighter";const S=qt();h.forEach(function(A,W,V){f_(S,A.extent)});let C;const R=t/r,M=(_?1:1+Math.pow(2,-24))/R;C=nt(Math.round(ke(S)*R),Math.round(ht(S)*R),Ts),_||(C.imageSmoothingEnabled=!1),h.forEach(function(A,W,V){if(A.image.width>0&&A.image.height>0){if(A.clipExtent){C.save();const q=(A.clipExtent[0]-S[0])*R,ie=-(A.clipExtent[3]-S[3])*R,ee=ke(A.clipExtent)*R,te=ht(A.clipExtent)*R;C.rect(_?q:Math.round(q),_?ie:Math.round(ie),_?ee:Math.round(q+ee)-Math.round(q),_?te:Math.round(ie+te)-Math.round(ie)),C.clip()}const b=(A.extent[0]-S[0])*R,U=-(A.extent[3]-S[3])*R,Y=ke(A.extent)*R,ne=ht(A.extent)*R;C.drawImage(A.image,f,f,A.image.width-2*f,A.image.height-2*f,_?b:Math.round(b),_?U:Math.round(U),_?Y:Math.round(b+Y)-Math.round(b),_?ne:Math.round(U+ne)-Math.round(U)),A.clipExtent&&C.restore()}});const L=pi(u);return c.getTriangles().forEach(function(A,W,V){const b=A.source,U=A.target;let Y=b[0][0],ne=b[0][1],q=b[1][0],ie=b[1][1],ee=b[2][0],te=b[2][1];const re=w((U[0][0]-L[0])/l),Z=w(-(U[0][1]-L[1])/l),j=w((U[1][0]-L[0])/l),Q=w(-(U[1][1]-L[1])/l),G=w((U[2][0]-L[0])/l),I=w(-(U[2][1]-L[1])/l),N=Y,se=ne;Y=0,ne=0,q-=N,ie-=se,ee-=N,te-=se;const z=[[q,ie,0,0,j-re],[ee,te,0,0,G-re],[0,0,q,ie,Q-Z],[0,0,ee,te,I-Z]],ce=DE(z);if(!ce)return;if(v.save(),v.beginPath(),TC()||!_){v.moveTo(j,Q);const _e=4,we=re-j,Te=Z-Q;for(let Ge=0;Ge<_e;Ge++)v.lineTo(j+w((Ge+1)*we/_e),Q+w(Ge*Te/(_e-1))),Ge!=_e-1&&v.lineTo(j+w((Ge+1)*we/_e),Q+w((Ge+1)*Te/(_e-1)));v.lineTo(G,I)}else v.moveTo(j,Q),v.lineTo(re,Z),v.lineTo(G,I);v.clip(),v.transform(ce[0],ce[2],ce[1],ce[3],re,Z),v.translate(S[0]-N,S[3]-se);let de;if(C)de=C.canvas,v.scale(M,-M);else{const _e=h[0],we=_e.extent;de=_e.image,v.scale(ke(we)/de.width,-ht(we)/de.height)}v.drawImage(de,0,0),v.restore()}),C&&(uu(C),Ts.push(C.canvas)),p&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,c.getTriangles().forEach(function(A,W,V){const b=A.target,U=(b[0][0]-L[0])/l,Y=-(b[0][1]-L[1])/l,ne=(b[1][0]-L[0])/l,q=-(b[1][1]-L[1])/l,ie=(b[2][0]-L[0])/l,ee=-(b[2][1]-L[1])/l;v.beginPath(),v.moveTo(ne,q),v.lineTo(U,Y),v.lineTo(ie,ee),v.closePath(),v.stroke()}),v.restore()),v.canvas}function yu(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Bh(i,e,t,r,s,l,u){u=u??yu();const c=1/(i-e),h=1/(t-r),f=1/(s-l);return u[0]=-2*c,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*h,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*f,u[11]=0,u[12]=(i+e)*c,u[13]=(r+t)*h,u[14]=(l+s)*f,u[15]=1,u}function Wm(i,e,t,r,s){return s=s??yu(),s[0]=i[0]*e,s[1]=i[1]*e,s[2]=i[2]*e,s[3]=i[3]*e,s[4]=i[4]*t,s[5]=i[5]*t,s[6]=i[6]*t,s[7]=i[7]*t,s[8]=i[8]*r,s[9]=i[9]*r,s[10]=i[10]*r,s[11]=i[11]*r,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s}function LC(i,e,t,r,s){s=s??yu();let l,u,c,h,f,p,_,y,E,v,w,S;return i===s?(s[12]=i[0]*e+i[4]*t+i[8]*r+i[12],s[13]=i[1]*e+i[5]*t+i[9]*r+i[13],s[14]=i[2]*e+i[6]*t+i[10]*r+i[14],s[15]=i[3]*e+i[7]*t+i[11]*r+i[15]):(l=i[0],u=i[1],c=i[2],h=i[3],f=i[4],p=i[5],_=i[6],y=i[7],E=i[8],v=i[9],w=i[10],S=i[11],s[0]=l,s[1]=u,s[2]=c,s[3]=h,s[4]=f,s[5]=p,s[6]=_,s[7]=y,s[8]=E,s[9]=v,s[10]=w,s[11]=S,s[12]=l*e+f*t+E*r+i[12],s[13]=u*e+p*t+v*r+i[13],s[14]=c*e+_*t+w*r+i[14],s[15]=h*e+y*t+S*r+i[15]),s}function PC(i,e,t,r){return r=r??yu(),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=i,r[13]=e,r[14]=t,r[15]=1,r}const kC=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,AC=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class MC{constructor(e){this.gl_=e,this.program_=Yh(e,AC,kC),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,r,s,l,u,c,h,f,p,_,y,E){const v=this.gl_;h===void 0&&(h=s),f===void 0&&(f=l),u===void 0&&(u=t),c===void 0&&(c=r),p===void 0&&(p=u),_===void 0&&(_=c),y===void 0&&(y=v.canvas.width),E===void 0&&(E=v.canvas.height),v.bindTexture(v.TEXTURE_2D,e),v.useProgram(this.program_),v.bindBuffer(v.ARRAY_BUFFER,this.positionBuffer),v.enableVertexAttribArray(this.positionLocation),v.vertexAttribPointer(this.positionLocation,2,v.FLOAT,!1,0,0),v.bindBuffer(v.ARRAY_BUFFER,this.texcoordBuffer),v.enableVertexAttribArray(this.texcoordLocation),v.vertexAttribPointer(this.texcoordLocation,2,v.FLOAT,!1,0,0);let w=Bh(0,y,0,E,-1,1);w=LC(w,h,f,0),w=Wm(w,p,_,1),v.uniformMatrix4fv(this.matrixLocation,!1,w);let S=PC(s/t,l/r,0);S=Wm(S,u/t,c/r,1),v.uniformMatrix4fv(this.textureMatrixLocation,!1,S),v.uniform1i(this.textureLocation,0),v.drawArrays(v.TRIANGLES,0,this.positions.length/2)}}function Xm(i,e,t){const r=i.createShader(e);if(r===null)throw new Error("Shader compilation failed");if(i.shaderSource(r,t),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS)){const s=i.getShaderInfoLog(r);throw s===null?new Error("Shader info log creation failed"):new Error(s)}return r}function Yh(i,e,t){const r=i.createProgram(),s=Xm(i,i.VERTEX_SHADER,t),l=Xm(i,i.FRAGMENT_SHADER,e);if(r===null)throw new Error("Program creation failed");if(i.attachShader(r,s),i.attachShader(r,l),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw i.getProgramInfoLog(r)===null?new Error("Program info log creation failed"):new Error;return r}const DC=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,FC=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,OC=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,NC=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function zC(i,e,t,r){let s;return t.length?s=t.shift():Sd?s=new OffscreenCanvas(i||300,e||300):s=document.createElement("canvas"),i&&(s.width=i),e&&(s.height=e),s.getContext("webgl",r)}function GC(i){const e=i.canvas;e.width=1,e.height=1,i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT)}const jm=[];function bC(i,e,t,r,s,l,u,c,h,f,p,_,y,E){const v=Math.round(r*e),w=Math.round(r*t);i.canvas.width=v,i.canvas.height=w;let S,C;if(C=i.createTexture(),i.bindTexture(i.TEXTURE_2D,C),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),y?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST)),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,v,w,0,i.RGBA,p,null),S=i.createFramebuffer(),i.bindFramebuffer(i.FRAMEBUFFER,S),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,C,0),S===null)throw new Error("Could not create framebuffer");if(C===null)throw new Error("Could not create texture");if(h.length===0)return{width:v,height:w,framebuffer:S,texture:C};const R=qt();h.forEach(function(Y,ne,q){f_(R,Y.extent)});let M,L,A;const W=1/s;{if(M=i.createTexture(),C===null)throw new Error("Could not create texture");L=Math.round(ke(R)*W),A=Math.round(ht(R)*W);const Y=i.getParameter(i.MAX_TEXTURE_SIZE),ne=Math.max(L,A),q=ne>Y?Y/ne:1,ie=Math.round(L*q),ee=Math.round(A*q);i.bindTexture(i.TEXTURE_2D,M),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),y?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST)),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,ie,ee,0,i.RGBA,p,null);const te=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,te),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,M,0);const re=new MC(i);h.forEach(function(Z,j,Q){const G=(Z.extent[0]-R[0])*W*q,I=-(Z.extent[3]-R[3])*W*q,N=ke(Z.extent)*W*q,se=ht(Z.extent)*W*q;if(i.bindFramebuffer(i.FRAMEBUFFER,te),i.viewport(0,0,ie,ee),Z.clipExtent){const z=(Z.clipExtent[0]-R[0])*W*q,ce=-(Z.clipExtent[3]-R[3])*W*q,de=ke(Z.clipExtent)*W*q,_e=ht(Z.clipExtent)*W*q;i.enable(i.SCISSOR_TEST),i.scissor(y?z:Math.round(z),y?ce:Math.round(ce),y?de:Math.round(z+de)-Math.round(z),y?_e:Math.round(ce+_e)-Math.round(ce))}re.drawImage(Z.texture,Z.width,Z.height,f,f,Z.width-2*f,Z.height-2*f,y?G:Math.round(G),y?I:Math.round(I),y?N:Math.round(G+N)-Math.round(G),y?se:Math.round(I+se)-Math.round(I),ie,ee),i.disable(i.SCISSOR_TEST)}),i.deleteFramebuffer(te)}const V=pi(u),b=pi(R),U=Y=>{const ne=(Y[0][0]-V[0])/l*r,q=-(Y[0][1]-V[1])/l*r,ie=(Y[1][0]-V[0])/l*r,ee=-(Y[1][1]-V[1])/l*r,te=(Y[2][0]-V[0])/l*r,re=-(Y[2][1]-V[1])/l*r;return{u1:ie,v1:ee,u0:ne,v0:q,u2:te,v2:re}};i.bindFramebuffer(i.FRAMEBUFFER,S),i.viewport(0,0,v,w);{const Y=[],ne=[],q=Yh(i,NC,OC);i.useProgram(q);const ie=i.getUniformLocation(q,"u_texture");i.bindTexture(i.TEXTURE_2D,M),i.uniform1i(ie,0),c.getTriangles().forEach(function(G,I,N){const se=G.source,z=G.target,{u1:ce,v1:de,u0:_e,v0:we,u2:Te,v2:Ge}=U(z),Rt=(se[0][0]-b[0])/s/L,Mn=-(se[0][1]-b[1])/s/A,pn=(se[1][0]-b[0])/s/L,Hn=-(se[1][1]-b[1])/s/A,Dn=(se[2][0]-b[0])/s/L,Qt=-(se[2][1]-b[1])/s/A;Y.push(ce,de,_e,we,Te,Ge),ne.push(pn,Hn,Rt,Mn,Dn,Qt)});const ee=Bh(0,v,w,0,-1,1),te=i.getUniformLocation(q,"u_matrix");i.uniformMatrix4fv(te,!1,ee);const re=i.getAttribLocation(q,"a_position"),Z=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,Z),i.bufferData(i.ARRAY_BUFFER,new Float32Array(Y),i.STATIC_DRAW),i.vertexAttribPointer(re,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(re);const j=i.getAttribLocation(q,"a_texcoord"),Q=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,Q),i.bufferData(i.ARRAY_BUFFER,new Float32Array(ne),i.STATIC_DRAW),i.vertexAttribPointer(j,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(j),i.drawArrays(i.TRIANGLES,0,Y.length/2)}if(_){const Y=Yh(i,FC,DC);i.useProgram(Y);const ne=Bh(0,v,w,0,-1,1),q=i.getUniformLocation(Y,"u_matrix");i.uniformMatrix4fv(q,!1,ne);const ie=Array.isArray(_)?_:[0,0,0,255],ee=i.getUniformLocation(Y,"u_val");i.uniform4fv(ee,ie);const te=i.getAttribLocation(Y,"a_position"),re=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,re),i.vertexAttribPointer(te,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(te);const Z=c.getTriangles().reduce(function(j,Q){const G=Q.target,{u1:I,v1:N,u0:se,v0:z,u2:ce,v2:de}=U(G);return j.concat([I,N,se,z,se,z,ce,de,ce,de,I,N])},[]);i.bufferData(i.ARRAY_BUFFER,new Float32Array(Z),i.STATIC_DRAW),i.drawArrays(i.LINES,0,Z.length/2)}return{width:v,height:w,framebuffer:S,texture:C}}class UC extends jh{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,r=t.getExtent(),s=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?s?Pn(r,s):r:s;const l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),u=this.targetTileGrid_.getExtent();let c=this.sourceTileGrid_.getExtent();const h=u?Pn(l,u):l;if(Wo(h)===0){this.state=le.EMPTY;return}r&&(c?c=Pn(c,r):c=r);const f=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),p=e.targetProj,_=w0(t,p,h,f);if(!isFinite(_)||_<=0){this.state=le.EMPTY;return}const y=e.errorThreshold!==void 0?e.errorThreshold:E0;if(this.triangulation_=new x0(t,p,h,c,_*y,f,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=le.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(_);let E=this.triangulation_.calculateSourceExtent();if(c&&(t.canWrapX()?(E[1]=$e(E[1],c[1],c[3]),E[3]=$e(E[3],c[1],c[3])):E=Pn(E,c)),!Wo(E))this.state=le.EMPTY;else{let v=0,w=0;t.canWrapX()&&(v=ke(r),w=Math.floor((E[0]-r[0])/v)),rd(E.slice(),t,!0).forEach(C=>{const R=this.sourceTileGrid_.getTileRangeForExtentAndZ(C,this.sourceZ_),M=e.getTileFunction;for(let L=R.minX;L<=R.maxX;L++)for(let A=R.minY;A<=R.maxY;A++){const W=M(this.sourceZ_,L,A,this.pixelRatio_);if(W){const V=w*v;this.sourceTiles_.push({tile:W,offset:V})}}++w}),this.sourceTiles_.length===0&&(this.state=le.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(L=>{var I;const A=L.tile;if(!A||A.getState()!==le.LOADED)return;const W=A.getSize(),V=this.gutter_;let b;const U=xC(A.getData());U?b=U:(t=!0,b=SC(Za(A.getData())));const Y=[W[0]+2*V,W[1]+2*V],ne=b instanceof Float32Array,q=Y[0]*Y[1],ie=ne?Float32Array:Uint8ClampedArray,ee=new ie(b.buffer),te=ie.BYTES_PER_ELEMENT,re=te*ee.length/q,Z=ee.byteLength/Y[1],j=Math.floor(Z/te/Y[0]),Q=this.sourceTileGrid_.getTileCoordExtent(A.tileCoord);Q[0]+=L.offset,Q[2]+=L.offset;const G=(I=this.clipExtent_)==null?void 0:I.slice();G&&(G[0]+=L.offset,G[2]+=L.offset),e.push({extent:Q,clipExtent:G,data:ee,dataType:ie,bytesPerPixel:re,pixelSize:Y,bandCount:j})}),this.sourceTiles_.length=0,e.length===0){this.state=le.ERROR,this.changed();return}const r=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(r),l=typeof s=="number"?s:s[0],u=typeof s=="number"?s:s[1],c=l*this.pixelRatio_,h=u*this.pixelRatio_,f=this.targetTileGrid_.getResolution(r),p=this.sourceTileGrid_.getResolution(this.sourceZ_),_=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),y=e[0].bandCount,E=new e[0].dataType(y*c*h),v=zC(c,h,jm,{premultipliedAlpha:!1,antialias:!1});let w;const S=v.RGBA;let C;e[0].dataType==Float32Array?(C=v.FLOAT,v.getExtension("WEBGL_color_buffer_float"),v.getExtension("OES_texture_float"),v.getExtension("EXT_float_blend"),w=v.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(C=v.UNSIGNED_BYTE,w=this.interpolate);const R=4,M=Math.ceil(y/R);for(let L=M-1;L>=0;--L){const A=[];for(let ie=0,ee=e.length;ie<ee;++ie){const te=e[ie],re=te.pixelSize,Z=re[0],j=re[1],Q=new te.dataType(R*Z*j),G=te.data;let I=L*R;for(let se=0,z=Q.length;se<z;se+=R)Q[se]=G[I],Q[se+1]=G[I+1],Q[se+2]=G[I+2],Q[se+3]=G[I+3],I+=y;const N=v.createTexture();v.bindTexture(v.TEXTURE_2D,N),w?(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR)):(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST)),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texImage2D(v.TEXTURE_2D,0,S,Z,j,0,S,C,Q),A.push({extent:te.extent,clipExtent:te.clipExtent,texture:N,width:Z,height:j})}const{framebuffer:W,width:V,height:b}=bC(v,l,u,this.pixelRatio_,p,f,_,this.triangulation_,A,this.gutter_,C,this.renderEdges_,w),U=V,Y=b*R,ne=new e[0].dataType(U*Y);v.bindFramebuffer(v.FRAMEBUFFER,W),v.readPixels(0,0,V,b,v.RGBA,C,ne);let q=L*R;for(let ie=0,ee=ne.length;ie<ee;ie+=R){const te=(U-1-(ie/Y|0))*Y+ie%Y;E[q]=ne[te],E[q+1]=ne[te+1],E[q+2]=ne[te+2],E[q+3]=ne[te+3],q+=y}}if(GC(v),jm.push(v.canvas),t){const L=nt(l,u),A=new ImageData(E,l);L.putImageData(A,0,0),this.reprojData_=L.canvas}else this.reprojData_=E;this.reprojSize_=[Math.round(c),Math.round(h)],this.state=le.LOADED,this.changed()}load(){if(this.state!==le.IDLE&&this.state!==le.ERROR)return;this.state=le.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r!==le.IDLE&&r!==le.LOADING)return;e++;const s=Pe(t,xe.CHANGE,()=>{const l=t.getState();(l==le.LOADED||l==le.ERROR||l==le.EMPTY)&&(We(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==le.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(We),this.sourcesListenerKeys_=null}}class Vh extends Fd{constructor(e,t,r,s,l,u,c,h,f,p,_,y){super(l,le.IDLE,y),this.renderEdges_=_!==void 0?_:!1,this.pixelRatio_=c,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=u||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const E=s.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let w=this.sourceTileGrid_.getExtent();const S=v?Pn(E,v):E;if(Wo(S)===0){this.state=le.EMPTY;return}const C=e.getExtent();C&&(w?w=Pn(w,C):w=C);const R=s.getResolution(this.wrappedTileCoord_[0]),M=w0(e,r,S,R);if(!isFinite(M)||M<=0){this.state=le.EMPTY;return}const L=p!==void 0?p:E0;if(this.triangulation_=new x0(e,r,S,w,M*L,R),this.triangulation_.getTriangles().length===0){this.state=le.EMPTY;return}this.sourceZ_=t.getZForResolution(M);let A=this.triangulation_.calculateSourceExtent();if(w&&(e.canWrapX()?(A[1]=$e(A[1],w[1],w[3]),A[3]=$e(A[3],w[1],w[3])):A=Pn(A,w)),!Wo(A))this.state=le.EMPTY;else{let W=0,V=0;e.canWrapX()&&(W=ke(C),V=Math.floor((A[0]-C[0])/W)),rd(A.slice(),e,!0).forEach(U=>{const Y=t.getTileRangeForExtentAndZ(U,this.sourceZ_);for(let ne=Y.minX;ne<=Y.maxX;ne++)for(let q=Y.minY;q<=Y.maxY;q++){const ie=f(this.sourceZ_,ne,q,c);if(ie){const ee=V*W;this.sourceTiles_.push({tile:ie,offset:ee})}}++V}),this.sourceTiles_.length===0&&(this.state=le.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var s;const r=t.tile;if(r&&r.getState()==le.LOADED){const l=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);l[0]+=t.offset,l[2]+=t.offset;const u=(s=this.clipExtent_)==null?void 0:s.slice();u&&(u[0]+=t.offset,u[2]+=t.offset),e.push({extent:l,clipExtent:u,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=le.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),s=typeof r=="number"?r:r[0],l=typeof r=="number"?r:r[1],u=this.targetTileGrid_.getResolution(t),c=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=IC(s,l,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),u,h,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=le.LOADED}this.changed()}load(){if(this.state==le.IDLE){this.state=le.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==le.IDLE||r==le.LOADING){e++;const s=Pe(t,xe.CHANGE,l=>{const u=t.getState();(u==le.LOADED||u==le.ERROR||u==le.EMPTY)&&(We(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,s){t.getState()==le.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(We),this.sourcesListenerKeys_=null}release(){this.canvas_&&(uu(this.canvas_.getContext("2d")),Ts.push(this.canvas_),this.canvas_=null),super.release()}}function Rh(i,e,t,r){return`${i},${mC(e,t,r)}`}function Th(i,e,t){if(!(t in i))return i[t]=new Set([e]),!0;const r=i[t],s=r.has(e);return s||r.add(e),!s}function WC(i,e,t){const r=i[t];return r?r.delete(e):!1}function Bm(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=Pn(e,Zi(t.extent,i.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const s=r.getTileGridForProjection(i.viewState.projection).getExtent();s&&(e=Pn(e,s))}return e}class XC extends l0{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=qt(),this.tempTileRange_=new Gd(0,0,0,0),this.tempTileCoord_=Ha(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new pC(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,s){const l=this.tileCache_,c=this.getLayer().getSource(),h=Rh(c.getKey(),e,t,r);let f;if(l.containsKey(h))f=l.get(h);else{if(f=c.getTile(e,t,r,s.pixelRatio,s.viewState.projection),!f)return null;l.set(h,f)}return f}getTile(e,t,r,s){const l=this.getOrCreateTile(e,t,r,s);return l||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),s=ct(t.pixelToCoordinateTransform,e.slice()),l=r.getExtent();if(l&&!ks(l,s))return null;const u=t.viewState,c=r.getRenderSource(),h=c.getTileGridForProjection(u.projection),f=c.getTilePixelRatio(t.pixelRatio);for(let p=h.getZForResolution(u.resolution);p>=h.getMinZoom();--p){const _=h.getTileCoordForCoordAndZ(s,p),y=this.getTile(p,_[1],_[2],t);if(!y||y.getState()!==le.LOADED)continue;const E=h.getOrigin(p),v=Bt(h.getTileSize(p)),w=h.getResolution(p);let S;if(y instanceof f0||y instanceof Vh)S=y.getImage();else if(y instanceof jh){if(S=Za(y.getData()),!S)continue}else continue;const C=Math.floor(f*((s[0]-E[0])/w-_[1]*v[0])),R=Math.floor(f*((E[1]-s[1])/w-_[2]*v[1])),M=Math.round(f*c.getGutterForProjection(u.projection));return this.getImageData(S,C+M,R+M)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,t,r,s,l){const u=e.viewState,c=this.getLayer(),h=c.getRenderSource(),f=h.getTileGridForProjection(u.projection),p=Oe(h);p in e.wantedTiles||(e.wantedTiles[p]={});const _=e.wantedTiles[p],y=c.getMapInternal(),E=Math.max(r-l,f.getMinZoom(),f.getZForResolution(Math.min(c.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(c.getMinZoom(),0)):f.getResolution(0)),h.zDirection));for(let v=r;v>=E;--v){const w=f.getTileRangeForExtentAndZ(t,v,this.tempTileRange_),S=f.getResolution(v);for(let C=w.minX;C<=w.maxX;++C)for(let R=w.minY;R<=w.maxY;++R){const M=this.getTile(v,C,R,e);if(!M||!Th(s,M,v))continue;const A=M.getKey();if(_[A]=!0,M.getState()===le.IDLE&&!e.tileQueue.isKeyQueued(A)){const W=Ha(v,C,R,this.tempTileCoord_);e.tileQueue.enqueue([M,p,f.getTileCoordCenter(W),S])}}}}findStaleTile_(e,t){const r=this.tileCache_,s=e[0],l=e[1],u=e[2],c=this.getStaleKeys();for(let h=0;h<c.length;++h){const f=Rh(c[h],s,l,u);if(r.containsKey(f)){const p=r.get(f);if(p.getState()===le.LOADED)return p.endTransition(Oe(this)),Th(t,p,s),!0}}return!1}findAltTiles_(e,t,r,s){const l=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!l)return!1;let u=!0;const c=this.tileCache_,f=this.getLayer().getRenderSource().getKey();for(let p=l.minX;p<=l.maxX;++p)for(let _=l.minY;_<=l.maxY;++_){const y=Rh(f,r,p,_);let E=!1;if(c.containsKey(y)){const v=c.get(y);v.getState()===le.LOADED&&(Th(s,v,r),E=!0)}E||(u=!1)}return u}renderFrame(e,t){let r=!0;this.renderComplete=!0;const s=e.layerStatesArray[e.layerIndex],l=e.viewState,u=l.projection,c=l.resolution,h=l.center,f=e.pixelRatio,p=this.getLayer(),_=p.getSource(),y=_.getRevision(),E=_.getTileGridForProjection(u),v=E.getZForResolution(c,_.zDirection),w=E.getResolution(v),S=_.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==S&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=S):this.renderedSourceKey_=S;let C=e.extent;const R=_.getTilePixelRatio(f);this.prepareContainer(e,t);const M=this.context.canvas.width,L=this.context.canvas.height,A=s.extent&&Zi(s.extent);A&&(C=Pn(C,Zi(s.extent)));const W=w*M/2/R,V=w*L/2/R,b=[h[0]-W,h[1]-V,h[0]+W,h[1]+V],U={};this.renderedTiles.length=0;const Y=p.getPreload();if(e.nextExtent){const G=E.getZForResolution(l.nextResolution,_.zDirection),I=Bm(e,e.nextExtent);this.enqueueTiles(e,I,G,U,Y)}const ne=Bm(e,C);if(this.enqueueTiles(e,ne,v,U,0),Y>0&&setTimeout(()=>{this.enqueueTiles(e,ne,v-1,U,Y-1)},0),!(v in U))return this.container;const q=Oe(this),ie=e.time;for(const G of U[v]){const I=G.getState();if((G instanceof Vh||G instanceof UC)&&I===le.EMPTY)continue;const N=G.tileCoord;if(I===le.LOADED&&G.getAlpha(q,ie)===1){G.endTransition(q);continue}if(I!==le.IDLE&&(r=!1),I!==le.ERROR&&(this.renderComplete=!1),this.findStaleTile_(N,U)){WC(U,G,v),e.animate=!0;continue}if(this.findAltTiles_(E,N,v+1,U))continue;const ce=E.getMinZoom();for(let de=v-1;de>=ce&&!this.findAltTiles_(E,N,de,U);--de);}const ee=w/c*f/R,te=this.getRenderContext(e);gi(this.tempTransform,M/2,L/2,ee,ee,0,-M/2,-L/2),s.extent&&this.clipUnrotated(te,e,A),_.getInterpolate()||(te.imageSmoothingEnabled=!1),this.preRender(te,e);const re=Object.keys(U).map(Number);re.sort(qi);let Z;const j=[],Q=[];for(let G=re.length-1;G>=0;--G){const I=re[G],N=_.getTilePixelSize(I,f,u),z=E.getResolution(I)/w,ce=N[0]*z*ee,de=N[1]*z*ee,_e=E.getTileCoordForCoordAndZ(pi(b),I),we=E.getTileCoordExtent(_e),Te=ct(this.tempTransform,[R*(we[0]-b[0])/w,R*(b[3]-we[3])/w]),Ge=R*_.getGutterForProjection(u);for(const Rt of U[I]){if(Rt.getState()!==le.LOADED)continue;const Mn=Rt.tileCoord,pn=_e[1]-Mn[1],Hn=Math.round(Te[0]-(pn-1)*ce),Dn=_e[2]-Mn[2],Qt=Math.round(Te[1]-(Dn-1)*de),mt=Math.round(Te[0]-pn*ce),Vt=Math.round(Te[1]-Dn*de),Fn=Hn-mt,Jt=Qt-Vt,en=re.length===1;let mn=!1;Z=[mt,Vt,mt+Fn,Vt,mt+Fn,Vt+Jt,mt,Vt+Jt];for(let Zn=0,$n=j.length;Zn<$n;++Zn)if(!en&&I<Q[Zn]){const qe=j[Zn];Xt([mt,Vt,mt+Fn,Vt+Jt],[qe[0],qe[3],qe[4],qe[7]])&&(mn||(te.save(),mn=!0),te.beginPath(),te.moveTo(Z[0],Z[1]),te.lineTo(Z[2],Z[3]),te.lineTo(Z[4],Z[5]),te.lineTo(Z[6],Z[7]),te.moveTo(qe[6],qe[7]),te.lineTo(qe[4],qe[5]),te.lineTo(qe[2],qe[3]),te.lineTo(qe[0],qe[1]),te.clip())}j.push(Z),Q.push(I),this.drawTile(Rt,e,mt,Vt,Fn,Jt,Ge,en),mn&&te.restore(),this.renderedTiles.unshift(Rt),this.updateUsedTiles(e.usedTiles,_,Rt)}}if(this.renderedRevision=y,this.renderedResolution=w,this.extentChanged=!this.renderedExtent_||!Uo(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=f,this.postRender(this.context,e),s.extent&&te.restore(),te.imageSmoothingEnabled=!0,this.renderComplete){const G=(I,N)=>{const se=Oe(_),z=N.wantedTiles[se],ce=z?Object.keys(z).length:0;this.updateCacheSize(ce),this.tileCache_.expireCache()};e.postRenderFunctions.push(G)}return!this.renderComplete&&!r&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,s,l,u,c,h){let f;if(e instanceof jh){if(f=Za(e.getData()),!f)throw new Error("Rendering array data is not yet supported")}else f=this.getTileImage(e);if(!f)return;const p=this.getRenderContext(t),_=Oe(this),y=t.layerStatesArray[t.layerIndex],E=y.opacity*(h?e.getAlpha(_,t.time):1),v=E!==p.globalAlpha;v&&(p.save(),p.globalAlpha=E),p.drawImage(f,c,c,f.width-2*c,f.height-2*c,r,s,l,u),v&&p.restore(),E!==y.opacity?t.animate=!0:h&&e.endTransition(_)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const s=Oe(t);s in e||(e[s]={}),e[s][r.getKey()]=!0}}class jC extends EC{constructor(e){super(e)}createRenderer(){return new XC(this,{cacheSize:this.getCacheSize()})}}const Ih={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},fs=[0,0,0],Yi=5;class S0{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,De(hE(this.resolutions_,(s,l)=>l-s),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let s=0,l=this.resolutions_.length-1;s<l;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,De(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=pi(r)),De(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,De(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Id,De(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((s,l)=>{const u=new Gd(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(r){const c=this.getTileRangeForExtentAndZ(r,l);u.minX=Math.max(c.minX,u.minX),u.maxX=Math.min(c.maxX,u.maxX),u.minY=Math.max(c.minY,u.minY),u.maxY=Math.min(c.maxY,u.maxY)}return u}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const s=this.getTileRangeForExtentAndZ(e,t);for(let l=s.minX,u=s.maxX;l<=u;++l)for(let c=s.minY,h=s.maxY;c<=h;++c)r([t,l,c])}forEachTileCoordParentTileRange(e,t,r,s){let l,u,c,h=null,f=e[0]-1;for(this.zoomFactor_===2?(u=e[1],c=e[2]):h=this.getTileCoordExtent(e,s);f>=this.minZoom;){if(u!==void 0&&c!==void 0?(u=Math.floor(u/2),c=Math.floor(c/2),l=hs(u,u,c,c,r)):l=this.getTileRangeForExtentAndZ(h,f,r),t(f,l))return!0;--f}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,u=e[2]*2;return hs(l,l+1,u,u+1,t)}const s=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],l=e[1],u=e[2];if(t===s)return hs(l,u,l,u,r);if(this.zoomFactor_){const h=Math.pow(this.zoomFactor_,t-s),f=Math.floor(l*h),p=Math.floor(u*h);if(t<s)return hs(f,f,p,p,r);const _=Math.floor(h*(l+1))-1,y=Math.floor(h*(u+1))-1;return hs(f,_,p,y,r)}const c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,fs);const s=fs[1],l=fs[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,fs);const u=fs[1],c=fs[2];return hs(s,u,l,c,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=Bt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*r,t[1]-(e[2]+.5)*s[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),s=this.getResolution(e[0]),l=Bt(this.getTileSize(e[0]),this.tmpSize_),u=r[0]+e[1]*l[0]*s,c=r[1]-(e[2]+1)*l[1]*s,h=u+l[0]*s,f=c+l[1]*s;return nr(u,c,h,f,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,s,l){const u=this.getZForResolution(r),c=r/this.getResolution(u),h=this.getOrigin(u),f=Bt(this.getTileSize(u),this.tmpSize_);let p=c*(e-h[0])/r/f[0],_=c*(h[1]-t)/r/f[1];return s?(p=wa(p,Yi)-1,_=wa(_,Yi)-1):(p=xa(p,Yi),_=xa(_,Yi)),Ha(u,p,_,l)}getTileCoordForXYAndZ_(e,t,r,s,l){const u=this.getOrigin(r),c=this.getResolution(r),h=Bt(this.getTileSize(r),this.tmpSize_);let f=(e-u[0])/c/h[0],p=(u[1]-t)/c/h[1];return s?(f=wa(f,Yi)-1,p=wa(p,Yi)-1):(f=xa(f,Yi),p=xa(p,Yi)),Ha(r,f,p,l)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Jh(this.resolutions_,e,t||0);return $e(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return F_(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let s=this.minZoom;s<t;++s)r[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=r}}function C0(i){let e=i.getDefaultTileGrid();return e||(e=KC(i),i.setDefaultTileGrid(e)),e}function BC(i,e,t){const r=e[0],s=i.getTileCoordCenter(e),l=bd(t);if(!ks(l,s)){const u=ke(l),c=Math.ceil((l[0]-s[0])/u);return s[0]+=u*c,i.getTileCoordForCoordAndZ(s,r)}return e}function YC(i,e,t,r){r=r!==void 0?r:"top-left";const s=R0(i,e,t);return new S0({extent:i,origin:EE(i,r),resolutions:s,tileSize:t})}function VC(i){const e=i,t=e.extent||Yt("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:R0(t,e.maxZoom,e.tileSize,e.maxResolution)};return new S0(r)}function R0(i,e,t,r){e=e!==void 0?e:Zx,t=Bt(t!==void 0?t:Id);const s=ht(i),l=ke(i);r=r>0?r:Math.max(l/t[0],s/t[1]);const u=e+1,c=new Array(u);for(let h=0;h<u;++h)c[h]=r/Math.pow(2,h);return c}function KC(i,e,t,r){const s=bd(i);return YC(s,e,t,r)}function bd(i){i=Yt(i);let e=i.getExtent();if(!e){const t=180*sd.degrees/i.getMetersPerUnit();e=nr(-t,-t,t,t)}return e}class HC extends d0{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Bt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Oe(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,s,l){return Me()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:C0(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const s=this.getTileGridForProjection(r),l=this.getTilePixelRatio(t),u=Bt(s.getTileSize(e),this.tmpSize);return l==1?u:bx(u,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),s=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=BC(s,e,r)),vC(e,s)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class ZC extends _i{constructor(e,t){super(e),this.tile=t}}const $C=/\{z\}/g,qC=/\{x\}/g,QC=/\{y\}/g,JC=/\{-y\}/g;function eR(i,e,t,r,s){return i.replace($C,e.toString()).replace(qC,t.toString()).replace(QC,r.toString()).replace(JC,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-r).toString()})}function tR(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const r=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let l;for(l=r;l<=s;++l)e.push(i.replace(t[0],String.fromCharCode(l)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const r=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=r;s++)e.push(i.replace(t[0],s.toString()));return e}return e.push(i),e}function nR(i,e){return function(t,r,s){if(!t)return;let l;const u=t[0];if(e){const c=e.getFullTileRange(u);c&&(l=c.getHeight()-1)}return eR(i,u,t[1],t[2],l)}}function iR(i,e){const t=i.length,r=new Array(t);for(let s=0;s<t;++s)r[s]=nR(i[s],e);return rR(r)}function rR(i){return i.length===1?i[0]:function(e,t,r){if(!e)return;const s=_C(e),l=Cs(s,i.length);return i[l](e,t,r)}}class Ud extends HC{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Ud.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Oe(t),s=t.getState();let l;s==le.LOADING?(this.tileLoadingKeys_[r]=!0,l=Ih.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],l=s==le.ERROR?Ih.TILELOADERROR:s==le.LOADED?Ih.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new ZC(l,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=tR(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(iR(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class sR extends Ud{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:oR,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:f0,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!ah(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||ah(t,e)))return this.tileGrid;const r=Oe(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=C0(e)),this.tileGridForProjection[r]}createTile_(e,t,r,s,l,u){const c=[e,t,r],h=this.getTileCoordForTileUrlFunction(c,l),f=h?this.tileUrlFunction(h,s,l):void 0,p=new this.tileClass(c,f!==void 0?le.IDLE:le.EMPTY,f!==void 0?f:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=u,p.addEventListener(xe.CHANGE,this.handleTileChange.bind(this)),p}getTile(e,t,r,s,l){const u=this.getProjection();if(!u||!l||ah(u,l))return this.getTileInternal(e,t,r,s,u||l);const c=[e,t,r],h=this.getKey(),f=this.getTileGridForProjection(u),p=this.getTileGridForProjection(l),_=this.getTileCoordForTileUrlFunction(c,l),y=new Vh(u,f,l,p,c,_,this.getTilePixelRatio(s),this.getGutter(),(E,v,w,S)=>this.getTileInternal(E,v,w,S,u),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=h,y}getTileInternal(e,t,r,s,l){const u=this.getKey();return this.createTile_(e,t,r,s,l,u)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Yt(e);if(r){const s=Oe(r);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}}function oR(i,e){i.getImage().src=e}class lR extends sR{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:VC({extent:bd(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const aR='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class uR extends lR{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[aR];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}const T0=({location:i})=>{const e=X.useRef(null),[t,r]=X.useState("");return X.useEffect(()=>{try{const s=new fC({target:e.current,layers:[new jC({source:new uR})],view:new Wn({center:$p([i.lng,i.lat]),zoom:10})}),l=new td({geometry:new au($p([i.lng,i.lat]))});l.setStyle(new er({image:new sl({src:"https://cdn-icons-png.flaticon.com/512/684/684908.png",scale:.07})}));const u=new PS({source:new FS({features:[l]})});return s.addLayer(u),()=>s.setTarget(null)}catch(s){console.error("Map error:",s),r("Failed to load the map. Please try again.")}},[i]),t?Ee.jsx("p",{children:t}):Ee.jsx("div",{ref:e,style:{width:"100%",height:"400px"}})},cR=()=>Ee.jsx("div",{style:{textAlign:"center",padding:"20px"},children:Ee.jsx("p",{children:"Loading..."})}),hR=()=>{const[i,e]=X.useState([]),[t,r]=X.useState([]),[s,l]=X.useState(null),[u,c]=X.useState(""),[h,f]=X.useState(!0);X.useEffect(()=>{Da().then(_=>{e(_),r(_)}).catch(()=>c("Failed to fetch profiles. Please try again later.")).finally(()=>f(!1))},[]);const p=_=>{const y=_.target.value.toLowerCase();r(i.filter(E=>E.name.toLowerCase().includes(y)||E.description.toLowerCase().includes(y)))};return h?Ee.jsx(cR,{}):u?Ee.jsx("p",{children:u}):Ee.jsxs("div",{children:[Ee.jsx("input",{type:"text",placeholder:"Search profiles...",onChange:p,style:{marginBottom:"16px",padding:"8px",width:"100%"}}),Ee.jsx(lE,{profiles:t,onSummaryClick:_=>l(_.location)}),s&&Ee.jsx(T0,{location:s})]})};function dR(){return Ee.jsx(Vv,{children:Ee.jsxs("div",{children:[Ee.jsxs("nav",{style:{padding:"10px",backgroundColor:"#333",color:"#fff"},children:[Ee.jsx(Go,{to:"/",style:{margin:"10px",color:"white",textDecoration:"none"},children:"Home"}),Ee.jsx(Go,{to:"/admin",style:{margin:"10px",color:"white",textDecoration:"none"},children:"Admin Panel"})]}),Ee.jsxs(wv,{children:[Ee.jsx(ka,{path:"/",element:Ee.jsx(hR,{})}),Ee.jsx(ka,{path:"/admin",element:Ee.jsx(sE,{})}),Ee.jsx(ka,{path:"/map",element:Ee.jsx(T0,{})})]})]})})}A1.createRoot(document.getElementById("root")).render(Ee.jsx(C1.StrictMode,{children:Ee.jsx(dR,{})}));
